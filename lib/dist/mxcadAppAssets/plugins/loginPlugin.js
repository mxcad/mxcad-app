var Ur=Object.defineProperty;var Et=Object.getOwnPropertySymbols;var qr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable;var wt=(E,b,m)=>b in E?Ur(E,b,{enumerable:!0,configurable:!0,writable:!0,value:m}):E[b]=m,St=(E,b)=>{for(var m in b||(b={}))qr.call(b,m)&&wt(E,m,b[m]);if(Et)for(var m of Et(b))Yr.call(b,m)&&wt(E,m,b[m]);return E};var _=(E,b,m)=>new Promise((C,L)=>{var H=p=>{try{v(m.next(p))}catch(S){L(S)}},u=p=>{try{v(m.throw(p))}catch(S){L(S)}},v=p=>p.done?C(p.value):Promise.resolve(p.value).then(H,u);v((m=m.apply(E,b)).next())});(function(){"use strict";const E="modulepreload",b=function(t){return"/"+t},m={},C=function(e,r,n){return e()};var L=Object.defineProperty,H=(t,e,r)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u=(t,e)=>L(t,"name",{value:e,configurable:!0}),v=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),p=(t,e,r)=>H(t,typeof e!="symbol"?e+"":e,r),S,ye=(S=class{constructor(t){this._listeners=new Map,this._lastMessage={},this.options=Object.assign({ignoreError:!1},t)}get listeners(){return this._listeners}on(){let t=arguments[0],e=arguments[1],r=arguments[2],{objectify:n=!0,count:a=-1}=Object.assign({},r);this._listeners.has(t)||this._listeners.set(t,new Map);let i=++S.listenerSeqId,s=this._listeners.get(t);return s==null||s.set(i,[e,a]),this._emitRetainEvent(t,i,s),n?{off:u(()=>{s==null||s.delete(i),(s==null?void 0:s.size)==0&&this._listeners.delete(t)},"off")}:i}onAny(t,e){return this.on("*",t,e)}_emitRetainEvent(t,e,r){t in this._lastMessage&&this._executeListener(e,r,this._lastMessage[t])}once(t,e,r){return this.on(t,e,Object.assign({},r,{count:1}))}_forEachListeners(t){let e=!1;for(let[r,n]of this._listeners.entries()){if(e)break;for(let[a,[i,s]]of n.entries()){if(e)break;e=t({event:r,listenerId:a,listener:i,count:s,eventListeners:n})===!1}}}_forEachEventListeners(t,e){let r=!1,n=[[t,this._listeners.get(t)]];for(let[a,i]of n)if(i)for(let[s,[o,l]]of i){if(r)break;r=e({event:a,listenerId:s,listener:o,count:l,eventListeners:i})===!1}}off(){if(arguments.length==1){if(typeof arguments[0]=="number")this._forEachListeners(({listenerId:t,eventListeners:e,event:r})=>{var n;if(t==arguments[0])return e.delete(t),((n=this._listeners.get(r))==null?void 0:n.size)==0&&this._listeners.delete(r),!1});else if(typeof arguments[0]=="function"){let t=arguments[0];this._forEachListeners(({listenerId:e,listener:r,eventListeners:n,event:a})=>{var i;r==t&&(n.delete(e),((i=this._listeners.get(a))==null?void 0:i.size)==0&&this._listeners.delete(a))})}}else arguments.length==2&&typeof arguments[0]=="string"&&typeof arguments[1]=="function"&&this._forEachEventListeners(arguments[0],({event:t,listenerId:e,listener:r,eventListeners:n})=>{var a;t==arguments[0]&&r==arguments[1]&&(n.delete(e),((a=this._listeners.get(t))==null?void 0:a.size)==0&&this._listeners.delete(t))})}waitFor(t,e=0){return new Promise((r,n)=>{let a,i=!1,s;e>0&&(a=setTimeout(()=>{i=!0,this.off(s),n(new Error("Timeout"))},e)),s=this.once(t,o=>{i||(clearTimeout(a),r(o))})})}offAll(t){t?this._listeners.delete(t):this._listeners.clear()}_executeListener(t,e,r){if(!e)return;let n=e.get(t);if(n)try{return n[0](r)}catch(a){if(!this.options.ignoreError)throw a}finally{n[1]>-1&&(n[1]=n[1]-1,n[1]==0&&e.delete(t))}}_executeListeners(t,e,r){let n=[];return this._forEachEventListeners(t,({event:a,listenerId:i,eventListeners:s})=>{n.push(this._executeListener(i,s,e)),typeof r=="function"&&r(i),s.size==0&&this._listeners.delete(a)}),n}emit(t,e,r){return r&&(this._lastMessage[t]=e),this._executeListeners(t,e)}emitAsync(t,e,r){return _(this,null,function*(){return yield Promise.allSettled(this.emit(t,e,r))})}},u(S,"l"),S);ye.listenerSeqId=0;var _e=ye;(t=>typeof v<"u"?v:typeof Proxy<"u"?new Proxy(t,{get:u((e,r)=>(typeof v<"u"?v:e)[r],"get")}):t)(function(t){if(typeof v<"u")return v.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function ve(){return Date.now().toString()+parseInt(String(Math.random()*1e3))}u(ve,"getId");function V(t,e=!1){if(typeof t=="number")return!0;if(typeof t!="string"||e)return!1;try{if(t.includes(".")){let r=parseFloat(t);return t.endsWith(".")?!isNaN(r)&&String(r).length===t.length-1:!isNaN(r)&&String(r).length===t.length}else{let r=parseInt(t);return!isNaN(r)&&String(r).length===t.length}}catch(r){return!1}}u(V,"r");function R(t){return V(t)}u(R,"isMessageId");function be(t){return t&&typeof t=="object"&&t.__VoerkaI18nScope__}u(be,"isI18nScope");function Ee(t){return _(this,null,function*(){let e=yield t.call(this);return e&&"__esModule"in e||Symbol.toStringTag in e?e.default:e})}u(Ee,"loadAsyncModule");function we(t){return t&&typeof t.get=="function"&&typeof t.set=="function"&&typeof t.remove=="function"}u(we,"isStorage");function Se(t){return _(this,null,function*(){return(yield Promise.allSettled(t)).map(e=>e.status==="fulfilled"?e.value:e.reason)})}u(Se,"execAsyncs");function K(){try{return typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"}catch(t){return!1}}u(K,"isBrowser");var J=class W extends _e{constructor(e){if(super(),p(this,"__VoerkaI18nManager__",!0),p(this,"_scopes",[]),p(this,"_appScope"),W.instance)return W.instance;if(!e)throw new Error("create VoerkaI18nManager failed, appScope is required");this._registerAppScope(e),this._registerScopes(),this._loadPlugins(),W.instance=this,globalThis.VoerkaI18n=this}get debug(){return this.scope.debug}get logger(){return this.scope.logger}get scopes(){return this._scopes}get activeLanguage(){return this._appScope.activeLanguage}get defaultLanguage(){return this._appScope.defaultLanguage}get loader(){return this._appScope.loader}get storage(){return this.scope.storage}get languages(){return this.scope.languages}get scope(){return this._appScope}_registerScopes(){let e=globalThis.__VoerkaI18nScopes__;e&&Array.isArray(e)&&e.forEach(r=>this.register(r)),delete globalThis.__VoerkaI18nScopes__}getScope(e){return this._scopes.find(r=>r.id===e)}_loadPlugins(){let e=globalThis.__VoerkaI18nPlugins__;e&&Array.isArray(e)&&e.forEach(r=>r(this)),delete globalThis.__VoerkaI18nPlugins__}registerPlugin(e){typeof e=="function"&&e(this)}_registerAppScope(e){this._scopes.push(e),this._appScope=e,this.logger.debug("VoerkaI18nScope<"+e.id+"> is registered as appScope"),this.emitAsync("init",()=>this._appScope.activeLanguage,!0)}register(e){if(!be(e))throw new Error("register scope failed, invalid scope");this._scopes.push(e),e.bind(this),this.logger.debug(`VoerkaI18nScope<${e.id}> is registered`)}change(e){return _(this,null,function*(){yield this._refreshScopes(e);let r=this._appScope.activeLanguage;return this.scope.saveLanguage(),this.emit("change",r,!0),this.logger.info("language changed to: "+r),r})}_refreshScopes(e){return _(this,null,function*(){let r=this._scopes.map(n=>n.refresh(e));yield Se(r)})}refresh(){return _(this,null,function*(){return yield this._refreshScopes(this.activeLanguage)})}ready(e,r){return this.waitFor("ready",r).then(n=>{e&&e.call(this,n)})}clearPatchedMessages(){this._scopes.forEach(e=>e.clearPatchedMessages())}hasLanguage(e){return this.languages.findIndex(r=>r.name==e)!=-1}clearLanguage(){this.scope.clearLanguage()}saveLanguage(){this.scope.saveLanguage()}restoreLanguage(){this.scope.restoreLanguage()}};u(J,"VoerkaI18nManager"),p(J,"instance");var xe=J,Mt={get(t){if(globalThis.localStorage)return globalThis.localStorage.getItem(t)},set(t,e){globalThis.localStorage&&globalThis.localStorage.setItem(t,e)},remove(t){globalThis.localStorage&&globalThis.localStorage.removeItem(t)}},Pt=[{name:"zh",title:"中文",default:!0,active:!0},{name:"en",title:"英文"}],Me=u((t,e,r=[])=>{let n=Object.getOwnPropertyDescriptors(e);for(let a of r)delete n[a];Object.defineProperties(t,n)},"copyProps"),I=u((t,e=[t])=>{let r=Object.getPrototypeOf(t);return r===null?e:I(r,[...e,r])},"protoChain"),At=u((...t)=>{if(t.length===0)return;let e,r=t.map(n=>I(n));for(;r.every(n=>n.length>0);){let n=r.map(i=>i.pop()),a=n[0];if(n.every(i=>i===a))e=a;else break}return e},"nearestCommonProto"),Pe=u((t,e,r=[])=>{var n;let a=(n=At(...t))!==null&&n!==void 0?n:Object.prototype,i=Object.create(a),s=I(a);for(let o of t){let l=I(o);for(let g=l.length-1;g>=0;g--){let c=l[g];s.indexOf(c)===-1&&(Me(i,c,["constructor",...r]),s.push(c))}}return i.constructor=e,i},"hardMixProtos"),Q=u(t=>t.filter((e,r)=>t.indexOf(e)==r),"unique"),z=u((t,e)=>{let r=e.map(i=>I(i)),n=0,a=!0;for(;a;){a=!1;for(let i=e.length-1;i>=0;i--){let s=r[i][n];if(s!=null&&(a=!0,Object.getOwnPropertyDescriptor(s,t)!=null))return r[i][0]}n++}},"getIngredientWithProp"),Ft=u((t,e=Object.prototype)=>new Proxy({},{getPrototypeOf(){return e},setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor(r,n){return Object.getOwnPropertyDescriptor(z(n,t)||{},n)},defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has(r,n){return z(n,t)!==void 0||e[n]!==void 0},get(r,n){return(z(n,t)||e)[n]},set(r,n,a){let i=z(n,t);if(i===void 0)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return i[n]=a,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys(){return t.map(Object.getOwnPropertyNames).reduce((r,n)=>n.concat(r.filter(a=>n.indexOf(a)<0)))}}),"proxyMix");u((t,e)=>Ft([...t,{constructor:e}]),"softMixProtos");var Ae=new WeakMap,It=u(t=>Ae.get(t),"getMixinsForClass"),Tt=u((t,e)=>Ae.set(t,e),"registerMixins"),Fe=u((t,e)=>{var r,n;let a=Q([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),i={};for(let s of a)i[s]=Q([...(r=t==null?void 0:t[s])!==null&&r!==void 0?r:[],...(n=e==null?void 0:e[s])!==null&&n!==void 0?n:[]]);return i},"mergeObjectsOfDecorators"),Ie=u((t,e)=>{var r,n,a,i;return{property:Fe((r=t==null?void 0:t.property)!==null&&r!==void 0?r:{},(n=e==null?void 0:e.property)!==null&&n!==void 0?n:{}),method:Fe((a=t==null?void 0:t.method)!==null&&a!==void 0?a:{},(i=e==null?void 0:e.method)!==null&&i!==void 0?i:{})}},"mergePropertyAndMethodDecorators"),Te=u((t,e)=>{var r,n,a,i,s,o;return{class:Q([...(r=t==null?void 0:t.class)!==null&&r!==void 0?r:[],...(n=e==null?void 0:e.class)!==null&&n!==void 0?n:[]]),static:Ie((a=t==null?void 0:t.static)!==null&&a!==void 0?a:{},(i=e==null?void 0:e.static)!==null&&i!==void 0?i:{}),instance:Ie((s=t==null?void 0:t.instance)!==null&&s!==void 0?s:{},(o=e==null?void 0:e.instance)!==null&&o!==void 0?o:{})}},"mergeDecorators"),G=new Map,Dt=u((...t)=>{var e;let r=new Set,n=new Set([...t]);for(;n.size>0;)for(let a of n){let i=I(a.prototype).map(l=>l.constructor),s=(e=It(a))!==null&&e!==void 0?e:[],o=[...i,...s].filter(l=>!r.has(l));for(let l of o)n.add(l);r.add(a),n.delete(a)}return[...r]},"findAllConstituentClasses"),Ot=u((...t)=>{let e=Dt(...t).map(r=>G.get(r)).filter(r=>!!r);return e.length==0?{}:e.length==1?e[0]:e.reduce((r,n)=>Te(r,n))},"deepDecoratorSearch");u((...t)=>{let e=t.map(r=>Ct(r));return e.length===0?{}:e.length===1?e[0]:e.reduce((r,n)=>Te(r,n))},"directDecoratorSearch");var Ct=u(t=>{let e=G.get(t);return e||(e={},G.set(t,e)),e},"getDecoratorsForClass");function De(...t){var e,r,n;let a=t.map(o=>o.prototype);function i(...o){for(let l of t)Me(this,new l(...o))}u(i,"MixedClass"),i.prototype=Pe(a,i),Object.setPrototypeOf(i,Pe(t,null,["prototype"]));let s=i;{let o=Ot(...t);for(let l of(e=o==null?void 0:o.class)!==null&&e!==void 0?e:[]){let g=l(s);g&&(s=g)}Oe((r=o==null?void 0:o.static)!==null&&r!==void 0?r:{},s),Oe((n=o==null?void 0:o.instance)!==null&&n!==void 0?n:{},s.prototype)}return Tt(s,t),s}u(De,"Mixin");var Oe=u((t,e)=>{let r=t.property,n=t.method;if(r)for(let a in r)for(let i of r[a])i(e,a);if(n)for(let a in n)for(let i of n[a])i(e,a,Object.getOwnPropertyDescriptor(e,a))},"applyPropAndMethodDecorators"),Ce=class{constructor(){p(this,"_eventEmitter")}_getEventEmitter(){return this.attached?this.manager:(this._eventEmitter||(this._eventEmitter=new _e),this._eventEmitter)}on(e,r){return this._getEventEmitter().on(e,r)}once(e,r){return this._getEventEmitter().once(e,r)}off(e,r){return this._getEventEmitter().off(e,r)}waitFor(e,r){return this._getEventEmitter().waitFor(e,r)}emit(e,r,n){return _(this,null,function*(){return yield this._getEventEmitter().emitAsync(e,r,n)})}};u(Ce,"EventEmitterMixin");var Lt=Ce;function w(t){return t&&typeof t=="function"}u(w,"t");function P(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}u(P,"o");var X,kt=(X=class extends Error{},u(X,"m"),X),$t=0;function Le(t,e={timeout:0}){let r=!1,n=!1,a=!1,i,s,o=0,l,g=++$t,c=u(function(){clearTimeout(o),r=!1,n=!1,a=!1,l=new Promise((f,d)=>{i=f,s=d})},"g");c();function h(f=0,d){return _(this,null,function*(){if(typeof t=="function"&&t()){r=!0;return}return(r||n)&&c(),f>0&&(o=setTimeout(()=>{r=!0;try{d instanceof Error?s(d):i(d)}catch(M){}},f)),a=!0,l})}return u(h,"o"),h.id=g,h.resolve=f=>{if(clearTimeout(o),!!a&&!(r||n)){if(typeof t=="function"&&t())if(t())i(f);else return;else i(f);r=!0}},h.reject=f=>{clearTimeout(o),a&&(r||n||(s(typeof f=="string"?new Error(f):f instanceof Error?f:new Error),n=!0))},h.destroy=()=>{clearTimeout(o),a&&s(new kt),r=!1,a=!1,n=!1,l=null},h.reset=c,h.isResolved=()=>r,h.isRejected=()=>n,h.isPending=()=>a,h}u(Le,"p");var ke=class{constructor(){p(this,"_patching")}_getPatchKey(e){return`voerkai18n_${this.id}_${e}_patched_messages`}clearPatchedMessages(e){if(this.storage){let r=e?[e]:this.languages.map(n=>n.name);for(let n of r)this.storage.remove(this._getPatchKey(n))}}_patch(e){return _(this,null,function*(){var r;this._patching=Le(),e||(e=this.activeLanguage),this._restorePatchedMessages(this.activeMessages,e);try{if(w(this.loader)){let n=yield this._loadMessagesFromLoader(e);P(n)&&(Object.assign(this._activeMessages,n),this._setPatchedMessages(n,e),this.emit("patched",{language:e,scope:this.id}))}}catch(n){this.logger.warn(`从远程加载语言补丁包<${e}>时出错: ${n.stack}(scope=${this.id})`)}finally{(r=this._patching)==null||r.resolve(),this._patching=void 0}})}_restorePatchedMessages(e,r){let n=this._getPatchedMessages(r);P(n)&&(Object.assign(e,n),this.emit("restore",{language:r,scope:this.id}),this.logger.debug(`成功恢复补丁语言包<${r}>(scope=${this.id})`))}_setPatchedMessages(e,r){if(!(!this.attached&&!this.storage))try{this.storage&&this.storage.set(this._getPatchKey(r),JSON.stringify(e))}catch(n){this.logger.error(`保存语言包补丁(${r})时出错: ${n.stack}(scope=${this.id})`)}}_getPatchedMessages(e){try{return this.storage&&this.options.cachePatch?this.storage.get(this._getPatchKey(e)):{}}catch(r){return this.logger.error(`读取语言包补丁(${e})时出错:${r.stack}(scope=${this.id})`),{}}}};u(ke,"PatchMessageMixin");var jt=ke,Bt=u((t,e,r)=>new Promise((n,a)=>{var i=u(l=>{try{o(r.next(l))}catch(g){a(g)}},"f"),s=u(l=>{try{o(r.throw(l))}catch(g){a(g)}},"d"),o=u(l=>l.done?n(l.value):Promise.resolve(l.value).then(i,s),"u");o((r=r.apply(t,e)).next())}),"j"),Z,Nt=(Z=class extends Error{},u(Z,"b"),Z),Vt=0;function $e(t,e={timeout:0}){let r=!1,n=!1,a=!1,i,s,o=0,l,g=++Vt,c=u(function(){clearTimeout(o),r=!1,n=!1,a=!1,l=new Promise((f,d)=>{i=f,s=d})},"m");c();function h(){return Bt(this,arguments,function*(f=e.timeout,d){if(typeof t=="function"&&t()){r=!0;return}return(r||n)&&c(),f>0&&(o=setTimeout(()=>{r=!0;try{d instanceof Error?s(d):i(d)}catch(M){}},f)),a=!0,l})}return u(h,"c"),h.id=g,h.resolve=f=>{if(clearTimeout(o),!!a&&!(r||n)){if(typeof t=="function"&&t())if(t())i(f);else return;else i(f);r=!0}},h.reject=f=>{clearTimeout(o),a&&(r||n||(s(typeof f=="string"?new Error(f):f instanceof Error?f:new Error),n=!0))},h.destroy=()=>{clearTimeout(o),a&&s(new Nt),r=!1,a=!1,n=!1,l=null},h.reset=c,h.isResolved=()=>r,h.isRejected=()=>n,h.isPending=()=>a,h}u($e,"R");var je=class extends Error{};u(je,"VoerkaI18nError");var k=je,Rt=class extends k{};u(Rt,"VoerkaI18nInvalidLanguageError");var zt=class extends k{};u(zt,"VoerkaI18nOnlyOneAppScopeError");var Ut=class extends k{};u(Ut,"VoerkaI18nChangeLanguageError");var Be=class extends k{};u(Be,"VoerkaI18nLoadLanguageError");var Ne=Be,Ve=class{constructor(){p(this,"_refreshSignal")}refresh(e,r){return _(this,null,function*(){this._refreshSignal||(this._refreshSignal=$e()),e||(e=this.activeLanguage);let n=e,a,{patch:i,fallback:s}=Object.assign({fallback:!1,patch:!0},r);try{a=yield this._loadLanguageMessages(e),this._activeMessages=a,a&&!a.$remote&&i&&(yield this._patch(e))}catch(o){if(o&&o instanceof k){let l=this.getFallbackLanguage(e);l&&l!==e&&(n=yield this.refresh(l,{patch:i,fallback:!0}))}}finally{s||(this._activeLanguage=n,(typeof this.messages[n]=="function"||!(n in this.messages))&&(this.messages[n]=this._activeMessages),this._activeParagraphs=this.paragraphs[n],this._refreshSignal.resolve(),this._refreshSignal=void 0,yield this.emit("scope/change",n,!0))}return this._setLanguageAttr(),n})}_loadLanguageMessages(e){return _(this,null,function*(){this.logger.debug(`准备加载语言包:${e}`);let r=this.messages[e],n;if(P(r))n=r;else if(w(r))try{n=yield Ee.call(this,r)}catch(a){this.logger.error(`加载异步语言包<${e}>失败:${a.message}`),n=void 0}if(!n&&w(this.loader))try{let a=yield this._loadMessagesFromLoader(e);P(a)?n=Object.assign({$remote:!0},this.messages[this.defaultLanguage],a):this.logger.error(`错误的语言包<${e}>数据:${a}`)}catch(a){throw new Ne(a.message)}if(!P(n))throw new Ne(e);return n})}_loadMessagesFromLoader(e){return _(this,null,function*(){if(w(this.loader))return yield this.loader.call(this,e,this)})}ready(){let e=typeof arguments[0]=="function"?arguments[0]:void 0,r=typeof arguments[0]=="number"?arguments[0]:arguments[1];if(typeof e=="function")this.manager.ready(e,r);else return new Promise(n=>{this.manager.ready(n,r)})}changing(e){return _(this,null,function*(){var r,n;!this._refreshSignal&&!this._patching||(yield Promise.all([(r=this._refreshSignal)==null?void 0:r.call(this,e),(n=this._patching)==null?void 0:n.call(this,e)]))})}};u(Ve,"ChangeLanguageMixin");var qt=Ve,Yt={warn:console.warn,error:console.error,info:console.info,debug:console.debug};function Re(t){let e,r=[],n=u((a,...i)=>{let s=i.join(" ");if(e){if(!e.debug)return;e.emit("log",{level:a,message:s})}else if(e=globalThis.VoerkaI18n,e&&e instanceof xe)if(e.debug){r.push([a,s]);let o=u((l,g)=>{t?t(l,g):Yt[l](g)},"log");e.on("log",({level:l,message:g})=>o(l,g)),r.forEach(([l,g])=>o(l,g))}else r.splice(0,r.length);else r.push([a,s])},"logOutput");return{warn:u((...a)=>n("warn",...a),"warn"),error:u((...a)=>n("error",...a),"error"),info:u((...a)=>n("info",...a),"info"),debug:u((...a)=>n("debug",...a),"debug")}}u(Re,"createLogger");var Wt=class extends Error{constructor(e){super(`Formatters of language<${e}> is not loaded,try to call load()`)}};u(Wt,"FormattersNotLoadedError");var ze=class{constructor(e){p(this,"_formatters",[]),p(this,"_scope"),this._scope=e,this._formatters=e==null?void 0:e.options.formatters,this._registerFormatters()}get scope(){return this._scope}get formatters(){return this._formatters}_registerFormatters(){this._formatters&&this._formatters.forEach(e=>{Array.isArray(e)?this.register.apply(this,e):this.register.apply(this,[e])})}_addFormatter(e){try{if(this.scope.interpolator.addFilter(e),e){let r=this.scope.manager.scope;r.id!==this.scope.id&&r.interpolator.addFilter(e)}}catch(r){this.scope.logger.error(`fail while register formatter<${e.name}>：${r.stack}`)}}register(e,r,n){let a=this.scope,i=e.next;e.next=function(s,o,l){let g=l.getConfig;return l.getConfig=()=>Object.assign({},n,r==null?void 0:r[a.activeLanguage],g(e.name)),i.call(this,s,o,l)},this._addFormatter(e)}};u(ze,"VoerkaI18nFormatterManager");var Ht=ze;function Ue(t){return t&&typeof t=="object"&&t.__VoerkaI18nManager__}u(Ue,"isI18nManger");var qe=class{getLanguage(e){let r=this.languages.findIndex(n=>n.name==e);if(r!==-1)return this.languages[r]}getFallbackLanguage(e){let r=this.getLanguage(e);return r&&r.fallback||this.options.fallback||this._defaultLanguage}hasLanguage(e){return this.languages.findIndex(r=>r.name==e)!=-1}};u(qe,"LanguageMixin");var Kt=qe,Ye=class{_getPluraMessage(e,r){try{return Array.isArray(e)?e.length>r?e[r]:e[e.length-1]:e}catch(n){return Array.isArray(e)?e[0]:e}}_getPluraValue(e){let r=null,n=[];if(P(e)){let a=e;for(let[i,s]of Object.entries(a)){if(w(s))try{a[i]=s()}catch(l){a[i]=s}let o=typeof a[i]=="number";(r==null&&o||i.startsWith("$")&&o)&&(r=a[i])}n=[a]}else Array.isArray(e)?n=e.map(a=>{try{a=w(a)?a():a,V(a)&&!r&&(r=parseInt(a))}catch(i){return String(a)}return a}):e!==void 0&&(r=V(e)?parseInt(e):0,n=[e]);return[r,n]}_getTranslateComponent(){if(!this._translateComponent){let e=this.options.component||this.appScope.options.component;typeof e=="function"?this._translateComponent=e.call(this,this):(this._translateComponent=()=>{},this.logger.warn("No translate component builder configured"))}return this._translateComponent}_getTranslateTransformer(){if(!this._translateTransformer){let e=this.options.transform||this.appScope.options.transform;typeof e=="function"&&(this._translateTransformer=e.call(this,this))}return this._translateTransformer}_getActiveMessages(e){return typeof this.messages[e]=="function"?(this.logger.warn(`When the t function specifies the language <${e}> , only synchronized language packs can be used`),this.activeMessages):this.messages[e]}translate(e,r,n){if(typeof e!="string")return this.logger.debug(`failed to translate message:${e},it is not a string`),"";let a=(n==null?void 0:n.language)||this.activeLanguage,i=this._getActiveMessages(a);e=e.replace(/\n/g,"\\n");let s=e;if(typeof e!="string")return e;let o=r===void 0?[]:w(r)?r():r;try{if(R(e))s=i[e]||e;else{let c=this.idMap[e];s=i[c]||i[e]||e}let[l,g]=this._getPluraValue(o);Array.isArray(s)&&s.length>0&&(l!==null?s=this._getPluraMessage(s,l):s=s[0]),o.length,s=this.interpolator.replace(s,...g),this._translateTransformer&&(n!=null&&n.transform)&&(s=this._translateTransformer(s,g,n))}catch(l){this.logger.error(`翻译失败：${l.stack}`)}return s}};u(Ye,"TranslateMixin");var Jt=Ye,We=class{_getStorage(){let e=this.storage;return we(e)?e:void 0}_getStorageKey(){return this.options.storageKey.replace("{scope}",this.id)}restoreLanguage(){let e=this._getStorage();if(e){let r=this._getStorageKey(),n=e.get(r);if(!n||!this.hasLanguage(n))return;this._activeLanguage=n,this.logger.debug(`从存储<${r}>中恢复保存的语言：${n}`)}}saveLanguage(){let e=this._getStorage();if(e){if(!this._activeLanguage)return;let r=this._getStorageKey();e.set(r,this.activeLanguage),this.logger.debug(`当前语言已保存到存储${r}=${this.activeLanguage}`)}}clearLanguage(){let e=this._getStorage();e&&e.remove(this._getStorageKey())}};u(We,"RestoreMixin");var Qt=We,Gt=Object.defineProperty,He=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable,Ke=u((t,e,r)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"R"),Je=u((t,e)=>{for(var r in e||(e={}))Xt.call(e,r)&&Ke(t,r,e[r]);if(He)for(var r of He(e))Zt.call(e,r)&&Ke(t,r,e[r]);return t},"b"),T=(t=>typeof v<"u"?v:typeof Proxy<"u"?new Proxy(t,{get:u((e,r)=>(typeof v<"u"?v:e)[r],"get")}):t)(function(t){if(typeof v<"u")return v.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),A={Abort:Symbol("Abort"),Throw:Symbol("Throw"),Ignore:Symbol("Ignore")},ee,D=(ee=class extends Error{constructor(t){super(),this.value=t}},u(ee,"a"),ee),te,F=(te=class extends D{},u(te,"p"),te),re,U=(re=class extends D{},u(re,"x"),re),ne,ae=(ne=class extends D{},u(ne,"g"),ne),er={name:"error",priority:"before",args:["operate","value"],default:{operate:"ignore"},next(t,e,r){let n=e.operate.toLowerCase(),a=e.value;return r.onError=(i,s,o,l)=>{if(!(i instanceof Error)||i instanceof D)throw i;if(n=="throw")throw a?new Error(a):i;if(n=="abort")throw new F(a);if(n=="ignore")throw new U(a);return s},t}},tr={name:"empty",priority:"before",args:["operate","value"],default:{operate:"abort",value:""},next(t,e,r){let n=e.operate.toLowerCase(),a=e.value;return r.onEmpty=()=>{if(n=="throw")throw new ae;if(n=="abort")throw new F(a);if(n=="ignore")throw new U;return n},t}};function $(t,...e){if(e.length===0)return t;let r=e.map((n,a)=>{let i=Object.entries(n||{});return i.some(([s,o])=>o===void 0)?i.reduce((s,[o,l])=>(l!==void 0&&(s[o]=l),s),{}):n});return Object.assign(t,...r)}u($,"F"),(t=>typeof T<"u"?T:typeof Proxy<"u"?new Proxy(t,{get:u((e,r)=>(typeof T<"u"?T:e)[r],"get")}):t)(function(t){if(typeof T<"u")return T.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function ie(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}u(ie,"y");function Qe(t){return t&&typeof t=="function"}u(Qe,"v");function se(t,e,r){if(typeof e=="string"){let n=0,a;for(;(a=t.indexOf(e,n))>-1;){let i=typeof r=="function"?r(e):r,s=t.length;t=t.substring(0,a)+i+t.substring(a+e.length),n=a+i.length+t.length-s}}else{let n;if(!e.global||!e.multiline)throw new Error("The search parameter must be enabled '/gm' option");for(;(n=e.exec(t))!==null;){n.index===e.lastIndex&&e.lastIndex++;let a=t.length,i=n[0].length,s=typeof r=="function"?r(n[0],...n):r;t=t.substring(0,n.index)+s+t.substring(n.index+i),e.lastIndex+=t.length-a}}return t}u(se,"w"),String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return se(this,t,e)});function j(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}u(j,"m");function Ge(t,e=!1){if(typeof t=="number")return!0;if(typeof t!="string"||e)return!1;try{if(t.includes(".")){let r=parseFloat(t);return t.endsWith(".")?!isNaN(r)&&String(r).length===t.length-1:!isNaN(r)&&String(r).length===t.length}else{let r=parseInt(t);return!isNaN(r)&&String(r).length===t.length}}catch(r){return!1}}u(Ge,"C");var rr=/\n/gm,nr=/(["'])(.*?)(\1)/gm,ar=/([\s\[\,\{])(\w+)(\s*\:)/gm;function Xe(t,e){try{return JSON.parse(t,(n,a)=>e?e(n,a):a)}catch(n){}let r=t.replace(rr,(n,a,i)=>{let s=i.slice(0,a).trim(),o=i.slice(a+1).trim();return!/,$/.test(s)&&!/[\[\{\}]$/.test(s)&&!/^\}/.test(o)?`,
`:`
`});return r=r.replaceAll(nr,(n,a,i)=>`"${encodeURI(i)}"`),r=r.replaceAll(ar,(n,a,i,s)=>`${a}"${i}"${s}`),r=r.replaceAll("，",",").replaceAll("“",'"').replaceAll("”",'"'),JSON.parse(r,(n,a)=>(typeof a=="string"&&(a=decodeURI(a)),a))}u(Xe,"V");function Ze(t,e="{",r="}"){let n=0,a=0;for(;n<t.length;){let i=t.slice(n,n+e.length),s=t.slice(n,n+r.length);if(i==e){a++,t=t.substring(0,n+e.length)+`${a}%`+t.substring(n+e.length),n+=e.length+String(a).length+1;continue}if(s==r){a>0&&(t=t.substring(0,n)+`%${a}`+t.substring(n)),n+=r.length+String(a).length+1,a--;continue}n++}return t}u(Ze,"J");function et(t,...e){return e.length==0&&(e.push(["{","}"]),e.push(["[","]"])),e.forEach(r=>{t.includes(r[0])&&t.includes(r[1])&&(t=Ze(t,...r))}),t}u(et,"H");function tt(t,e,r){return[[e,new RegExp(j(e)+"\\d+%")],[r,new RegExp("%\\d+"+j(r))]].forEach(([n,a])=>{let i;for(;(i=a.exec(t))!==null;)i.index===a.lastIndex&&a.lastIndex++,t=t.replace(a,n)}),t}u(tt,"G");function q(t,...e){return e.length==0&&(e.push(["{","}"]),e.push(["[","]"])),e.forEach(([r,n])=>{t.includes(r)&&t.includes(n)&&(t=tt(t,r,n))}),t}u(q,"E");function rt(t){return t?t.trim().substring(1).trim().split("|").map(e=>e.trim()).map(e=>{if(e=="")return null;let r=e.indexOf("("),n=e.lastIndexOf(")");if(r!==-1&&n!==-1){let a=e.substring(r+1,n).trim(),i=at(a);return[e.substring(0,r),i]}else return[e,[]]}).filter(e=>Array.isArray(e)):[]}u(rt,"M");function nt(...t){t.length==0&&(t.push(["{","}"]),t.push(["[","]"]));let e=t.map(([r,n])=>`(${j(r)}1%.*?%1${j(n)})`);return ir.replace("__TAG_REGEXP__",e.length>0?e.join("|")+"|":"")}u(nt,"z");var ir=String.raw`((([\'\"])(.*?)\3))|__TAG_REGEXP__([\d]+\.?[\d]?)|((true|false|null)(?=[,\b\s]))|([\w\.]+)|((?<=,)\s*(?=,))(?<=\s*[,\)]?\s*)`;function at(t){let e=[],r;t=et(t);try{let n=new RegExp(nt(),"g");for(;(r=n.exec(t))!==null;){r.index===n.lastIndex&&n.lastIndex++;let a=r[0];if(a.trim()=="")a=void 0;else if(a.startsWith("'")&&a.endsWith("'")||a.startsWith('"')&&a.endsWith('"'))a=a.substring(1,a.length-1),a=q(a);else if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))try{a=q(a),a=Xe(a)}catch(i){}else["true","false","null"].includes(a)?a=JSON.parse(a):Ge(a)?a=parseFloat(a):a=q(String(a));e.push(a)}}catch(n){}return e}u(at,"U");var sr=new RegExp("(?<!\\\\)\\{([\\S]+\\s)?\\s*(\\w+)?((\\s*\\|\\s*\\w*(\\(.*?\\)){0,1}\\s*)*)\\s*(\\s[\\S]+)?\\}","gm");function oe(t,e,r={}){let n=t,a,i=Object.assign({replaceAll:!0},r),s=sr;for(s.lastIndex=0;(a=s.exec(n))!==null;){a.index===s.lastIndex&&s.lastIndex++;let o=a[2]||"",l=(a[1]||"").trim(),g=(a[6]||"").trim(),c=n.length,h=rt(a[3]||"");if(Qe(e)){let f=e(o,l,g,h,a[0]);i.replaceAll?n=se(n,a[0],f):n=n.replace(a[0],f),s.lastIndex+=n.length-c}}return n}u(oe,"O");function ue(t,e){let r=e.value;if(t.length>0){let n=lt.call(this,t,e);for(let a of n)try{r=a.call(this,r)}catch(i){if(i instanceof ae)throw i;if(i instanceof D){if(i.value!=null&&(r=i.value),i instanceof F)break}else throw i}}return this.options.isEmpty(r)||(r=`${e.prefix}${r}${e.suffix}`),r}u(ue,"I");function it(t,e,r,n){if(!this.options.isEmpty(t))return t;let a=n.onEmpty||r.onEmpty||this.options.onEmpty;if(typeof a!="function")return t;let i=a.call(this,t,e,n);throw i instanceof Error?i:i==A.Abort?new F:i==A.Ignore?new U:i==A.Throw?new ae:new F(i)}u(it,"K");function st(t,e,r,n,a){let i=a.onError||n.onError||this.options.onError;if(typeof i!="function")return e;let s=i.call(this,t,e,r,a);throw s instanceof Error?s:s==A.Abort?new F:s==A.Ignore?new U:s==A.Throw?t:new F(s)}u(st,"Q");function ot(t,e,r){var n;let a=Object.assign({},typeof t.default=="function"?t.default():t.default);return e.length==1&&ie(e[0])?$(a,e[0]):t.args&&((n=t.args)==null?void 0:n.length)>0&&t.args.forEach((i,s)=>{e[s]!==void 0&&(a[i]=e[s])}),i=>{let s;try{r.args=e,s=t.next.call(this,i,a,r),s=it.call(this,s,a,t,r)}catch(o){if(o.filter=t.name,o instanceof D)throw o;return this.log(`当执行过滤器器<${r.match}:${t.name}>时出错:${o.stack}`),st.call(this,o,i,a,t,r)}return String(s)}}u(ot,"Y");function ut(t){let e=[],r=t.map(([n,a])=>[this.getFilter.call(this,n),a]).filter(([n])=>n!=null);return r=r.reduce((n,[a,i])=>(a&&(a.priority=="before"?n.unshift([a,i]):a.priority=="after"?e.push([a,i]):n.push([a,i])),n),[]),r.concat(e)}u(ut,"Z");function lt(t,e){let r=ut.call(this,t),n=[];for(let[a,i]of r)n.push(ot.call(this,a,i,e));return n}u(lt,"ee");var le,or=(le=class{constructor(t){this.options=$({log:console.log,filters:{},missing:"default",filterContext:{}},t),this.addDefaultHandlers(),this.addBuildinFilters(),this.normalizeFilters()}get filters(){return this.options.filters}addDefaultHandlers(){this.options.onError=()=>A.Ignore,this.options.onEmpty=()=>"",this.options.isEmpty=t=>t===null||t===""}addFilter(t){if(!t.name)throw new Error("Filter name cannot be empty");if(typeof t.next!="function")throw new Error("The filter must provide a next function");return t=$({priority:"normal"},t),this.filters[t.name]=t}removeFilter(t){delete this.filters[t]}getFilter(t){var e;if(t in this.options.filters)return this.options.filters[t];{let r=(e=this.options.getFilter)==null?void 0:e.call(this,t);return typeof r=="function"?{name:t,next:r}:t in String.prototype?{name:t,next:u((n,a,i)=>n[t](...i.args),"next")}:r}}addBuildinFilters(){this.addFilter(er),this.addFilter(tr)}normalizeFilters(){Object.entries(this.options.filters).forEach(([t,e])=>{let r=$({name:t,priority:"normal",args:null,next:u(n=>n,"next")},typeof e=="function"?{filter:e}:e);this.options.filters[t]=r})}getMissingValue(t,e){let r=this.options.missing;if(r=="default")return"";if(r=="ignore")return e;if(typeof r=="function")return r.call(this,t)}replace(t,...e){if(e.length===0)return t;if(e.length===1&&typeof e[0]=="function"&&(e[0]=e[0].call(this)),e.length===1&&ie(e[0])){let r=e[0];return oe.call(this,t,(n,a,i,s,o)=>{let l=n in r?r[n]:this.getMissingValue(n,o);return typeof l=="function"&&(l=l.call(this)),ue.call(this,s,Je({name:n,value:l,prefix:a,suffix:i,template:t,match:o,args:[]},this.options.filterContext))})}else{let r=e.length===1&&Array.isArray(e[0])?[...e[0]]:e,n=0;return oe.call(this,t,(a,i,s,o,l)=>{let g=r.length>n?r[n++]:this.getMissingValue(n,l);return typeof g=="function"&&(g=g.call(this)),ue.call(this,o,Je({name:a,value:g,prefix:i,suffix:s,template:t,match:l,args:[]},this.options.filterContext))},{replaceAll:!1})}}log(t,...e){this.options.debug&&this.options.log(t,...e)}},u(le,"$"),le);function gt(t,e,r){let{defaultValue:n,delimiter:a,matched:i}=Object.assign({delimiter:"."},r);if(!t||typeof e!="string")return n;if(!e)return t;let s=e.split(a),o=t,l,g;try{for(let c of s)if(o instanceof Map||o instanceof WeakMap){if(!o.has(c))return n;l=o,g=c,o=o.get(c)}else if(o instanceof Set){let h=parseInt(c,10);if(h>=o.size)return n;l=o,g=h,o=[...o][h]}else if(o&&typeof o=="object"&&c in o)l=o,g=Array.isArray(o)?parseInt(c):c,o=o[c];else return n}catch(c){return n}return typeof i=="function"&&i({value:o,parent:l,indexOrKey:g}),o}u(gt,"u");var ct=class{constructor(){p(this,"_flexVars")}_initInterpolators(){this._flexVars=new or({filterContext:{getConfig:u(e=>{let r=this.activeMessages.$config||{};return e?gt(r,e):r},"getConfig"),scope:this}})}};u(ct,"InterpolatorMixin");var ur=ct;function ht(t,...e){if(e.length===0)return t;let r=e.map((n,a)=>{let i=Object.entries(n||{});return i.some(([s,o])=>o===void 0)?i.reduce((s,[o,l])=>(l!==void 0&&(s[o]=l),s),{}):n});return Object.assign(t,...r)}u(ht,"u");var ge=class xt extends De(Lt,jt,qt,Kt,Jt,ur,Qt){constructor(e){super(),p(this,"__VoerkaI18nScope__",!0),p(this,"_options"),p(this,"_manager"),p(this,"_formatterManager",null),p(this,"_logger"),p(this,"_defaultLanguage","zh-CN"),p(this,"_activeLanguage","zh-CN"),p(this,"_activeMessages",{}),p(this,"_patchedMessages",{}),p(this,"_translateComponent"),p(this,"_translateTransformer"),p(this,"_activeParagraphs",{}),p(this,"$id",++xt.idSeq),this._options=ht({id:ve(),library:!1,debug:!1,injectLangAttr:!0,languages:[],messages:{},paragraphs:{},idMap:{},formatters:[],attached:!0,storageKey:"language",cachePatch:!0},e),this._init()}get id(){return this._options.id}get options(){return this._options}get attached(){return this._options.attached}get debug(){return this._options.debug}get library(){return this._options.library}get formatters(){return this._formatterManager}get defaultLanguage(){return this._defaultLanguage}get defaultMessages(){return this.messages[this.defaultLanguage]}get messages(){return this._options.messages}get paragraphs(){return this._options.paragraphs}get idMap(){return this._options.idMap}get languages(){return this._options.languages}get manager(){return this._manager}get appScope(){return this._manager.scope}get interpolator(){return this._flexVars}get logger(){return this._logger}get t(){return this.translate.bind(this)}get Translate(){return this._getTranslateComponent()}get activeMessages(){return this._activeMessages}get activeParagraphs(){return this._activeParagraphs}get activeLanguage(){return this._activeLanguage}get storage(){return this.getScopeOption("storage")}get loader(){return this.getScopeOption("loader")}get $t(){return(e,r,n)=>(this._getTranslateTransformer(),n||(n={}),n.transform=!0,this.translate(e,r,n))}getScopeOption(e){let r=this._options;return this.attached?r[e]||(this.library?this._manager[e]:void 0):r[e]}_initOptions(){if(!Array.isArray(this.languages))this.logger.warn("[VoerkaI18n] invalid language settings, will use default language settings."),this._options.languages=Object.assign([],Pt);else if(this.languages.length==0)throw new Error("[VoerkaI18n] must provide valid language settings.");let e,r;this.languages.forEach(a=>{a.default&&(r=a.name),a.active&&(e=a.name)});let n=this._options.messages;if(r in n||(r=Object.keys(n)[0]),e in n||(e=r),!(r in n))throw new Error("[VoerkaI18n] invalid language configuration, must provide valid default and active languages.");if(this._activeLanguage=e,this._defaultLanguage=r,!this._options.library&&!this._options.storage&&(this._options.storage=Mt),w(this.messages[this._defaultLanguage]))throw new Error("[VoerkaI18n] default language pack must be static content, can't use async load way.");this._activeMessages=this.messages[this._activeLanguage],this._activeParagraphs=this.paragraphs[this._activeLanguage]}_init(){this._logger=Re(this._options.log),this._initOptions(),this.library||this.restoreLanguage(),this._initInterpolators(),this.registerToManager(),this._formatterManager=new Ht(this)}bind(e){this._manager=e,this._manager.once("init",this._initRefresh.bind(this))}_initRefresh(e){if(this.library)this.refresh(e&&e());else{let r=[];(this._defaultLanguage!==this._activeLanguage||w(this.activeMessages))&&r.push(this.refresh(void 0,{patch:!1})),r.push(this._patch()),Promise.all(r).then(()=>{this.emit("ready",this.activeLanguage,!0),this._setLanguageAttr()})}}registerToManager(){if(!this.attached)return;let e=!this.options.library;e&&(globalThis.VoerkaI18n&&globalThis.VoerkaI18n.scope&&K()&&console.warn("Only can have one i18nScope with library=false"),this._manager=new xe(this));let r=globalThis.VoerkaI18n;r&&Ue(r)?e?this._initRefresh():r.register(this):(globalThis.__VoerkaI18nScopes__||(globalThis.__VoerkaI18nScopes__=[]),globalThis.__VoerkaI18nScopes__.push(this))}change(e){return _(this,null,function*(){let r=this.activeLanguage;return this.attached?r=yield this._manager.change(e):r=yield this.refresh(e),r})}_setLanguageAttr(){if(!(this.library||!K()))try{let e=this._options.injectLangAttr;if(!e)return;let r=e===!0?document.body:document.body.querySelector(e);r&&r.setAttribute("lang",this.activeLanguage)}catch(e){}}getRawMessage(e){if(R(e)){if(e in this.defaultMessages)return this.defaultMessages[e]}else return e}getMessageId(e){if(R(e))return e;if(e in this.idMap)return this.idMap[e]}};u(ge,"VoerkaI18nScope"),p(ge,"idSeq",0);var lr=ge;function gr(t,e,r){return n=>{let a=t.next;return t.next=function(i,s,o){let l=o.getConfig;return o.getConfig=()=>Object.assign({},r,e==null?void 0:e[n.activeLanguage],l(t.name)),a.call(this,i,s,o)},t}}u(gr,"createFormatter");function cr(t){let e=globalThis.VoerkaI18n;e?e.registerPlugin(t):(globalThis.__VoerkaI18nPlugins__||(globalThis.__VoerkaI18nPlugins__=[]),globalThis.__VoerkaI18nPlugins__.push(t))}u(cr,"definePlugin");const hr={get(t){if(globalThis.localStorage)return globalThis.localStorage.getItem(t)},set(t,e){globalThis.localStorage&&globalThis.localStorage.setItem(t,e)},remove(t){globalThis.localStorage&&globalThis.localStorage.removeItem(t)}};var fr=Object.defineProperty,y=(t,e)=>fr(t,"name",{value:e,configurable:!0}),O=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function ft(t,e=!1){if(typeof t=="number")return!0;if(typeof t!="string"||e)return!1;try{if(t.includes(".")){let r=parseFloat(t);return t.endsWith(".")?!isNaN(r)&&String(r).length===t.length-1:!isNaN(r)&&String(r).length===t.length}else{let r=parseInt(t);return!isNaN(r)&&String(r).length===t.length}}catch(r){return!1}}y(ft,"r"),(t=>typeof O<"u"?O:typeof Proxy<"u"?new Proxy(t,{get:y((e,r)=>(typeof O<"u"?O:e)[r],"get")}):t)(function(t){if(typeof O<"u")return O.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function pt(t,e=3){let r=new RegExp(String.raw`(?!^)(?=(\d{${e}})+$)`,"g"),n=t.replace(r,",");return n.startsWith(",")&&(n=n.substring(1)),n.endsWith(",")&&(n=n.substring(0,n.length-2)),n}y(pt,"addSplitChars");function ce(t,e){let{symbol:r="",division:n=3,prefix:a="",precision:i=-1,suffix:s="",unit:o=0,radix:l=3,units:g=[],format:c="{symbol}{value}{unit}"}=e,[h,f]=String(t).split(".");o>0&&l>0&&(h.length<l*o&&(h=Array.from({length:l*o-h.length+1}).fill(0).join("")+h),f=h.substring(Number(h),h.length-l*o)+f,h=h.substring(0,h.length-l*o),h==""&&(h="0"));let d=[];d.push(pt(h,n)),f&&ft(i)&&i!=0&&(i==0||(i==-1?d.push(`.${f}`):i>0&&(i<0?f=String(parseFloat(`0.${f}`)):f=String(parseFloat(`0.${f}`).toFixed(i)).split(".")[1],d.push(`.${f}`))));const M=g[o]||"";return c.replace("{value}",d.join("")).replace("{symbol}",r).replace("{prefix}",a).replace("{suffix}",s).replace("{unit}",M)}y(ce,"toCurrency");var pr=[{name:"currency",args:["format","unit","precision","prefix","suffix","division","symbol","radix"],next(t,e,r){const n=r.getConfig(),a=Object.assign({},n,e);return a.format in a&&(a.format=a[a.format]),a.unit=parseInt(String(a.unit))||0,a.unit>a.units.length-1&&(a.unit=a.units.length-1),a.unit<0&&(a.unit=0),a.unit>0&&a.precision==2&&(a.precision=-1),ce(t,a)}},{"en-US":{units:[""," thousands"," millions"," billions"," trillions"],radix:3,symbol:"$",prefix:"USD",suffix:"",division:3,precision:2},"zh-CN":{units:["","万","亿","万亿","万万亿"],radix:4,symbol:"￥",prefix:"RMB",suffix:"元",division:4,precision:2}},{default:"{symbol}{value}{unit}",long:"{prefix} {symbol}{value}{unit}{suffix}",short:"{symbol}{value}{unit}",custom:"{prefix} {symbol}{value}{unit}{suffix}",format:"default"}],dr=[{name:"number",args:["precision","division"],next(t,e,r){const n=r.getConfig();return ce(t,Object.assign({},n,e))}},{"en-US":{division:3},"zh-CN":{division:4}}];function x(t){return t instanceof Date?t:new Date(t)}y(x,"toDate");var mr=[{name:"timeSlots",args:["upper"],default:{upper:!0},next(t,e,r){const n=r.getConfig(),a=x(t).getHours(),i=!!e.upper;let s=n.slots.findIndex(o=>a<o);return s===-1&&(s=n.upperCases.length-1),i?n.upperCases[s]:n.lowerCases[s]}},{"en-US":{slots:[12],lowerCases:["am","pm"],upperCases:["AM","PM"]},"zh-CN":{slots:[5,8,11,13,18],lowerCases:["凌晨","早上","上午","中午","下午","晚上"],upperCases:["凌晨","早上","上午","中午","下午","晚上"]}}];function he(t,...e){if(e.length===0)return t;let r=e.map((n,a)=>{let i=Object.entries(n||{});return i.some(([s,o])=>o===void 0)?i.reduce((s,[o,l])=>(l!==void 0&&(s[o]=l),s),{}):n});return Object.assign(t,...r)}y(he,"u");var Y={en:{month:{long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},weekday:{long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tues","Wed","Thur","Fri","Sat"]}},cn:{month:{long:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},weekday:{long:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],short:["周日","周一","周二","周三","周四","周五","周六"]}}},dt={en:{slots:[12],names:["AM","PM"]},cn:{slots:[6,9,11,13,18],names:["凌晨","早上","上午","中午","下午","晚上"]}},yr="YYYY-MM-DD HH:mm:ss";function fe(t){t<0&&t>23&&(t=0);let e=[0,...dt[this.language].slots,24].findIndex(r=>r>t)-1;return dt[this.language].names[e]}y(fe,"h");function pe(t,e,r){let n=he({language:"cn"},r),a=t instanceof Date?t:new Date(t||Date.now()),i=a.getHours(),s=String(i).padStart(2,"0"),o=i>12?i-12:i,l=String(o).padStart(2,"0"),g=String(a.getMinutes()),c=String(a.getSeconds()),h=String(a.getMilliseconds()),f=String(a.getFullYear()),d=a.getMonth(),M=a.getDay(),bt=String(a.getDate()),Vr=[["HH",s],["H",i],["hh",l],["h",o],["mm",g.padStart(2,"0")],["m",g],["ss",c.padStart(2,"0")],["s",c],["SSS",h.padStart(3,"0")],["A",i>12?"PM":"AM"],["a",i>12?"pm":"am"],["t",fe.call(n,i)],["T",fe.call(n,i)],["YYYY",f],["yyyy",f],["YY",f.substring(2)],["MMM",Y[n.language].month.short[d]],["MM",String(d+1).padStart(2,"0")],["M",d+1],["DD",bt.padStart(2,"0")],["D",bt],["d",M],["dd",Y[n.language].weekday.short[M]],["ddd",Y[n.language].weekday.short[M]],["dddd",Y[n.language].weekday.long[M]]],me=e||yr;return Vr.forEach(([Rr,zr])=>me=me.replaceAll(Rr,zr)),me}y(pe,"H");function mt(t,e,r){if(typeof e=="string"){let n=0,a;for(;(a=t.indexOf(e,n))>-1;){let i=typeof r=="function"?r(e):r,s=t.length;t=t.substring(0,a)+i+t.substring(a+e.length),n=a+i.length+t.length-s}}else{let n;if(!e.global||!e.multiline)throw new Error("The search parameter must be enabled '/gm' option");for(;(n=e.exec(t))!==null;){n.index===e.lastIndex&&e.lastIndex++;let a=t.length,i=n[0].length,s=typeof r=="function"?r(n[0],...n):r;t=t.substring(0,n.index)+s+t.substring(n.index+i),e.lastIndex+=t.length-a}}return t}y(mt,"s"),String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return mt(this,t,e)});var yt={local:y(t=>t.toLocaleString(),"local"),iso:y(t=>t.toISOString(),"iso"),utc:y(t=>t.toUTCString(),"utc"),gmt:y(t=>t.toGMTString(),"gmt")},_r=[{global:!0,name:"date",args:["format"],next(t,e,r){const n=r.getConfig(),a=x(t);let i=e.format||n.format;if(i in yt)return yt[i](a);if(i in n&&(i=n[i],typeof i=="function"))return i(a);if(typeof i=="string")return pe(a,i)}},{"en-US":{long:"YYYY/MM/DD HH:mm:ss",short:"YYYY/MM/DD"},"zh-CN":{long:"YYYY年M月D日 HH点mm分ss秒",short:"YYYY年M月D日"}},{format:"local"}],_t={local:y(t=>t.toLocaleTimeString(),"local"),timestamp:y(t=>t.getTime(),"timestamp")},vr=[{name:"time",args:["format"],next(t,e,r){const n=r.getConfig(),a=x(t);let i=e.format||n.format;if(i in _t)return _t[i](a);if(i in n&&(i=n[i],typeof i=="function"))return i(a);if(typeof i=="string")return pe(a,i)}},{"en-US":{long:"HH:mm:ss"},"zh-CN":{long:"HH点mm分ss秒"}},{format:"local",short:"HH:mm:ss"}],br=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],Er=["周日","周一","周二","周三","周四","周五","周六"],wr=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],Sr=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],xr=[{name:"weekday",args:["format"],next(t,e,r){const n=r.getConfig(),a=x(t).getDay(),i=e.format||"long";if(typeof i=="string"&&i in n){const s=n[i];return typeof s=="function"?s(a):s[a]}return a}},{"en-US":{long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tues","Wed","Thur","Fri","Sat"]},"zh-CN":{long:br,short:Er}},{format:"long"}],Mr=[{name:"month",args:["format"],next(t,e,r){const n=r.getConfig(),a=x(t).getMonth()+1,i=e.format||n.format;if(typeof i=="string"&&i in n){const s=n[i];return typeof s=="function"?s(a):s[a-1]}return a}},{"en-US":{long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},"zh-CN":{long:wr,short:Sr}},{format:"long"}],Pr=[{name:"quarter",args:["format"],next(t,e,r){const n=r.getConfig(),a=x(t).getMonth()+1,i=Math.floor(a%3==0?a/3:a/3+1)-1,s=e.format||n.format;if(typeof s=="string"&&s in n){const o=n[s];return typeof o=="function"?o(i):o[i]}return i}},{"en-US":{long:["First Quarter","Second Quarter","Third Quarter","Fourth Quarter"]},"zh-CN":{long:["一季度","二季度","三季度","四季度"]}},{format:"short",short:["Q1","Q2","Q3","Q4"]}],B=[1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6,Number.MAX_SAFE_INTEGER];function vt(t,e,r){let{units:n,now:a,before:i,after:s}=he({units:["秒","分钟","小时","天","周","个月","年"],now:"刚刚",before:"{value}{unit}前",after:"{value}{unit}后"},r),o=typeof t=="number"?new Date(t).getTime():t.getTime(),l=(e instanceof Date?e:typeof e=="number"?new Date(e):new Date).getTime(),g=o-l,c=B.findIndex(h=>Math.abs(g)<h)-1;if(c<0&&(c=0),c>B.length-1&&(c=B.length-1),g<1e3&&g>-1e3)return a;if(g<=-1e3){let h=parseInt(String(Math.abs(g)/B[c]));return i.replace("{value}",h).replace("{unit}",n[c])}else{let h=parseInt(String(Math.abs(g)/B[c]));return s.replace("{value}",h).replace("{unit}",n[c])}}y(vt,"b");var Ar=[{name:"relativeTime",args:["base"],default:y(()=>({base:new Date}),"default"),next(t,e,r){const n=r.getConfig(),a=e.base||new Date;return vt(x(t),a,n)}},{"en-US":{units:["seconds","minutes","hours","days","weeks","months","years"],now:"Just now",before:"{value} {unit} ago",after:"after {value} {unit}"},"zh-CN":{units:["秒","分钟","小时","天","周","个月","年"],now:"刚刚",before:"{value}{unit}前",after:"{value}{unit}后"}}],Fr=[pr,dr,mr,_r,vr,xr,Mr,Pr,Ar];const Ir=(t,e)=>_(this,null,function*(){return yield(yield fetch(MxPluginContext.getLoaderLanguageUrl(t,e))).json()}),Tr={"zh-CN":{},"en-US":{},"ko-KR":{}},Dr={登录:6,未登录:7,会员:8,非会员:9},Or=void 0,Cr=void 0,Lr={languages:[{name:"zh-CN",title:"中文",active:!0,default:!0},{name:"en-US",title:"英语"},{name:"ko-KR",title:"韩语"},{name:"zh-TW",title:"繁体中文"}],library:!0,debug:!1},kr={"zh-CN":{6:"登录",7:"未登录",8:"会员",9:"非会员"},"en-US":()=>C(()=>Promise.resolve().then(()=>jr),void 0),"ko-KR":()=>C(()=>Promise.resolve().then(()=>Br),void 0),"zh-TW":()=>C(()=>Promise.resolve().then(()=>Nr),void 0)},de=new lr(St({id:"create-login-plugin__1_0_0",idMap:Dr,formatters:Fr,storage:hr,messages:kr,paragraphs:Tr,component:Or,loader:Ir,transform:Cr},Lr)),N=de.t;de.$t,de.Translate;const $r=document.getElementsByClassName("mx-title")[0];if(window.MxElectronAPI){const{addCommand:t}=MxPluginContext;MxPluginContext.getUiConfig().then(e=>{t("MxPayVIP",()=>{var g,c;(c=(g=window.MxElectronAPI)==null?void 0:g.loginPlugin)==null||c.purchaseVIP()});const r={icon:"class:iconfont denglu",cmd:"MxLogin",prompt:N("登录"),openPromptDelay:0};e.headerTopBarCustomRightBtns||(e.headerTopBarCustomRightBtns=[]),e.headerTopBarCustomRightBtns.some(({cmd:g})=>g===r.cmd)||e.headerTopBarCustomRightBtns.push(r),t("MxLogin",()=>{!a||a.username===""&&a.vip===0?window.MxElectronAPI.loginPlugin.login():window.MxElectronAPI.loginPlugin.logout()});const n=document.createElement("span");$r.appendChild(n);let a;const i=()=>`<${a&&a.username&&a.username!=="游客"?a.username:N("未登录")}${a&&a.vip===1?","+N("会员"):a&&a.vip===0&&a.username!==""?","+N("非会员"):""}>`,s=()=>{const g=e.headerTopBarCustomRightBtns.findIndex(c=>c.cmd===r.cmd);if(e.headerTopBarCustomRightBtns[g]){const c=i();c!==e.headerTopBarCustomRightBtns[g].prompt&&(e.headerTopBarCustomRightBtns[g].prompt=c)}},o=()=>{const g=e.headerTopBarCustomRightBtns.findIndex(c=>c.cmd===r.cmd);if(e.headerTopBarCustomRightBtns[g]){const c=N("登录");e.headerTopBarCustomRightBtns[g].prompt!==c&&(e.headerTopBarCustomRightBtns[g].prompt=c)}},l=g=>_(this,null,function*(){g||(g=yield window.MxElectronAPI.loginPlugin.getUserInfo()),a=g;const{userInfo:c}=MxPluginContext.useUserInfo();c.value=a,g&&(g.vip===0&&g.username===""||!g?o():s())});window.MxElectronAPI.loginPlugin.onupdateUserInfo(l),l()})}const jr=Object.freeze(Object.defineProperty({__proto__:null,default:{6:"log on",7:"Not Logged In",8:"member",9:"Non member"}},Symbol.toStringTag,{value:"Module"})),Br=Object.freeze(Object.defineProperty({__proto__:null,default:{6:"로그인",7:"로그인하지 않음",8:"회원",9:"비회원"}},Symbol.toStringTag,{value:"Module"})),Nr=Object.freeze(Object.defineProperty({__proto__:null,default:{6:"登入",7:"未登錄",8:"會員",9:"非會員"}},Symbol.toStringTag,{value:"Module"}))})();
