import{cp as me,b0 as pe,a4 as ve,b1 as re,ah as fe,aw as m,ax as N,b as q,aG as c,au as R}from"./lib.DTykjivu.js";import{d as ce,h as E,k,v as O,D as v,aA as _e,c as P,o as w,H as l,w as t,m as p,t as u,p as s,az as ye,a as d,b as W,F as X,C as ge,n as ke,aw as D,R as we,_ as Ve}from"./framework.BMMljfWr.js";import"./commonjsHelpers.Cpj98o6Y.js";const be={class:"px-3 mt-2"},xe={class:"h-100"},Ce={class:"h-100"},Se={class:"w-50"},Fe={class:"w-50"},Be={class:"mr-1"},Ne={class:"ml-5"},De=ce({__name:"index",setup(Ue){const{isShow:_,showDialog:G}=me,U=pe(),{list:A,current:y,index:n,fontNames:h,fontStyles:T,isUpdate:Y,newStyleName:V}=ve(U),{setIndex:j,putCurrent:J,add:K,remove:Q,apply:L,init:$}=U;$();const Z=[{name:"应用",fun:()=>{L()},disabled:()=>!Y.value,primary:!0,labelProps:{"key-name":"A"}},{name:"关闭",fun:()=>G(!1)}],ee={a:()=>{L()}},{isShow:b,showDialog:x}=re(!1),{open:le}=fe(),C=E("所有样式"),z=k(()=>C.value==="正在使用样式"),i=k(()=>z.value?[y.value]:A.value),te=k(()=>i.value[n.value]===y.value),S=E(!1),ae=()=>{S.value=!0,we(()=>{S.value=!1})};O(z,()=>{n.value=i.value.indexOf(y.value)}),O(_,e=>{e&&$()});const H=()=>{K(),x(!1),ae()},se={enter:H},r=k(()=>A.value[n.value].isBigFont),I=e=>((e.includes("\\")||e.includes("/"))&&(e=e.split(/[\\\/]/).pop()||e),r.value&&(e=e.toLocaleLowerCase(),e=e.endsWith(".shx")?e:e+".shx"),e);return(e,o)=>{const oe=v("v-list-item-title"),ne=v("v-list-item"),ie=v("v-list"),F=v("v-select"),f=v("v-col"),B=v("v-row"),ue=v("v-checkbox"),g=v("v-text-field"),de=_e("scroll-bottom");return w(),P(X,null,[l(R,{title:e.t("文字样式"),"max-width":"600",modelValue:s(_),"onUpdate:modelValue":o[9]||(o[9]=a=>D(_)?_.value=a:null),footerBtnList:Z,keys:ee},{default:t(()=>[p("div",be,[p("p",null,u(e.t("当前文字样式"))+": "+u(s(y).name),1),l(B,{"align-stretch":""},{default:t(()=>[l(f,{cols:"4",class:"h-100","align-self":"start"},{default:t(()=>[p("div",xe,[l(m,{"key-name":"S",colon:""},{default:t(()=>[d(u(e.t("样式")),1)]),_:1}),ye((w(),W(ie,{density:"compact",class:"overflow-y py-0 list-border",height:"230"},{default:t(()=>[(w(!0),P(X,null,ge(i.value,(a,M)=>(w(),W(ne,{key:a.id,onClick:Ae=>s(j)(M),value:a,class:ke(["pa-0 mb-0",s(n)===M?"bg-light-blue-darken-2":""]),"min-height":"18",height:"18"},{prepend:t(()=>[...o[14]||(o[14]=[p("div",{style:{width:"24px"}},null,-1)])]),default:t(()=>[l(oe,{textContent:u(a.name)},null,8,["textContent"])]),_:2},1032,["onClick","value","class"]))),128))]),_:1})),[[de,S.value]]),l(F,{class:"mt-2",modelValue:C.value,"onUpdate:modelValue":o[0]||(o[0]=a=>C.value=a),items:["所有样式","正在使用样式"]},null,8,["modelValue"])])]),_:1}),l(f,{cols:"6",class:"h-100"},{default:t(()=>[p("div",Ce,[l(N,{title:e.t("字体"),class:"mb-1"},{default:t(()=>[l(B,null,{default:t(()=>[p("div",Se,[l(m,{"key-name":r.value?"X":"B",class:"ml-1"},{default:t(()=>[d(u(r.value?e.t("SHX字体"):e.t("字体名")),1)]),_:1},8,["key-name"]),l(F,{class:"mx-1","menu-props":{maxHeight:"200px"},items:s(h),"model-value":I((i.value[s(n)].isBigFont?i.value[s(n)].fileName:i.value[s(n)].typeFace)||s(h)[0]),"onUpdate:modelValue":o[1]||(o[1]=a=>{i.value[s(n)].isBigFont?i.value[s(n)].fileName=a:i.value[s(n)].typeFace=a,s(q).App.loadFonts([a],[a],[a],()=>{})})},null,8,["items","model-value"])]),p("div",Fe,[l(m,{"key-name":r.value?"B":"Y",class:"ml-1"},{default:t(()=>[d(u(r.value?e.t("大字体"):e.t("字体样式")),1)]),_:1},8,["key-name"]),l(F,{class:"mx-1","menu-props":{maxHeight:"200px"},items:s(T),"model-value":I(i.value[s(n)].isBigFont?i.value[s(n)].bigFontFileName||s(T)[0]:"常规"),"onUpdate:modelValue":o[2]||(o[2]=a=>{i.value[s(n)].isBigFont&&(i.value[s(n)].bigFontFileName=a),s(q).App.loadFonts([a],[a],[a],()=>{})})},null,8,["items","model-value"])])]),_:1}),l(ue,{class:"mt-2","model-value":r.value,"onUpdate:modelValue":o[3]||(o[3]=a=>{a!==null&&(i.value[s(n)].isBigFont=a)})},{label:t(()=>[l(m,{"key-name":"U"},{default:t(()=>[d(u(e.t("使用大字体")),1)]),_:1})]),_:1},8,["model-value"])]),_:1},8,["title"]),l(N,{title:e.t("大小"),class:"mt-4"},{default:t(()=>[l(g,{modelValue:i.value[s(n)].textSize,"onUpdate:modelValue":o[4]||(o[4]=a=>i.value[s(n)].textSize=a),type:"number",min:"0",step:"0.001"},{prepend:t(()=>[l(m,{"key-name":"T"},{default:t(()=>[d(u(e.t("高度")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"]),l(N,{title:e.t("效果"),class:"mt-4"},{default:t(()=>[l(g,{modelValue:i.value[s(n)].xScale,"onUpdate:modelValue":o[5]||(o[5]=a=>i.value[s(n)].xScale=a),type:"number",step:"0.001"},{prepend:t(()=>[l(m,{"key-name":"W",colon:""},{default:t(()=>[d(u(e.t("宽度因子")),1)]),_:1})]),_:1},8,["modelValue"]),l(g,{class:"mt-2",modelValue:i.value[s(n)].obliquingAngle,"onUpdate:modelValue":o[6]||(o[6]=a=>i.value[s(n)].obliquingAngle=a),type:"number",step:"0.001"},{prepend:t(()=>[l(m,{"key-name":"O",colon:""},{default:t(()=>[d(u(e.t("倾斜角度")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])])]),_:1}),l(f,{cols:"2","align-self":"start"},{default:t(()=>[l(c,{class:"mt-5 w-100",isAction:""},{default:t(()=>[l(m,{"key-name":"C",onClick:s(J)},{default:t(()=>[d(u(e.t("置为当前")),1)]),_:1},8,["onClick"])]),_:1}),l(c,{class:"mt-4 w-100",isAction:""},{default:t(()=>[l(m,{"key-name":"N",onClick:o[7]||(o[7]=a=>s(x)())},{default:t(()=>[d(u(e.t("新建")),1)]),_:1})]),_:1}),l(c,{class:"mt-4 w-100",isAction:"",onClick:o[8]||(o[8]=a=>s(le)({text:e.t("删除文字样式")+":"+e.t("样式")+"1?",define:()=>s(Q)()})),disabled:te.value},{default:t(()=>[l(m,{"key-name":"D"},{default:t(()=>[d(u(e.t("删除")),1)]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})])]),_:1},8,["title","modelValue"]),l(R,{title:e.t("新建文字样式"),modelValue:s(b),"onUpdate:modelValue":o[13]||(o[13]=a=>D(b)?b.value=a:null),"max-width":"300",keys:se},{actions:t(()=>[...o[15]||(o[15]=[p("div",{class:"pa-1"},null,-1)])]),default:t(()=>[l(B,{class:"py-3"},{default:t(()=>[l(f,{cols:"7","align-self":"start"},{default:t(()=>[l(g,{class:"mt-1 ml-8",modelValue:s(V),"onUpdate:modelValue":o[10]||(o[10]=a=>D(V)?V.value=a:null)},{prepend:t(()=>[p("span",Be,u(e.t("样式名"))+":",1)]),_:1},8,["modelValue"])]),_:1}),l(f,{cols:"5"},{default:t(()=>[p("div",Ne,[l(c,{primary:"",onClick:o[11]||(o[11]=a=>H()),isAction:""},{default:t(()=>[d(u(e.t("确定")),1)]),_:1}),l(c,{class:"mt-2",onClick:o[12]||(o[12]=a=>s(x)()),isAction:""},{default:t(()=>[d(u(e.t("取消")),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])],64)}}}),$e=Ve(De,[["__scopeId","data-v-f503d299"]]);export{$e as default};
