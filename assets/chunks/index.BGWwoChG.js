import{d as te,h as v,v as J,D as c,b as O,o as P,w as a,m as ae,H as e,a as r,t as p,L as oe,az as se,e as K,aB as ue,p as R,aw as ne,_ as re}from"./framework.BMMljfWr.js";import{c0 as ie,t as D,a4 as Q,a3 as me,ai as de,aw as y,ay as ve,aZ as fe,ax as ce,au as pe,ab as ye,P as _e,c1 as Ve,b as Ce,w as W,c2 as E}from"./lib.DTykjivu.js";import"./commonjsHelpers.Cpj98o6Y.js";const ke={class:"px-2 mt-5"},ge=te({__name:"index",setup(xe){var $,z;const{isShow:w,showDialog:j}=ie;let f={};const L=v([]),g=v("所有图元");J(w,u=>{u&&ye(()=>{f={};const l=new _e;l.allSelect(),l.forEach(t=>{const s=t.getObjectName();f[s]?f[s].push(t):f[s]=[t]}),L.value=[{title:"所有图元",value:"all"},...Object.keys(f).map(t=>({title:Ve[t]||t,value:t}))],g.value=L.value[0].value})});const G=[{title:"Color",value:1},{title:"Layer",value:2},{title:"LineType",value:3}],m=v(G[0].value),H=[{title:"= "+D("等于"),value:"="},{title:"!= "+D("不等于"),value:"!="},{title:"> "+D("大于"),value:">"},{title:D("全部选择"),value:"all"}],d=v(H[0].value),B=v(!0),{list:S}=Q(me()),_=v(($=S.value[0])==null?void 0:$.name),{lineTypeList:N}=Q(de()),V=v((z=N.value[0])==null?void 0:z.name),I=v(!0);J(m,()=>{_.value||(_.value=S.value[0].name),V.value||(V.value=N.value[0].name)});const M=v(),X=[{name:"确定",fun:()=>{j(!1);const u=Ce.getCurrentMxCAD(),l=t=>{var h;let s;if(m.value===1&&(s="trueColor"),m.value===2&&(s="layer"),m.value===3&&(s="linetype"),!s)return;const C=i=>{var n,k,o,T,F,Z;if(i instanceof W&&s==="trueColor"){const q=new W,x=(k=(n=M.value)==null?void 0:n.color)==null?void 0:k.method;if(x!==E.kByColor&&(x===E.kByLayer&&i.method===x||x===E.kByBlock&&i.method===x||x===E.kByACI&&i.colorIndex===((T=(o=M.value)==null?void 0:o.color)==null?void 0:T.index)))return!0;const{r:Y,g:ee,b:le}=new THREE.Color((Z=(F=M.value)==null?void 0:F.color)==null?void 0:Z.color);q.setRGB(Y*255,ee*255,le*255);const U=Number(q.getColorValue()),A=Number(i.getColorValue());return d.value==="="?U===A:d.value==="!="?U!==A:d.value===">"?U<A:!1}return!1};I.value||u.mxdraw.clearMxCurrentSelect();const b=[];(h=f[t])==null||h.forEach(i=>{let n=!1;const k=i.getMcDbEntity();if(k){if(d.value==="all")n=!0;else{const o=k[s];C(o)&&(n=!0),d.value==="="?(s==="layer"&&o===_.value||s==="linetype"&&o===V.value)&&(n=!0):d.value==="!="?(s==="layer"&&o!==_.value||s==="linetype"&&o!==V.value)&&(n=!0):d.value===">"&&(s==="layer"&&o>_.value||s==="linetype"&&o>V.value)&&(n=!0),B.value||(n=!n)}n&&b.push(i)}}),u.addCurrentSelect(b,b.length<30)};g.value==="all"?Object.keys(f).forEach(t=>{l(t)}):B.value?l(g.value):Object.keys(f).filter(t=>t!==g.value).forEach(t=>{l(t)}),u.updateDisplay()},primary:!0},{name:"关闭",fun:()=>j(!1)}];return(u,l)=>{const t=c("v-col"),s=c("v-select"),C=c("v-row"),b=c("v-list-item"),h=c("v-list"),i=c("v-radio"),n=c("v-radio-group"),k=c("v-checkbox");return P(),O(pe,{title:u.t("快速选择"),"max-width":"320",modelValue:R(w),"onUpdate:modelValue":l[6]||(l[6]=o=>ne(w)?w.value=o:null),footerBtnList:X},{default:a(()=>[ae("div",ke,[e(C,null,{default:a(()=>[e(t,{cols:"4",class:"text-right"},{default:a(()=>[e(y,{"key-name":"V"},{default:a(()=>[r(p(u.t("应用到")),1)]),_:1}),l[7]||(l[7]=r(": ",-1))]),_:1}),e(t,{cols:"6"},{default:a(()=>[e(s,{class:"mx-1",items:[u.t("整个图形")],"model-value":u.t("整个图形")},null,8,["items","model-value"])]),_:1}),e(t,{cols:"2"},{default:a(()=>[e(ve,{disabled:""})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(t,{cols:"4",class:"text-right"},{default:a(()=>[e(y,{"key-name":"B"},{default:a(()=>[r(p(u.t("对象类型")),1)]),_:1}),l[8]||(l[8]=r(": ",-1))]),_:1}),e(t,{cols:"6"},{default:a(()=>[e(s,{class:"mx-1",items:L.value,modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=o=>g.value=o)},null,8,["items","modelValue"])]),_:1}),e(t,{cols:"2"})]),_:1}),e(C,null,{default:a(()=>[e(t,{cols:"4",class:"text-right","align-self":"start"},{default:a(()=>[e(y,{"key-name":"P"},{default:a(()=>[r(p(u.t("特性")),1)]),_:1}),l[9]||(l[9]=r(": ",-1))]),_:1}),e(t,{cols:"6"},{default:a(()=>[e(h,{items:G,border:"",height:"160",density:"compact",variant:"text"},{item:a(({props:o})=>[e(b,oe(o,{onClick:T=>m.value=o.value,class:m.value===o.value?"bg-light-blue-darken-2":""}),null,16,["onClick","class"])]),_:1})]),_:1}),e(t,{cols:"2"})]),_:1}),e(C,null,{default:a(()=>[e(t,{cols:"4",class:"text-right"},{default:a(()=>[e(y,{"key-name":"O"},{default:a(()=>[r(p(u.t("运算符")),1)]),_:1}),l[10]||(l[10]=r(": ",-1))]),_:1}),e(t,{cols:"6"},{default:a(()=>[e(s,{class:"mx-1",items:H,modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=o=>d.value=o)},null,8,["modelValue"])]),_:1}),e(t,{cols:"2"})]),_:1}),e(C,null,{default:a(()=>[e(t,{cols:"4",class:"text-right"},{default:a(()=>[e(y,{"key-name":"V"},{default:a(()=>[r(p(u.t("值")),1)]),_:1}),l[11]||(l[11]=r(": ",-1))]),_:1}),e(t,{cols:"6"},{default:a(()=>[se(e(fe,{ref_key:"selectColor",ref:M},null,512),[[ue,m.value===1]]),m.value===2?(P(),O(s,{key:0,modelValue:_.value,"onUpdate:modelValue":l[2]||(l[2]=o=>_.value=o),items:R(S),"item-title":"name","item-value":"name"},null,8,["modelValue","items"])):K("",!0),m.value===3?(P(),O(s,{key:1,modelValue:V.value,"onUpdate:modelValue":l[3]||(l[3]=o=>V.value=o),items:R(N),"item-title":"name","item-value":"name"},null,8,["modelValue","items"])):K("",!0)]),_:1}),e(t,{cols:"2"})]),_:1}),e(ce,{title:u.t("应用到")},{default:a(()=>[e(n,{class:"",inline:!1,modelValue:B.value,"onUpdate:modelValue":l[4]||(l[4]=o=>B.value=o)},{default:a(()=>[e(i,{value:!0},{label:a(()=>[e(y,{"key-name":"I"},{default:a(()=>[r(p(u.t("包括在新选择集中")),1)]),_:1})]),_:1}),e(i,{value:!1,class:"mt-1"},{label:a(()=>[e(y,{"key-name":"E"},{default:a(()=>[r(p(u.t("排除在新选择集之外")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"]),e(k,{class:"mt-2",modelValue:I.value,"onUpdate:modelValue":l[5]||(l[5]=o=>I.value=o)},{label:a(()=>[e(y,{"key-name":"A"},{default:a(()=>[r(p(u.t("附加到当前选择集")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["title","modelValue"])}}}),he=re(ge,[["__scopeId","data-v-a5311dfd"]]);export{he as default};
