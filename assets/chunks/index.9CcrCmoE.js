import{d as P,h as L,D as V,b as S,o as i,w as u,m as e,H as d,t as o,c,F as M,C as H,p as l,n as J,aw as K,_ as Q,k as ce,aA as z,az as r,a as w,a0 as q,e as de,aH as re,O as ue,R as _e}from"./framework.BMMljfWr.js";import{ai as me,a4 as pe,b1 as he,au as X,aG as T,aP as ve,ba as ge,bb as ke,a_ as be,bc as G,bd as F}from"./lib.DTykjivu.js";import{u as Ce}from"./hooks.BEMLZH-J.js";import"./commonjsHelpers.Cpj98o6Y.js";const we=()=>{const D=me(),{createLineType:k}=D,{lineTypeList:x}=pe(D);return{lineTypeList:x,createLineType:k}},xe={class:"mt-2"},fe={class:"text-center"},ye={class:"text-center"},Le={class:"text-center"},Ve=["onClick"],De=P({__name:"index",emits:["change"],setup(D,{expose:k,emit:x}){const{lineTypeList:p}=we(),b=L(0),{isShow:f,showDialog:y,onReveal:R}=he(!1),U=x,B=[{name:"确定",fun:()=>{U("change",p.value[b.value]),y(!1)},primary:!0},{name:"取消",fun:()=>y(!1)}];return R(_=>{b.value=p.value.findIndex(C=>C.name===_.name)}),k({showDialog:y}),(_,C)=>{const N=V("v-table");return i(),S(X,{title:_.t("线型管理器"),"max-width":"500",modelValue:l(f),"onUpdate:modelValue":C[0]||(C[0]=h=>K(f)?f.value=h:null),footerBtnList:B},{default:u(()=>[e("div",xe,[e("p",null,o(_.t("已加载的线型")),1),d(N,{height:"300"},{default:u(()=>[e("thead",null,[e("tr",null,[e("th",fe,o(_.t("线型")),1),e("th",ye,o(_.t("外观")),1),e("th",Le,o(_.t("说明")),1)])]),e("tbody",null,[(i(!0),c(M,null,H(l(p),(h,$)=>(i(),c("tr",{key:h.id,class:J(b.value===$?"active":""),onClick:A=>b.value=$},[e("td",null,o(h.name),1),e("td",null,o(h.explain),1),e("td",null,o(h.appearance),1)],10,Ve))),128))])]),_:1})])]),_:1},8,["title","modelValue"])}}}),$e=Q(De,[["__scopeId","data-v-1107c131"]]),Te={class:"d-flex align-center"},Se={class:"d-flex align-center my-2"},Me={class:"w-100"},Re={class:"w-100"},Ue={class:"w-20"},Be={class:""},Ne={class:""},We={class:""},je={class:"w-20"},ze={class:"w-20"},Fe={class:"w-20"},He={class:"w-100",ref:"tbody"},Ae=["id","onClick","onContextmenu"],Ee={class:"text-no-wrap"},Oe={style:{width:"18px"},class:"d-inline-block"},qe=["for"],Ge=["disabled","id","onClick","onUpdate:modelValue"],Pe=["onClick"],Je=["onClick"],Ke=["onClick"],Qe=["onClick"],Xe=["onClick"],Ye={class:"w-20 text-truncate"},Ze={class:"w-100 my-3",cellpadding:"20"},Ie={class:"w-100"},et={class:"w-100"},tt={class:"w-auto px-6"},st={class:"d-flex justify-end w-auto"},nt=P({__name:"index",setup(D){const k=L(),{onClickLayer:x,onClickStopTD:p,onClickLayerName:b,resumeIndex:f,reverseSelection:y,selectColor:R,selectLineType:U,setIndex:B,onRightClickLayer:_,initLayerList:C,setLayerList:N,list:h,bodyRightClickMenuOptions:$,btnList:A,rootId:Y}=Ce({onAddLayer(){var m;const s=((m=k.value)==null?void 0:m.$el).getElementsByClassName("v-table__wrapper")[0];_e(()=>{s.scrollTo({top:s.scrollHeight-s.clientHeight,behavior:"smooth"})})}});C();const E=L([]),Z=n=>{const{map:s}=n(E.value,(m,j)=>j);s.length>0&&B(s)},O=L(),I=n=>{var s;(s=O.value)==null||s.showDialog(!0,n)},W=L(""),ee=ve(n=>{n===null&&(n=""),W.value=n},500),te=ce(()=>h.value.filter(n=>n.name.toLowerCase().includes(W.value.toLowerCase()))),se=be(),ne=(n,s)=>{p(new MouseEvent("click"),n,"lineWeight",s)};return(n,s)=>{const m=V("v-icon"),j=V("v-text-field"),le=V("v-select"),oe=V("v-divider"),g=z("ripple"),ie=z("box-selection"),ae=z("right-click-menu");return i(),c(M,null,[d(X,{maxWidth:"900",ref:"layerDialog",modelValue:l(F),"onUpdate:modelValue":s[4]||(s[4]=t=>K(F)?F.value=t:null),title:n.t("图层特性管理器")},{actions:u(()=>[...s[9]||(s[9]=[e("div",{class:"mt-1"},null,-1)])]),default:u(()=>[e("div",Te,[e("div",Se,[(i(!0),c(M,null,H(l(A),(t,v)=>(i(),S(T,{onClick:t.fun,class:"mx-2 px-2",key:t.name+v},{default:u(()=>[w(o(n.t(t.name)),1)]),_:2},1032,["onClick"]))),128))]),d(j,{"model-values":W.value,"onUpdate:modelValue":l(ee),class:"pa-1",clearable:"",density:"compact",label:n.t("搜索图层"),variant:"solo","hide-details":"","single-line":""},{"append-inner":u(()=>[d(m,{icon:"$mdi-magnify",class:"v-icon--clickable"})]),_:1},8,["model-values","onUpdate:modelValue","label"])]),r((i(),S(l(ge),{class:"w-100 layer-table",height:"300",ref_key:"boxRef",ref:k,onClick:s[0]||(s[0]=t=>l(f)())},{default:u(()=>[e("thead",Me,[e("tr",Re,[e("th",Ue,[s[5]||(s[5]=e("div",{style:{width:"10px"},class:"d-inline-block"},null,-1)),s[6]||(s[6]=w()),e("span",null,o(n.t("图层")+n.t("名称")),1)]),e("th",Be,o(n.t("可见")),1),e("th",Ne,o(n.t("锁定")),1),e("th",We,o(n.t("打印")),1),e("th",je,o(n.t("颜色")),1),e("th",ze,o(n.t("线性")),1),e("th",Fe,o(n.t("线宽")),1)])]),r((i(),c("tbody",He,[(i(!0),c(M,null,H(te.value,(t,v)=>(i(),c("tr",{class:J(["text-center layer-info",t.isSelect?"active":""]),ref_for:!0,ref_key:"refItems",ref:E,key:t.id,id:t.id.toString(),onClick:q(a=>l(x)(v),["prevent"]),onContextmenu:q(a=>l(_)(v,a),["prevent"])},[r((i(),c("td",Ee,[e("div",Oe,[t.status?(i(),S(m,{key:0,icon:"class:iconfont gou",size:"x-small",color:"#16FD21"})):de("",!0)]),e("label",{class:"d-inline-block",for:t.id.toString()},[r(e("input",{disabled:t.id===l(Y),id:t.id.toString(),class:"text-truncate text-center",type:"text",onClick:a=>l(b)(a,v),"onUpdate:modelValue":a=>t.name=a},null,8,Ge),[[re,t.name]])],8,qe)])),[[g]]),r((i(),c("td",{class:"text-orange",onClick:a=>l(p)(a,t,"visible",!t.visible,v)},[d(m,{icon:t.visible?"yanjing1":"yanjing"},null,8,["icon"])],8,Pe)),[[g,void 0,void 0,{prevent:!0}]]),r((i(),c("td",{class:"text-orange",onClick:a=>l(p)(a,t,"lock",!t.lock,v)},[d(m,{icon:t.lock?"suo":"jiesuo1"},null,8,["icon"])],8,Je)),[[g]]),r((i(),c("td",{onClick:a=>l(p)(a,t,"print",!t.print,v)},[d(m,{icon:t.print?"dayin":"budayinbiaoqian"},null,8,["icon"])],8,Ke)),[[g]]),r((i(),c("td",{class:"d-flex align-center justify-center",onClick:a=>l(R)(t.color)},[e("div",{class:"colorBox mr-2",style:ue({background:`${t.color.color}`})},null,4),e("span",null,o(l(ke)(t.color.name)),1)],8,Qe)),[[g]]),r((i(),c("td",{class:"w-20 text-truncate",onClick:a=>I(t.lineType)},[w(o(t.lineType.name),1)],8,Xe)),[[g]]),r((i(),c("td",Ye,[d(le,{items:l(se),"item-title":"name","bg-color":"transparent","model-value":t.lineWeight,"onUpdate:modelValue":a=>ne(t,a)},null,8,["items","model-value","onUpdate:modelValue"])])),[[g]])],42,Ae))),128))])),[[ie,Z]])]),_:1})),[[ae,l($)]]),d(oe,{color:"#576375",class:"border-opacity-75"}),e("table",Ze,[e("thead",Ie,[e("tr",et,[s[7]||(s[7]=e("th",{class:"w-20"},null,-1)),e("th",tt,[d(T,{onClick:s[1]||(s[1]=t=>l(y)())},{default:u(()=>[w(o(n.t("反选")),1)]),_:1})]),s[8]||(s[8]=e("th",{class:"w-50"},null,-1)),e("th",st,[d(T,{isAction:"",primary:"",onClick:s[2]||(s[2]=t=>(l(N)(),l(G)(!1)))},{default:u(()=>[w(o(n.t("确定")),1)]),_:1}),d(T,{class:"ml-10 mr-6",onClick:s[3]||(s[3]=t=>l(G)())},{default:u(()=>[w(o(n.t("关闭")),1)]),_:1})])])])])]),_:1},8,["modelValue","title"]),d($e,{ref_key:"linearManager",ref:O,onChange:l(U)},null,8,["onChange"])],64)}}}),ct=Q(nt,[["__scopeId","data-v-aa37cb47"]]);export{ct as default};
