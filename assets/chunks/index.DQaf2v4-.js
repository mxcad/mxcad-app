import{a3 as w,a4 as M,au as I}from"./lib.DTykjivu.js";import{u as B}from"./hooks.B4e6XVV9.js";import{d as D,h as f,k as R,D as d,b as _,o as v,w as x,m as S,H as h,c as F,F as K,C as N,aw as U,p as b}from"./framework.BMMljfWr.js";import"./commonjsHelpers.Cpj98o6Y.js";const E={class:"d-flex algin-center"},q=D({__name:"index",setup(H){const{dialog:r}=B(),{isShow:m}=r,p=f(!1);r.onReveal(t=>{p.value=!!t.isMultiple});const y=w(),{list:C}=M(y),l=f([]),u=R(()=>C.value.filter(e=>e.name).map(({name:e})=>e)),i=f(""),V=()=>{i.value===""?l.value=[]:l.value=[u.value.findIndex(t=>t.toLocaleLowerCase()===i.value.toLocaleLowerCase())]},g=[{name:"确定",fun:()=>{r.confirm(l.value.map(t=>u.value[t]))},primary:!0},{name:"关闭",fun:()=>r.showDialog(!1)}],k=(t,e)=>{if(p.value){if(t.ctrlKey)l.value.indexOf(e)===-1?l.value=[...l.value,e]:l.value=l.value.filter(a=>a!==e);else if(t.shiftKey){const s=l.value;let a=Math.min(...s),c=Math.max(...s);a>e?a=e:c=e,l.value=u.value.map((o,n)=>n).slice(a,c+1)}}else l.value=[e]};return(t,e)=>{const s=d("v-text-field"),a=d("v-list-item"),c=d("v-list");return v(),_(I,{maxWidth:"400px",ref:"layerDialog",modelValue:b(m),"onUpdate:modelValue":e[1]||(e[1]=o=>U(m)?m.value=o:null),title:"选择图层",footerBtnList:g},{default:x(()=>[S("div",E,[h(s,{placeholder:t.t("目标图层"),modelValue:i.value,"onUpdate:modelValue":[e[0]||(e[0]=o=>i.value=o),V]},null,8,["placeholder","modelValue"])]),h(c,{density:"compact",color:"primary",style:{height:"300px"}},{default:x(()=>[(v(!0),F(K,null,N(u.value,(o,n)=>(v(),_(a,{class:"ma-0",title:o,ref_for:!0,ref:"refItems",key:n,onClick:L=>k(L,n),active:l.value.includes(n)},null,8,["title","onClick","active"]))),128))]),_:1})]),_:1},8,["modelValue"])}}});export{q as default};
