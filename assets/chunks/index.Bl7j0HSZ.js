import{bo as g,bp as ue,t as a,au as le,K as ne,ai as xe,a4 as We,L,ax as E,bq as Be,aZ as te,br as me,B as ce,aY as W,C as fe,bs as ye,bt as M,bu as we,b0 as Ue,bv as De,bw as K,bx as Ne,aS as Te,by as Me,bz as Ie,bA as Ae,bB as re,aM as $e,bC as Ee,ah as Oe,bD as Q,bE as Pe,aG as z,aw as F,bF as X}from"./lib.DTykjivu.js";import{h as T,k as P,d as A,v as j,D as v,b as $,o as B,w as l,m as k,H as e,$ as Je,a as U,t as p,p as i,c as I,e as D,O as q,a3 as ee,_ as pe,al as ze,F as de,C as Fe,n as Re,aw as He}from"./framework.BMMljfWr.js";import"./commonjsHelpers.Cpj98o6Y.js";const oe=()=>{try{return g.keys()||[g.defaultName]}catch(_){return console.error("获取引线样式名称失败:",_),[g.defaultName]}},je=_=>{try{if(!_.name)return!1;const{name:s}=_;return g.set(s,_),!0}catch(s){return console.error("保存引线样式失败:",s),!1}},Ge=_=>{try{return _===g.defaultName?!1:oe().includes(_)?(g.remove(_),!0):!1}catch(s){return console.error("删除引线样式失败:",s),!1}},Ke=(_,s)=>{try{if(_===g.defaultName)return!1;const u=oe();if(u.includes(s))return!1;if(u.includes(_)){const n=g.get(_);return g.set(s,n),g.remove(_),g.currentName===_&&(g.currentName=s),!0}return!1}catch(u){return console.error("重命名引线样式失败:",u),!1}},qe=()=>{const _=T([]),s=T(null),u=T(null),n=T(!1),m=()=>{const C=oe();_.value=C.map(r=>({...g.get(r),name:r}))};m();const c=P(()=>_.value),b=g.get(g.defaultName);return b&&(s.value={...b,name:g.defaultName}),b&&(u.value={...b,name:g.defaultName}),{styleList:c,currentStyle:s,editingStyle:u,isCreating:n,refreshStyleList:m,startEditing:C=>{u.value=JSON.parse(JSON.stringify(C)),n.value=!1},startCreating:()=>{const C=g.get(g.defaultName);g.defaultValue,C&&(u.value={...JSON.parse(JSON.stringify(C)),name:"",description:"新建样式"}),n.value=!0},extendStyle:C=>{u.value=JSON.parse(JSON.stringify(C)),u.value&&(u.value.name=""),n.value=!0},cancelEditing:()=>{n.value=!1},saveStyle:()=>{if(!u.value||!u.value.name.trim())return!1;const C=je(u.value);if(C){m();const r=g.get(u.value.name);r&&(s.value={...r,name:u.value.name}),n.value=!1}return C},deleteStyle:C=>{var R;if(!C||C.name===g.defaultName)return!1;const r=Ge(C.name);if(r&&(m(),((R=s.value)==null?void 0:R.name)===C.name)){const G=g.get(g.defaultName);G&&(s.value={...G,name:g.defaultName})}return r},applyStyle:()=>s.value?(g.currentName=s.value.name,ue&&ue(s.value.name),!0):!1,renameStyle:(C,r)=>!C||!r||C===g.defaultName?!1:Ke(C,r)}},Ye={class:"pa-4"},Ze={class:"d-flex justify-end pa-3 gap-2"},Qe=A({__name:"InputDialog",props:{modelValue:{type:Boolean},title:{},label:{},defaultValue:{}},emits:["update:modelValue","confirm","cancel"],setup(_,{emit:s}){const u=ne(),n=_,m=s,c=T(n.defaultValue||"");j(()=>n.defaultValue,o=>{o!==void 0&&(c.value=o)});const b=()=>{if(!c.value.trim()){u.warning(a("请输入有效的名称"));return}m("confirm",c.value.trim()),m("update:modelValue",!1)},t=()=>{m("cancel"),m("update:modelValue",!1)};return(o,y)=>{const f=v("v-text-field"),S=v("v-btn");return B(),$(le,{title:o.title,"model-value":o.modelValue,"onUpdate:modelValue":y[1]||(y[1]=d=>m("update:modelValue",d)),"max-width":"400",persistent:""},{actions:l(()=>[k("div",Ze,[e(S,{class:"mr-1",color:"primary",onClick:b},{default:l(()=>[U(p(i(a)("确定")),1)]),_:1}),e(S,{onClick:t},{default:l(()=>[U(p(i(a)("取消")),1)]),_:1})])]),default:l(()=>[k("div",Ye,[e(f,{modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=d=>c.value=d),label:o.label,autofocus:"",onKeyup:Je(b,["enter"])},null,8,["modelValue","label"])])]),_:1},8,["title","model-value"])}}}),Xe={key:0},et=A({__name:"LeaderLine",props:{style:{}},setup(_){const s=_,u=xe(),{lineTypeList:n}=We(u),m=P(()=>[{text:a("ByLayer"),value:L.LineWeight.kLnWtByLayer},{text:a("ByBlock"),value:L.LineWeight.kLnWtByBlock},{text:a("Default"),value:L.LineWeight.kLnWtByLwDefault},{text:"0.00mm",value:L.LineWeight.kLnWt000},{text:"0.05mm",value:L.LineWeight.kLnWt005},{text:"0.09mm",value:L.LineWeight.kLnWt009},{text:"0.13mm",value:L.LineWeight.kLnWt013},{text:"0.15mm",value:L.LineWeight.kLnWt015},{text:"0.18mm",value:L.LineWeight.kLnWt018},{text:"0.20mm",value:L.LineWeight.kLnWt020},{text:"0.25mm",value:L.LineWeight.kLnWt025},{text:"0.30mm",value:L.LineWeight.kLnWt030},{text:"0.35mm",value:L.LineWeight.kLnWt035},{text:"0.40mm",value:L.LineWeight.kLnWt040},{text:"0.50mm",value:L.LineWeight.kLnWt050},{text:"0.53mm",value:L.LineWeight.kLnWt053},{text:"0.60mm",value:L.LineWeight.kLnWt060},{text:"0.70mm",value:L.LineWeight.kLnWt070},{text:"0.80mm",value:L.LineWeight.kLnWt080},{text:"0.90mm",value:L.LineWeight.kLnWt090},{text:"1.00mm",value:L.LineWeight.kLnWt100},{text:"1.06mm",value:L.LineWeight.kLnWt106},{text:"1.20mm",value:L.LineWeight.kLnWt120},{text:"1.40mm",value:L.LineWeight.kLnWt140},{text:"1.58mm",value:L.LineWeight.kLnWt158},{text:"2.00mm",value:L.LineWeight.kLnWt200},{text:"2.11mm",value:L.LineWeight.kLnWt211}]),c=t=>{const o=me(t),{createColor:y,colorSelectList:f}=ce();let S=f.find(d=>{if(d.method===o.method){if(d.method===W.kByLayer||d.method===W.kByBlock||d.method===W.kByACI&&d.index===o.colorIndex)return!0;if(d.method===W.kByColor){const h=fe(d.color);return h.red()===o.red&&h.green()===o.green&&h.blue()===o.blue}}return!1});if(!S){const d=ye(o);S=y({color:d,name:d,method:o.method,index:o.colorIndex,n:o.n})}return S},b=t=>{var y;if(!((y=s.style)!=null&&y.line)||!t)return;let o=null;t.method===W.kNone?o=M.kBylayer:t.method===W.kByColor?o=parseInt(t.color.replace("#",""),16):t.method===W.kByLayer?o=M.kBylayer:t.method===W.kByBlock?o=M.kByblock:t.index!==-1&&(o=t.index),s.style.line.color=o};return(t,o)=>{const y=v("v-select"),f=v("v-col"),S=v("v-row");return t.style?(B(),I("div",Xe,[e(S,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("线条设置")},{default:l(()=>[e(S,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("线条类型"))+":",1),e(y,{modelValue:t.style.line.type,"onUpdate:modelValue":o[0]||(o[0]=d=>t.style.line.type=d),items:i(Be),"item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("线条颜色"))+":",1),e(te,{"model-value":c(t.style.line.color),onChange:b},null,8,["model-value"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("线型"))+":",1),e(y,{modelValue:t.style.line.lineType,"onUpdate:modelValue":o[1]||(o[1]=d=>t.style.line.lineType=d),items:i(n),"item-title":"name","item-value":"name"},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("线宽"))+":",1),e(y,{modelValue:t.style.line.lineWeight,"onUpdate:modelValue":o[2]||(o[2]=d=>t.style.line.lineWeight=d),items:m.value,"item-title":"text","item-value":"value"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})])):D("",!0)}}}),tt={key:0},lt=A({__name:"LeaderArrow",props:{style:{}},setup(_){return(s,u)=>{const n=v("v-select"),m=v("v-col"),c=v("v-text-field"),b=v("v-row");return s.style?(B(),I("div",tt,[e(b,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("箭头设置")},{default:l(()=>[e(b,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("箭头类型"))+":",1),e(n,{modelValue:s.style.arrow.symbol,"onUpdate:modelValue":u[0]||(u[0]=t=>s.style.arrow.symbol=t),items:i(we),"item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("箭头大小"))+":",1),e(c,{modelValue:s.style.arrow.size,"onUpdate:modelValue":u[1]||(u[1]=t=>s.style.arrow.size=t),modelModifiers:{number:!0},type:"number",min:"0",step:"0.1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})])):D("",!0)}}}),nt={key:0},ot=A({__name:"LeaderGeneral",props:{style:{}},setup(_){return(s,u)=>{const n=v("v-text-field"),m=v("v-col"),c=v("v-row");return s.style?(B(),I("div",nt,[e(c,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("基本信息")},{default:l(()=>[e(c,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("样式名称")),1),e(n,{modelValue:s.style.name,"onUpdate:modelValue":u[0]||(u[0]=b=>s.style.name=b)},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("描述")),1),e(n,{modelValue:s.style.description,"onUpdate:modelValue":u[1]||(u[1]=b=>s.style.description=b)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),e(c,{class:"mt-2"},{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(et,{style:q(s.style)},null,8,["style"])]),_:1})]),_:1}),e(c,{class:"mt-2"},{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(lt,{style:q(s.style)},null,8,["style"])]),_:1})]),_:1})])):D("",!0)}}}),at={key:0},st=A({__name:"LeaderConstraints",props:{style:{}},setup(_){return(s,u)=>{const n=v("v-checkbox"),m=v("v-col"),c=v("v-text-field"),b=v("v-row");return s.style?(B(),I("div",at,[e(b,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("约束设置")},{default:l(()=>[e(b,{class:"mt-2"},{default:l(()=>[e(m,{cols:"6"},{default:l(()=>[e(n,{modelValue:s.style.constraints.enableMaxPoints,"onUpdate:modelValue":u[0]||(u[0]=t=>s.style.constraints.enableMaxPoints=t),label:i(a)("最大引线点数")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"6"},{default:l(()=>[e(c,{modelValue:s.style.constraints.maxPoints,"onUpdate:modelValue":u[1]||(u[1]=t=>s.style.constraints.maxPoints=t),modelModifiers:{number:!0},type:"number",min:"0",step:"1",disabled:!s.style.constraints.enableMaxPoints},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(b,{class:"mt-4"},{default:l(()=>[e(m,{cols:"6"},{default:l(()=>[e(n,{modelValue:s.style.constraints.enableFirstSegmentAngle,"onUpdate:modelValue":u[2]||(u[2]=t=>s.style.constraints.enableFirstSegmentAngle=t),label:i(a)("第一段角度")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"6"},{default:l(()=>[e(c,{modelValue:s.style.constraints.firstSegmentAngle,"onUpdate:modelValue":u[3]||(u[3]=t=>s.style.constraints.firstSegmentAngle=t),modelModifiers:{number:!0},type:"number",min:"0",max:"360",step:"1",disabled:!s.style.constraints.enableFirstSegmentAngle},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(b,{class:"mt-4"},{default:l(()=>[e(m,{cols:"6"},{default:l(()=>[e(n,{modelValue:s.style.constraints.enableSecondSegmentAngle,"onUpdate:modelValue":u[4]||(u[4]=t=>s.style.constraints.enableSecondSegmentAngle=t),label:i(a)("第二段角度")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"6"},{default:l(()=>[e(c,{modelValue:s.style.constraints.secondSegmentAngle,"onUpdate:modelValue":u[5]||(u[5]=t=>s.style.constraints.secondSegmentAngle=t),modelModifiers:{number:!0},type:"number",min:"0",max:"360",step:"1",disabled:!s.style.constraints.enableSecondSegmentAngle},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})])):D("",!0)}}}),it={key:0},ut=A({__name:"LeaderStructure",props:{style:{}},setup(_){return(s,u)=>{const n=v("v-col"),m=v("v-row"),c=v("v-checkbox"),b=v("v-text-field");return s.style?(B(),I("div",it,[e(m,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(st,{style:q(s.style)},null,8,["style"])]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("基线设置")},{default:l(()=>[e(m,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(c,{modelValue:s.style.baseline.autoInclude,"onUpdate:modelValue":u[0]||(u[0]=t=>s.style.baseline.autoInclude=t),label:i(a)("自动包含基线")},null,8,["modelValue","label"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(b,{modelValue:s.style.baseline.distance,"onUpdate:modelValue":u[1]||(u[1]=t=>s.style.baseline.distance=t),modelModifiers:{number:!0},type:"number",min:"0",step:"1"},{prepend:l(()=>[k("div",null,p(i(a)("基线距离"))+":",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})])):D("",!0)}}}),rt={key:0},dt={class:"mb-2"},mt={class:"mb-2"},ct={class:"mb-2"},ft=A({__name:"LeaderContent",props:{style:{}},setup(_){const s=_;j(()=>s.style,t=>{var o;(o=t==null?void 0:t.content)!=null&&o.connection&&(t.content.connection.horizontal||(t.content.connection.horizontal=!1))},{immediate:!0});const u=t=>{const o=me(t),{createColor:y,colorSelectList:f}=ce();let S=f.find(d=>{if(d.method===o.method){if(d.method===W.kByLayer||d.method===W.kByBlock||d.method===W.kByACI&&d.index===o.colorIndex)return!0;if(d.method===W.kByColor){const h=fe(d.color);return h.red()===o.red&&h.green()===o.green&&h.blue()===o.blue}}return!1});if(!S){const d=ye(o);S=y({color:d,name:d,method:o.method,index:o.colorIndex,n:o.n})}return S},n=t=>{var y;if(!((y=s.style)!=null&&y.content.mtext)||!t)return;let o=null;t.method===W.kNone?o=M.kBylayer:t.method===W.kByColor?o=parseInt(t.color.replace("#",""),16):t.method===W.kByLayer?o=M.kBylayer:t.method===W.kByBlock?o=M.kByblock:t.index!==-1&&(o=t.index),s.style.content.mtext.textColor=o},m=t=>{var y,f;if(!((f=(y=s.style)==null?void 0:y.content)!=null&&f.block)||!t)return;let o=null;t.method===W.kNone?o=M.kBylayer:t.method===W.kByColor?o=parseInt(t.color.replace("#",""),16):t.method===W.kByLayer?o=M.kBylayer:t.method===W.kByBlock?o=M.kByblock:t.index!==-1&&(o=t.index),s.style.content.block.color=o},{textStyles:c,initList:b}=Ue();return(t,o)=>{const y=v("v-select"),f=v("v-col"),S=v("v-row"),d=v("v-text-field"),h=v("v-checkbox"),N=v("v-radio"),C=v("v-radio-group");return t.style?(B(),I("div",rt,[e(S,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(y,{modelValue:t.style.content.type,"onUpdate:modelValue":o[0]||(o[0]=r=>t.style.content.type=r),items:i(De),"item-title":"title","item-value":"value"},{prepend:l(()=>[k("div",null,p(i(a)("多重引线类型"))+":",1)]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),t.style.content.type===i(K).MText&&t.style.content.mtext?(B(),$(S,{key:0,class:"mt-4"},{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("多行文本设置")},{default:l(()=>[e(S,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("文本样式"))+":",1),e(y,{modelValue:t.style.content.mtext.textStyle,"onUpdate:modelValue":o[1]||(o[1]=r=>t.style.content.mtext.textStyle=r),"onUpdate:menu":o[2]||(o[2]=r=>r&&i(b)()),items:i(c)},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("文本高度"))+":",1),e(d,{modelValue:t.style.content.mtext.textHeight,"onUpdate:modelValue":o[3]||(o[3]=r=>t.style.content.mtext.textHeight=r),modelModifiers:{number:!0},type:"number",min:"0",step:"0.1"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("文本颜色"))+":",1),e(te,{"model-value":u(t.style.content.mtext.textColor),onChange:n},null,8,["model-value"])]),_:1}),e(f,{cols:"12",class:"d-flex"},{default:l(()=>[e(h,{class:"mr-4",modelValue:t.style.content.mtext.alwaysLeftAlign,"onUpdate:modelValue":o[4]||(o[4]=r=>t.style.content.mtext.alwaysLeftAlign=r),label:i(a)("始终左对正")},null,8,["modelValue","label"]),e(h,{modelValue:t.style.content.mtext.textFrame,"onUpdate:modelValue":o[5]||(o[5]=r=>t.style.content.mtext.textFrame=r),label:i(a)("文本边框")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):D("",!0),t.style.content.type===i(K).Block&&t.style.content.block?(B(),$(S,{key:1,class:"mt-4"},{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("块设置")},{default:l(()=>[e(S,{class:"mt-2"},{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[k("div",dt,p(i(a)("源块")),1),e(y,{modelValue:t.style.content.block.source,"onUpdate:modelValue":o[6]||(o[6]=r=>t.style.content.block.source=r),items:[...i(Ne),...i(Te)().map(r=>({title:r,value:r}))]},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",mt,p(i(a)("附着")),1),e(y,{modelValue:t.style.content.block.attachment,"onUpdate:modelValue":o[7]||(o[7]=r=>t.style.content.block.attachment=r),items:i(Me)},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12",class:""},{default:l(()=>[k("div",null,p(i(a)("颜色"))+":",1),e(te,{"model-value":u(t.style.content.block.color),onChange:m},null,8,["model-value"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",ct,p(i(a)("比例")),1),e(d,{modelValue:t.style.content.block.scale,"onUpdate:modelValue":o[8]||(o[8]=r=>t.style.content.block.scale=r),modelModifiers:{number:!0},type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):D("",!0),t.style.content.type===i(K).MText&&t.style.content.mtext?(B(),$(S,{key:2,class:"mt-4"},{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(E,{title:i(a)("连接设置")},{default:l(()=>[e(C,{modelValue:t.style.content.connection.horizontal,"onUpdate:modelValue":o[9]||(o[9]=r=>t.style.content.connection.horizontal=r)},{default:l(()=>[e(N,{class:"mr-4",label:i(a)("水平连接"),value:!0},null,8,["label"]),e(N,{label:i(a)("垂直连接"),value:!1},null,8,["label"])]),_:1},8,["modelValue"]),t.style.content.connection.horizontal?D("",!0):(B(),$(S,{key:0,class:"mt-4"},{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("顶部连接位置"))+":",1),e(y,{modelValue:t.style.content.connection.topPosition,"onUpdate:modelValue":o[10]||(o[10]=r=>t.style.content.connection.topPosition=r),items:i(Ie),"item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[k("div",null,p(i(a)("底部连接位置"))+":",1),e(y,{modelValue:t.style.content.connection.bottomPosition,"onUpdate:modelValue":o[11]||(o[11]=r=>t.style.content.connection.bottomPosition=r),items:i(Ae),"item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1})]),_:1})),t.style.content.connection.horizontal?(B(),$(S,{key:1,class:"mt-4"},{default:l(()=>[e(f,{cols:"6"},{default:l(()=>[k("div",null,p(i(a)("左侧连接位置")),1),e(y,{modelValue:t.style.content.connection.leftPosition,"onUpdate:modelValue":o[12]||(o[12]=r=>t.style.content.connection.leftPosition=r),items:i(re),"item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"6"},{default:l(()=>[k("div",null,p(i(a)("右侧连接位置")),1),e(y,{modelValue:t.style.content.connection.rightPosition,"onUpdate:modelValue":o[13]||(o[13]=r=>t.style.content.connection.rightPosition=r),items:i(re),"item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1})]),_:1})):D("",!0),e(S,null,{default:l(()=>[e(f,null,{default:l(()=>[k("div",null,p(i(a)("基线间隙"))+":",1),e(d,{modelValue:t.style.content.connection.gap,"onUpdate:modelValue":o[14]||(o[14]=r=>t.style.content.connection.gap=r),modelModifiers:{number:!0},type:"number",min:"0",step:"0.1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):D("",!0)])):D("",!0)}}}),yt={key:0,class:"pa-3"},pt=A({__name:"index",props:{modelValue:{type:Boolean},style:{},isCreating:{type:Boolean}},emits:["update:modelValue","save","cancel"],setup(_,{emit:s}){const u=ne(),n=_,m=s,c=T(null),b=T(0);j(()=>n.style,d=>{if(d&&(c.value=JSON.parse(JSON.stringify(d)),c.value&&c.value.content.type===K.MText&&!c.value.content.mtext)){const h=Ee();c.value.content.mtext={defaultText:h.children,textStyle:"Standard",textAngle:0,textColor:256,textHeight:2.5,alwaysLeftAlign:!1,textFrame:!1}}},{immediate:!0});const t=P(()=>n.isCreating?a("创建引线样式"):a("修改引线样式")),o=P(()=>[{tab:a("引线格式"),component:()=>ee(ot,{style:c.value})},{tab:a("引线结构"),component:()=>ee(ut,{style:c.value})},{tab:a("内容"),component:()=>ee(ft,{style:c.value})}]),y=()=>{if(!c.value){u.error(a("无效的样式数据"));return}if(!c.value.name.trim()){u.warning(a("样式名称不能为空"));return}m("save",c.value)},f=()=>{m("cancel"),m("update:modelValue",!1)},S=[{name:a("确定"),fun:y,primary:!0},{name:a("取消"),fun:f}];return(d,h)=>(B(),$(le,{title:t.value,"model-value":d.modelValue,"onUpdate:modelValue":h[1]||(h[1]=N=>m("update:modelValue",N)),"max-width":"500",persistent:"","footer-btn-list":S},{default:l(()=>[c.value?(B(),I("div",yt,[e($e,{items:o.value,modelValue:b.value,"onUpdate:modelValue":h[0]||(h[0]=N=>b.value=N),height:500,isTabMinWidthAuto:""},null,8,["items","modelValue"])])):D("",!0)]),_:1},8,["title","model-value"]))}}),vt=pe(pt,[["__scopeId","data-v-720c3ad6"]]),gt={class:"px-3 pt-2"},_t={class:"mt-3"},bt=A({__name:"index",setup(_){const s=ne(),u=Oe(),n=ze({styleList:[],currentStyle:null,editingStyle:null,isCreating:!1,showEditDialog:!1,showInputDialog:!1,inputDialog:{title:"",label:"",defaultValue:""}}),{styleList:m,currentStyle:c,refreshStyleList:b,deleteStyle:t,applyStyle:o,renameStyle:y}=qe();j(m,V=>{n.styleList=[...V]},{immediate:!0}),j(c,V=>{V?n.currentStyle={...V}:n.currentStyle=null},{immediate:!0});const f=P(()=>Q.value),S=P(()=>f.value),d=T(0),h=V=>{d.value=V,n.currentStyle=n.styleList[V]},N=T([a("所有样式"),a("当前样式")]),C=T(N.value[0]),r=P(()=>n.currentStyle&&n.currentStyle.name!==g.defaultName),R=()=>{n.currentStyle&&o()&&(Q.value=n.currentStyle.name,s.success(a("已将")+" "+n.currentStyle.name+" "+a("设置为当前样式")))},G=()=>{const V=g.get(g.defaultName);V&&(n.editingStyle={...JSON.parse(JSON.stringify(V)),name:se("NewStyle"),description:a("新建样式")},n.isCreating=!0,n.showEditDialog=!0)};let ae=1;const se=V=>{let x=`${V}${ae}`;return ae++,x},ve=()=>{n.currentStyle&&(n.editingStyle=JSON.parse(JSON.stringify(n.currentStyle)),n.isCreating=!1,n.showEditDialog=!0)},ge=()=>{if(n.currentStyle){if(n.editingStyle=JSON.parse(JSON.stringify(n.currentStyle)),n.editingStyle){const V="Copy_of_"+n.currentStyle.name;n.editingStyle.name=se(V),n.editingStyle.description=a("继承自")+" "+n.currentStyle.name}n.isCreating=!0,n.showEditDialog=!0}},_e=()=>{n.currentStyle&&n.currentStyle.name!==g.defaultName&&(n.inputDialog={title:a("重命名样式"),label:a("输入新名称"),defaultValue:n.currentStyle.name},n.showInputDialog=!0)},be=V=>{if(V&&V.trim()!==""&&n.currentStyle){if(n.styleList.find(O=>O.name.toLowerCase()===V.toLowerCase()&&O.name!==n.currentStyle.name)){s.warning(a("样式名称")+' "'+V+'" '+a("已存在，请使用其他名称"));return}const J=n.currentStyle.name;y(J,V)?(b(),f.value===J&&(Q.value=V),s.success(a("样式重命名成功"))):s.error(a("样式重命名失败"))}},Ve=()=>{n.currentStyle&&n.currentStyle.name!==g.defaultName&&u.open({title:a("确认删除"),text:a("确定要删除样式")+' "'+n.currentStyle.name+'" '+a("吗？"),defineTitle:a("确定"),cancelTitle:a("取消"),define:()=>{n.currentStyle&&(t(n.currentStyle)?s.success(a("样式已删除")):s.error(a("删除样式失败")))}})},ke=V=>{if(n.isCreating&&n.styleList.find(O=>O.name.toLowerCase()===V.name.toLowerCase()&&(n.currentStyle?O.name!==n.currentStyle.name:!0))){s.warning(a("样式名称")+' "'+V.name+'" '+a("已存在，请使用其他名称"));return}n.editingStyle=V;const{description:x,...J}=V;g.set(V.name,J),b(),n.currentStyle={...V},n.showEditDialog=!1,n.isCreating?s.success(a("新样式创建成功")):s.success(a("样式修改成功"))},Se=()=>{n.showEditDialog=!1},Le=[{name:a("关闭"),fun:()=>Pe(!1)}];return(V,x)=>{const J=v("v-list-item-title"),Y=v("v-list-item"),O=v("v-list"),Ce=v("v-select"),ie=v("v-col"),H=v("v-icon"),he=v("v-row");return B(),I(de,null,[e(le,{title:i(a)("引线样式管理器"),modelValue:i(X),"onUpdate:modelValue":x[1]||(x[1]=w=>He(X)?X.value=w:null),"max-width":"400",footerBtnList:Le},{default:l(()=>[k("div",gt,[k("p",null,p(i(a)("当前引线样式")+":"+S.value),1),e(he,{class:"mt-1"},{default:l(()=>[e(ie,{cols:6,"align-self":"start"},{default:l(()=>[k("p",null,[U(p(i(a)("样式"))+"(",1),x[4]||(x[4]=k("span",{class:"text-decoration-underline"},"S",-1)),x[5]||(x[5]=U("):",-1))]),e(O,{density:"compact",class:"list-border overflow-y py-0",height:"260"},{default:l(()=>[(B(!0),I(de,null,Fe(C.value===N.value[0]?n.styleList:n.styleList.filter(w=>w.name===S.value),(w,Z)=>(B(),$(Y,{key:Z+w.name,onClick:Vt=>h(Z),class:Re([d.value===Z?"bg-light-blue-darken-2":"","pa-0 list-item"]),"min-height":"24",height:"24"},{default:l(()=>[e(J,{textContent:p(w.name)},null,8,["textContent"])]),_:2},1032,["onClick","class"]))),128))]),_:1}),k("p",_t,[U(p(i(a)("列出"))+"(",1),x[6]||(x[6]=k("span",{class:"text-decoration-underline"},"L",-1)),x[7]||(x[7]=U("):",-1))]),e(Ce,{class:"",modelValue:C.value,"onUpdate:modelValue":x[0]||(x[0]=w=>C.value=w),items:N.value},null,8,["modelValue","items"])]),_:1}),e(ie,{cols:6,"align-self":"start"},{default:l(()=>[e(z,{class:"mt-5 w-100",onClick:R},{default:l(()=>[e(F,{"key-name":"U"},{default:l(()=>[U(p(i(a)("置为当前")),1)]),_:1})]),_:1}),e(z,{class:"mt-2 w-100",onClick:G},{default:l(()=>[e(F,{"key-name":"N"},{default:l(()=>[U(p(i(a)("新建")),1)]),_:1}),e(H,{icon:"class:iconfont more"})]),_:1}),e(z,{class:"mt-2 w-100",onClick:ve},{default:l(()=>[e(F,{"key-name":"M"},{default:l(()=>[U(p(i(a)("修改")),1)]),_:1}),e(H,{icon:"class:iconfont more"})]),_:1}),e(z,{class:"mt-2 w-100",onClick:Ve,disabled:!r.value},{default:l(()=>[e(F,{"key-name":"D"},{default:l(()=>[U(p(i(a)("删除")),1)]),_:1}),e(H,{icon:"class:iconfont more"})]),_:1},8,["disabled"]),e(z,{class:"mt-2 w-100",onClick:_e,disabled:!r.value},{default:l(()=>[e(F,{"key-name":"R"},{default:l(()=>[U(p(i(a)("重命名")),1)]),_:1}),e(H,{icon:"class:iconfont more"})]),_:1},8,["disabled"]),e(z,{class:"mt-2 w-100",onClick:ge},{default:l(()=>[e(F,{"key-name":"E"},{default:l(()=>[U(p(i(a)("继承")),1)]),_:1}),e(H,{icon:"class:iconfont more"})]),_:1})]),_:1})]),_:1})])]),_:1},8,["title","modelValue"]),e(Qe,{modelValue:n.showInputDialog,"onUpdate:modelValue":x[2]||(x[2]=w=>n.showInputDialog=w),title:n.inputDialog.title,label:n.inputDialog.label,"default-value":n.inputDialog.defaultValue,onConfirm:be},null,8,["modelValue","title","label","default-value"]),e(vt,{modelValue:n.showEditDialog,"onUpdate:modelValue":x[3]||(x[3]=w=>n.showEditDialog=w),style:q(n.editingStyle),"is-creating":n.isCreating,onSave:ke,onCancel:Se},null,8,["modelValue","style","is-creating"])],64)}}}),Ct=pe(bt,[["__scopeId","data-v-1f590fc8"]]);export{Ct as default};
