(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{28:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(9),a=n(1);function c(){return i.apply(this,arguments)}function i(){return(i=Object(r.B)(r.C.mark((function e(){var t,n,c,i,o,u,d,b,l;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.y).setMessage(Object(r.zd)("1595")+Object(r.zd)("1678")+":"),t.setUserInputControls(a.db.kNoZeroResponseAccepted|a.db.kNoNegativeResponseAccepted),e.next=1,t.go();case 1:if(null!=(n=e.sent)){e.next=2;break}return e.abrupt("return");case 2:return t.setMessage(Object(r.zd)("1595")+Object(r.zd)("1679")+":"),e.next=3,t.go();case 3:if(null!=(c=e.sent)){e.next=4;break}return e.abrupt("return");case 4:return e.next=5,a.lb.getCorner(Object(r.zd)("1595")+Object(r.zd)("1680"));case 5:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:return o=i.pt2.x-i.pt1.x,u=i.pt2.y-i.pt1.y,e.next=7,a.lb.userSelect(Object(r.zd)("1581")+Object(r.zd)("1681"));case 7:if(d=e.sent,b=a.lb.getMcDbEntitysBoundingBox(d)){e.next=8;break}return e.abrupt("return");case 8:(l=new a.wb).x=o>0?b.minPt.x:b.maxPt.x,l.y=u>0?b.minPt.y:b.maxPt.y,0,s({iColNum:c,iRowNum:n,dColOffset:o,dRowOffset:u,aryId:d,dAng:0});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=function(e){var t=e.iRowNum,n=void 0===t?0:t,c=e.iColNum,i=void 0===c?0:c,s=e.dColOffset,o=void 0===s?0:s,u=e.dRowOffset,d=void 0===u?0:u,b=e.aryId,l=void 0===b?[]:b,f=e.dAng,p=void 0===f?0:f,x=a.lb.getMcDbEntitysBoundingBox(l);if(x){var g=new a.wb;g.x=o>0?x.minPt.x:x.maxPt.x,g.y=d>0?x.minPt.y:x.maxPt.y;for(var v=(new a.K).setToRotation(p*Math.PI/180,a.Bb.kZAxis,g),h=0,y=0;y<n;y++)for(var w=new a.Bb(0,d*y,0),k=(new a.K).setToTranslation(w),m=0;m<i;m++)if(0!=y||0!=m){var O=new a.Bb(o*m,0,0),j=(new a.K).setToTranslation(O),C=new a.wb(g.x,g.y,g.z);C.transformBy(k),C.transformBy(j),C.transformBy(v);for(var P=(new a.K).setToTranslation(new a.Bb(C.x-g.x,C.y-g.y,C.z-g.z)),A=0;A<l.length;A++){var D=l[A].clone();if(D&&(D.transformBy(P),a.n.getCurrentMxCAD().drawEntity(D),++h>5e4))return void a.hb.acutPrintf(Object(r.zd)("1682")+5e4+Object(r.zd)("1683")+"\n")}Object(r.y)()}}}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return l}));var r=n(3),a=n(9),c=n(6),i=n(5),s=n(0);n(1);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u,d=!1,b=function(e){var t=u,n=t.setValue;t.setLayerList;var r=Object(i.d)(u).list;n("visible",e="boolean"==typeof e?e:d,r.value.map((function(e,t){return t}))),d=!e},l=function(e){var t=e.onAddLayer;u=Object(a.Dd)();var n=Object(c.c)("Shift"),l=Object(c.c)("Control"),f=u,p=f.add,x=f.remove,g=f.putCurrent,v=f.toggle,h=f.setValue,y=f.setIndex,w=f.getIndex,k=f.stringifyJSON;f.create;var m,O,j,C=f.initLayerList,P=f.setLayerList,A=Object(i.d)(u),D=A.index,M=A.list,E=A.currentLayer,z=A.rootId,I=function(){return Array.isArray(D.value)&&D.value.length>1},L=function(e,t){if(t&&t.target&&R(t.target),n.value){void 0===m&&(m=D.value);var r=Math.max(m,e),c=r===e?m:e;y(Object(a.Nb)(c,r))}else if(l.value){var i=[];if(Array.isArray(D.value)){var s=D.value.indexOf(e);s>=0&&D.value.length>1?(i=Object(a.Cd)(D.value)).splice(s,1):i=[].concat(Object(a.Cd)(D.value),[e])}else i=[D.value,e];y(i)}else y(e),m=e,S()},S=function(){O=Array.isArray(D.value)?D.value[D.value.length-1]:D.value},T=function(){t&&t(p()),n&&(m=M.value.length-1)},R=function(e){if(e)if("INPUT"===e.tagName)j=e;else{var t=null==e?void 0:e.getElementsByTagName("input")[0];t?j=t:R(e.parentNode)}},V=function(e){var t=w();if(!(Array.isArray(t)&&t.length>1)){var n=Array.isArray(t)?t[0]:t;E.value!==M.value[n]&&M.value[n].id!==z.value&&e&&setTimeout((function(){e.focus(),e.select()}))}},_=function(){var e=Array.isArray(D.value)?D.value:[D.value],t=[];S(),v("isSelect",M.value.map((function(n,r){return e.includes(r)||t.push(r),r}))),D.value=t},B=Object(a.Lb)({hasIcon:!0,iconType:"svg-icon",menuList:[{label:Object(a.zd)("213"),fn:function(){return g(void 0,!0)},disabled:I},{label:Object(a.zd)("1674"),fn:function(){return T()}},{label:Object(a.zd)("205"),fn:function(){return x()},disabled:function(){var e;if(I())return!1;var t=w(D.value);return t="number"==typeof t?t:t[0],(null===(e=M.value[t])||void 0===e?void 0:e.id)===z.value},icon:Object(a.Mb)("youjianshanchu")},{label:Object(a.zd)("4104"),tips:"F2",fn:function(){return V(j)},disabled:I,icon:Object(a.Mb)("youjianzhongmingming")},{line:!0},{label:Object(a.zd)("197"),fn:function(){y(M.value.map((function(e,t){return t})))}},{label:Object(a.zd)("4262"),fn:function(){return y([]),void S()}},{label:Object(a.zd)("4263"),fn:function(){return _()}}]}),N=Object(a.Ad)().createColor;Object(a.g)().createLineType;var W=Object(s.gb)([{name:Object(a.zd)("4264"),fun:function(){T()}},{name:Object(a.zd)("4265"),fun:function(){return x()}},{name:Object(a.zd)("213"),fun:function(){return g()}},{name:Object(a.zd)("4266"),fun:function(){b(),W[3].name=d?Object(a.zd)("4267"):Object(a.zd)("4266")}}]);return{onClickLayer:L,onClickStopTD:function(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),c=2;c<r;c++)a[c-2]=arguments[c];var i=a[0],s=a[1],o=a[2];return n.value||l.value?e.preventDefault():t.isSelect?I()?(e.stopPropagation(),h(i,s),!1):void h(i,s,o):h(i,s,o)},onClickLayerName:function(e,t){j=e.target,D.value===t&&V(j)},resumeIndex:function(){O&&y(O),O=void 0},reverseSelection:_,selectColor:function(e){Object(a.cd)("Mx_Color",{call:function(e,t){h("color",N(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(r.b)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.Ob)(e,t))),D)},color:e})},selectLineType:function(e){h("lineType",e,D)},setIndex:y,onRightClickLayer:function(e,t){(!I()||!M.value[e].isSelect)&&L(e,t)},initLayerList:C,setLayerList:function(){P(k())},list:M,bodyRightClickMenuOptions:B,isShiftKeyMultipleChoice:n,isCtrlKeyMultipleChoice:l,btnList:W,rootId:z}}},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(9),a=function(e){return new Promise(function(){var t=Object(r.B)(r.C.mark((function t(n){return r.C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.Wb.onConfirm((function(e){n(e)})),r.Wb.cancel((function(){n(!1)})),r.Wb.showDialog(!0,e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},c=function(){return{dialog:r.Wb,open:a}}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a={exports:{}};window,a.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./src/index.js":
/*!**********************!*\
            !*** ./src/index.js ***!
            \**********************/
/*! exports provided: default */function(e,t,n){n.r(t),n(
/*! ./sass/index.scss */
"./src/sass/index.scss");var r=n(
/*! ./js/init */
"./src/js/init.js").default.init;"undefined"!=typeof window&&(window.printJS=r),t.default=r},"./src/js/browser.js":
/*!***************************!*\
            !*** ./src/js/browser.js ***!
            \***************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!r.isIE()&&!!window.StyleMedia},isChrome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!e.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}};t.default=r},"./src/js/functions.js":
/*!*****************************!*\
            !*** ./src/js/functions.js ***!
            \*****************************/
/*! exports provided: addWrapper, capitalizePrint, collectStyles, addHeader, cleanUp, isRawHTML */function(e,t,n){n.r(t),n.d(t,"addWrapper",(function(){return i})),n.d(t,"capitalizePrint",(function(){return s})),n.d(t,"collectStyles",(function(){return o})),n.d(t,"addHeader",(function(){return d})),n.d(t,"cleanUp",(function(){return b})),n.d(t,"isRawHTML",(function(){return l}));var r=n(
/*! ./modal */
"./src/js/modal.js"),a=n(
/*! ./browser */
"./src/js/browser.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return'<div style="font-family:'+t.font+" !important; font-size: "+t.font_size+' !important; width:100%;">'+e+"</div>"}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t){for(var n="",r=(document.defaultView||window).getComputedStyle(e,""),a=0;a<r.length;a++)(-1!==t.targetStyles.indexOf("*")||-1!==t.targetStyle.indexOf(r[a])||u(t.targetStyles,r[a]))&&r.getPropertyValue(r[a])&&(n+=r[a]+":"+r.getPropertyValue(r[a])+";");return n+="max-width: "+t.maxWidth+"px !important; font-size: "+t.font_size+" !important;"}function u(e,t){for(var n=0;n<e.length;n++)if("object"===c(t)&&-1!==t.indexOf(e[n]))return!0;return!1}function d(e,t){var n=document.createElement("div");if(l(t.header))n.innerHTML=t.header;else{var r=document.createElement("h1"),a=document.createTextNode(t.header);r.appendChild(a),r.setAttribute("style",t.headerStyle),n.appendChild(r)}e.insertBefore(n,e.childNodes[0])}function b(e){e.showModal&&r.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var t="mouseover";(a.default.isChrome()||a.default.isFirefox())&&(t="focus"),window.addEventListener(t,(function n(){window.removeEventListener(t,n),e.onPrintDialogClose();var r=document.getElementById(e.frameId);r&&r.remove()}))}function l(e){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(e)}},"./src/js/html.js":
/*!************************!*\
            !*** ./src/js/html.js ***!
            \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./functions */
"./src/js/functions.js"),a=n(
/*! ./print */
"./src/js/print.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.default={print:function(e,t){var n,i="object"===c(n=e.printable)&&n&&(n instanceof HTMLElement||1===n.nodeType)?e.printable:document.getElementById(e.printable);i?(e.printableElement=function e(t,n){for(var a=t.cloneNode(),c=Array.prototype.slice.call(t.childNodes),i=0;i<c.length;i++)if(-1===n.ignoreElements.indexOf(c[i].id)){var s=e(c[i],n);a.appendChild(s)}switch(n.scanStyles&&1===t.nodeType&&a.setAttribute("style",Object(r.collectStyles)(t,n)),t.tagName){case"SELECT":a.value=t.value;break;case"CANVAS":a.getContext("2d").drawImage(t,0,0)}return a}(i,e),e.header&&Object(r.addHeader)(e.printableElement,e),a.default.send(e,t)):window.console.error("Invalid HTML element id: "+e.printable)}}},"./src/js/image.js":
/*!*************************!*\
            !*** ./src/js/image.js ***!
            \*************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./functions */
"./src/js/functions.js"),a=n(
/*! ./print */
"./src/js/print.js"),c=n(
/*! ./browser */
"./src/js/browser.js");t.default={print:function(e,t){e.printable.constructor!==Array&&(e.printable=[e.printable]),e.printableElement=document.createElement("div"),e.printable.forEach((function(t){var n=document.createElement("img");if(n.setAttribute("style",e.imageStyle),n.src=t,c.default.isFirefox()){var r=n.src;n.src=r}var a=document.createElement("div");a.appendChild(n),e.printableElement.appendChild(a)})),e.header&&Object(r.addHeader)(e.printableElement,e),a.default.send(e,t)}}},"./src/js/init.js":
/*!************************!*\
            !*** ./src/js/init.js ***!
            \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./browser */
"./src/js/browser.js"),a=n(
/*! ./modal */
"./src/js/modal.js"),c=n(
/*! ./pdf */
"./src/js/pdf.js"),i=n(
/*! ./html */
"./src/js/html.js"),s=n(
/*! ./raw-html */
"./src/js/raw-html.js"),o=n(
/*! ./image */
"./src/js/image.js"),u=n(
/*! ./json */
"./src/js/json.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=["pdf","html","image","json","raw-html"];t.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(e){throw e},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},t=arguments[0];if(void 0===t)throw new Error("printJS expects at least 1 attribute.");switch(d(t)){case"string":e.printable=encodeURI(t),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":for(var n in e.printable=t.printable,e.fallbackPrintable=void 0!==t.fallbackPrintable?t.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable,e)"printable"===n||"fallbackPrintable"===n||(e[n]=void 0!==t[n]?t[n]:e[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+d(t))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||"string"!=typeof e.type||-1===b.indexOf(e.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&a.default.show(e),e.onLoadingStart&&e.onLoadingStart();var l=document.getElementById(e.frameId);l&&l.parentNode.removeChild(l);var f=document.createElement("iframe");switch(r.default.isFirefox()?f.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):f.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),f.setAttribute("id",e.frameId),"pdf"!==e.type&&(f.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach((function(e){f.srcdoc+='<link rel="stylesheet" href="'+e+'">'}))),f.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(r.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var p=window.open(e.fallbackPrintable,"_blank");p.focus(),e.onIncompatibleBrowser()}catch(t){e.onError(t)}finally{e.showModal&&a.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else c.default.print(e,f);break;case"image":o.default.print(e,f);break;case"html":i.default.print(e,f);break;case"raw-html":s.default.print(e,f);break;case"json":u.default.print(e,f)}}}},"./src/js/json.js":
/*!************************!*\
            !*** ./src/js/json.js ***!
            \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./functions */
"./src/js/functions.js"),a=n(
/*! ./print */
"./src/js/print.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.default={print:function(e,t){if("object"!==c(e.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof e.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!e.properties||!Array.isArray(e.properties))throw new Error("Invalid properties array for your JSON data.");e.properties=e.properties.map((function(t){return{field:"object"===c(t)?t.field:t,displayName:"object"===c(t)?t.displayName:t,columnSize:"object"===c(t)&&t.columnSize?t.columnSize+";":100/e.properties.length+"%;"}})),e.printableElement=document.createElement("div"),e.header&&Object(r.addHeader)(e.printableElement,e),e.printableElement.innerHTML+=function(e){var t=e.printable,n=e.properties,a='<table style="border-collapse: collapse; width: 100%;">';e.repeatTableHeader&&(a+="<thead>"),a+="<tr>";for(var c=0;c<n.length;c++)a+='<th style="width:'+n[c].columnSize+";"+e.gridHeaderStyle+'">'+Object(r.capitalizePrint)(n[c].displayName)+"</th>";a+="</tr>",e.repeatTableHeader&&(a+="</thead>"),a+="<tbody>";for(var i=0;i<t.length;i++){a+="<tr>";for(var s=0;s<n.length;s++){var o=t[i],u=n[s].field.split(".");if(u.length>1)for(var d=0;d<u.length;d++)o=o[u[d]];else o=o[n[s].field];a+='<td style="width:'+n[s].columnSize+e.gridStyle+'">'+o+"</td>"}a+="</tr>"}return a+="</tbody></table>"}(e),a.default.send(e,t)}}},"./src/js/modal.js":
/*!*************************!*\
            !*** ./src/js/modal.js ***!
            \*************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r={show:function(e){var t=document.createElement("div");t.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),t.setAttribute("id","printJS-Modal");var n=document.createElement("div");n.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var a=document.createElement("div");a.setAttribute("class","printClose"),a.setAttribute("id","printClose"),n.appendChild(a);var c=document.createElement("span");c.setAttribute("class","printSpinner"),n.appendChild(c);var i=document.createTextNode(e.modalMessage);n.appendChild(i),t.appendChild(n),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById("printClose").addEventListener("click",(function(){r.close()}))},close:function(){var e=document.getElementById("printJS-Modal");e&&e.parentNode.removeChild(e)}};t.default=r},"./src/js/pdf.js":
/*!***********************!*\
            !*** ./src/js/pdf.js ***!
            \***********************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./print */
"./src/js/print.js"),a=n(
/*! ./functions */
"./src/js/functions.js");function c(e,t,n){var a=new window.Blob([n],{type:"application/pdf"});a=window.URL.createObjectURL(a),t.setAttribute("src",a),r.default.send(e,t)}t.default={print:function(e,t){if(e.base64){var n=Uint8Array.from(atob(e.printable),(function(e){return e.charCodeAt(0)}));c(e,t,n)}else{e.printable=/^(blob|http|\/\/)/i.test(e.printable)?e.printable:window.location.origin+("/"!==e.printable.charAt(0)?"/"+e.printable:e.printable);var r=new window.XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("error",(function(){Object(a.cleanUp)(e),e.onError(r.statusText,r)})),r.addEventListener("load",(function(){if(-1===[200,201].indexOf(r.status))return Object(a.cleanUp)(e),void e.onError(r.statusText,r);c(e,t,r.response)})),r.open("GET",e.printable,!0),r.send()}}}},"./src/js/print.js":
/*!*************************!*\
            !*** ./src/js/print.js ***!
            \*************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./browser */
"./src/js/browser.js"),a=n(
/*! ./functions */
"./src/js/functions.js"),c={send:function(e,t){document.getElementsByTagName("body")[0].appendChild(t);var n=document.getElementById(e.frameId);n.onload=function(){if("pdf"!==e.type){var t=n.contentWindow||n.contentDocument;if(t.document&&(t=t.document),t.body.appendChild(e.printableElement),"pdf"!==e.type&&e.style){var a=document.createElement("style");a.innerHTML=e.style,t.head.appendChild(a)}var c=t.getElementsByTagName("img");c.length>0?function(e){var t=e.map((function(e){if(e.src&&e.src!==window.location.href)return function(e){return new Promise((function(t){!function n(){e&&void 0!==e.naturalWidth&&0!==e.naturalWidth&&e.complete?t():setTimeout(n,500)}()}))}(e)}));return Promise.all(t)}(Array.from(c)).then((function(){return i(n,e)})):i(n,e)}else r.default.isFirefox()?setTimeout((function(){return i(n,e)}),1e3):i(n,e)}}};function i(e,t){try{if(e.focus(),r.default.isEdge()||r.default.isIE())try{e.contentWindow.document.execCommand("print",!1,null)}catch(t){e.contentWindow.print()}else e.contentWindow.print()}catch(e){t.onError(e)}finally{r.default.isFirefox()&&(e.style.visibility="hidden",e.style.left="-1px"),Object(a.cleanUp)(t)}}t.default=c},"./src/js/raw-html.js":
/*!****************************!*\
            !*** ./src/js/raw-html.js ***!
            \****************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! ./print */
"./src/js/print.js");t.default={print:function(e,t){e.printableElement=document.createElement("div"),e.printableElement.setAttribute("style","width:100%"),e.printableElement.innerHTML=e.printable,r.default.send(e,t)}}},"./src/sass/index.scss":
/*!*****************************!*\
            !*** ./src/sass/index.scss ***!
            \*****************************/
/*! no static exports found */function(e,t,n){},0:
/*!****************************!*\
            !*** multi ./src/index.js ***!
            \****************************/
/*! no static exports found */function(e,t,n){e.exports=n(
/*! ./src/index.js */
"./src/index.js")}}).default;var c=a.exports;const i=Object(r.c)(c)},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=function(){return{dialog:r.Lc}}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a}));var r=n(9),a=function(){return{dialog:r.Nc}},c=function(e){return r.Nc&&r.Nc.showDialog(!0,e,200)}},74:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(1),c=n(28),i=n(34),s=n(4),o=n(32),u=n(3),d=n(30),b=n(33),l=n(5),f=n(31),p=n(8),x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(){var c=Object(r.B)(r.C.mark((function c(i,s){var o,u;return r.C.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:0==(o=a.n.App.getCurrentMxCAD().getCurrentOriginaFileName()).length?o="temp_empty"+Object(r.md)(!0):(-1==o.indexOf(".")||o.substring(o.length-6)!=Object(r.md)(!0))&&(o+=Object(r.md)(!0)),u=o,c.next=2;break;case 1:u=c.sent;case 2:!a.n.App.getCurrentMxCAD().saveFile(o,function(){var e=Object(r.B)(r.C.mark((function e(t){var n,a;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),n=a?new Blob([t.buffer],{type:"application/octet-stream"}):new Blob([t.buffer],{type:"application/octet-binary"});try{i({blob:n,data:t,filename:u})}catch(e){s(e),console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t,n,e?void 0:{compression:0})&&s(Object(r.zd)("1697"));case 3:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}())},g=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=2;break;case 1:e.next=5;break;case 2:return t=Object(r.od)(),e.next=3,x(!0,!1,!1);case 3:return n=e.sent,c=n.filename,i=n.blob,n.data,e.next=4,Object(a.U)({blob:i,filename:c,types:[{description:"webcad File",accept:{"application/octet-stream":[Object(r.md)(!0)]}}]});case 4:t&&Object(r.cd)("MxFullScreen");case 5:e.next=7;break;case 6:e.prev=6,s=e.catch(0),console.error(s);case 7:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.B)(r.C.mark((function e(){var t;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 2:e.next=4;break;case 3:e.prev=3,t=e.catch(1),console.error(t);case 4:e.next=6;break;case 5:return e.next=6,g();case 6:case"end":return e.stop()}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();function h(e,t){return y.apply(this,arguments)}function y(){return(y=Object(r.B)(r.C.mark((function e(t,n){var c,s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t+"_preloading.json",e.next=1,a.k.getJsonFromUrl(c);case 1:if(s=e.sent,o={ok:!0,tz:!1},s){e.next=2;break}return e.abrupt("return",new Promise((function(e,t){e(o)})));case 2:if(s.tz&&(o.tz=s.tz),u=[],s.images.forEach((function(e){"http:"!=e.substring(0,5)&&"https:"!=e.substring(0,6)&&u.push(e)})),s.images=u,0!==s.images.length||0!==s.externalReference.length){e.next=3;break}return e.abrupt("return",new Promise((function(e,t){e(o)})));case 3:return s.hash=n,e.next=4,Object(i.a)(s);case 4:return null!=(d=e.sent)&&d.data?o.ok=!0:o.ok=!1,e.abrupt("return",new Promise((function(e,t){e(o)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.x).setMessage(Object(r.zd)("1638")),t.setUserDraw((function(e){n=e})),e.next=1,t.go();case 1:if(c=e.sent){e.next=2;break}return e.abrupt("return");case 2:if(c.isValid()){e.next=3;break}return e.abrupt("return");case 3:if(i=c.getMcDbCurve()){e.next=4;break}return e.abrupt("return");case 4:if(i instanceof a.jb){e.next=5;break}return e.abrupt("return");case 5:return(s=new a.ob).setUserDraw((function(e,t){if(i&&n){var r=i.clone();r&&(r.move(n,e),t.drawMcDbEntity(r))}})),e.next=6,s.go();case 6:if(o=e.sent){e.next=7;break}return e.abrupt("return");case 7:if(u=i.clone()){e.next=8;break}return e.abrupt("return");case 8:if(u.move(n,o),!(i instanceof a.xb)){e.next=9;break}d=a.n.getCurrentMxCAD().drawEntity(u),(b=new a.a).copyFormAryId([d]),a.n.App.MxCADAssist.MxExplode(b.imp),e.next=11;break;case 9:if(0!==(l=u.getSamplePoints(.1)).GetCount()){e.next=10;break}return e.abrupt("return");case 10:p=a.n.getCurrentMxCAD(),l.forEach((function(e,t){if(1010===t){var n=new a.wb(e.x,e.y,e.z);if(f){var r=new a.vb;r.startPoint=f,r.endPoint=n,r.colorIndex=u.colorIndex,r.trueColor=u.trueColor,r.drawOrder=u.drawOrder,r.layer=u.layer,r.layerId=u.layerId,r.linetype=u.linetype,r.linetypeScale=u.linetypeScale,r.lineweight=r.lineweight,r.textStyle=r.textStyle,p.drawEntity(r)}f=n}})),p.updateDisplay();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function k(e,t,n){var r,a=t.clone(),c=n.clone(),i=e.clone(),s=i.sub(a),o=c.sub(a),u=i.sub(c),d=s.crossProduct(o).length()/o.length(),b=s.dotProduct(o),l=o.clone().mult(b/Math.pow(o.length(),2));return a.clone().addvec(l),r=b<0?s.length():b>Math.pow(o.length(),2)?u.length():d,Math.floor(r)}Object(r.Pb)("_SampleCurve",w);var m=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,m,O,j,C,P,A,D,M,E,z;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.n.getCurrentMxCAD(),(n=new a.ob).setMessage(Object(r.zd)("1601")),n.setKeyWords(""),e.next=1,n.go();case 1:if(c=e.sent,n.getStatus()!==a.w.kNone){e.next=12;break}o=new a.x,(u=new a.p).AddMcDbEntityTypes("CIRCLE,ARC,LINE,LWPOLYLINE"),b=function(e,t){d=e;var n=a.lb.findEntAtPoint(e.x,e.y,e.z,-1,u);if(n&&n.isValid()){var r=n.getMcDbEntity();r&&(s&&s.highlight(!1),r.highlight(!0),s=r)}};case 2:return o.setMessage(Object(r.zd)("1603")),o.setUserDraw(b),o.setFilter(u),e.next=3,o.go();case 3:if(l=e.sent,f=l.getMcDbEntity(),s&&s.highlight(!1),o.getStatus()!==a.w.kCancel){e.next=4;break}return e.abrupt("return");case 4:if(!(f instanceof a.Ab)){e.next=6;break}if(p=f.getStartPoint().val,x=f.radius,g=a.Bb.kXAxis.clone().rotateBy(f.endAngle).mult(x),v=f.center,h=v.clone().addvec(g),p&&h){e.next=5;break}return e.abrupt("return");case 5:return c=p,i=h,e.abrupt("continue",12);case 6:if(!(f instanceof a.Db)){e.next=8;break}if(y=f.center,w=f.getStartPoint().val){e.next=7;break}return e.abrupt("return");case 7:return c=w,i=w.clone().addvec(y.sub(w).mult(2)),e.abrupt("continue",12);case 8:if(!(f instanceof a.vb)){e.next=9;break}return c=f.startPoint,i=f.endPoint,e.abrupt("continue",12);case 9:if(!(f instanceof a.xb)){e.next=10;break}for(m=0;m<f.numVerts();m++)O=f.getPointAt(m).val,j=f.getPointAt(m+1).val,C=f.getClosestPointTo(d,!1).val,j&&0===k(C,O,j)&&(c=O,i=j);return e.abrupt("continue",12);case 10:return a.hb.acutPrintf("\n"+Object(r.zd)("1604")),e.abrupt("continue",2);case 11:e.next=2;break;case 12:if(c){e.next=13;break}return e.abrupt("return");case 13:if(i){e.next=15;break}return n.setMessage(Object(r.zd)("1605")),n.setUserDraw((function(e,t){c&&t.drawMcDbLine(c.x,c.y,c.z,e.x,e.y,e.z)})),e.next=14,n.go();case 14:if(i=e.sent){e.next=15;break}return e.abrupt("return");case 15:E=r.C.mark((function e(){var o,u,d,b,l,f,p,x,g,v,h,y,w,k;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage(Object(r.zd)("1606")),n.setKeyWords("[".concat(Object(r.zd)("1607"),"(T)/").concat(Object(r.zd)("169"),"(A)").concat(void 0===M?Object(r.zd)("1612")+"/(H)/"+Object(r.zd)("1613")+"(V)":"","/").concat(Object(r.zd)("176"),"(R)]")),n.clearLastInputPoint(),u=c.clone(),d=i.clone(),n.setUserDraw((function(e){if(c&&i){o&&o.erase(),s instanceof a.Db&&(b||(b=s.center.clone().addvec(a.Bb.kXAxis.clone().rotateBy(Math.PI/2).mult(s.radius))),l||(l=s.center.clone().addvec(a.Bb.kXAxis.clone().rotateBy(-Math.PI/2).mult(s.radius))),e.y<b.y&&e.y>l.y&&(e.x>c.x||e.x<i.x)&&(c=b,i=l),e.x<u.x&&e.x>d.x&&(e.y>b.y||e.y<l.y)&&(c=u,i=d)),"H"===M&&(e.x<c.x?e.x=c.x:e.x>i.x&&(e.x=i.x)),"V"===M&&(e.y<c.y&&(e.y=c.y),e.y>i.y&&(e.y=i.y));var n=(o=t.drawDimRotated(c.x,c.y,i.x,i.y,e.x,e.y,D||0)).getMcDbDimension();n&&(n.textPosition=e,n.useSetTextPosition(),P&&(n.dimensionText=P),A&&(n.textRotation=A),n.trueColor=new a.C(0,255,0))}})),e.next=1,n.go();case 1:if(f=e.sent,!n.isKeyWordPicked("T")){e.next=4;break}return(x=new a.z).clearLastInputPoint(),x.setMessage("".concat(Object(r.zd)("1608"),"<").concat(P||(null===(p=o.getMcDbDimension())||void 0===p?void 0:p.dimensionText)||"",">")),x.setKeyWords(""),e.next=2,x.go();case 2:if("string"==typeof(g=e.sent)){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return P=g,o&&o.erase(),e.abrupt("return",0);case 4:if(o&&o.erase(),!n.isKeyWordPicked("A")){e.next=8;break}return(v=new a.ub).clearLastInputPoint(),v.setMessage(Object(r.zd)("1597")),e.next=5,v.go();case 5:if(h=e.sent){e.next=6;break}return e.abrupt("return",{v:void 0});case 6:if(v.getStatus()!==a.w.kCancel){e.next=7;break}return e.abrupt("return",{v:void 0});case 7:return A=v.getDetailedResult()===a.e.kCoordIn?h*(Math.PI/180):h,e.abrupt("return",0);case 8:if(!n.isKeyWordPicked("H")){e.next=9;break}return M="H",e.abrupt("return",0);case 9:if(!n.isKeyWordPicked("V")){e.next=10;break}return M="V",e.abrupt("return",0);case 10:if(!n.isKeyWordPicked("R")){e.next=14;break}return(y=new a.ub).clearLastInputPoint(),y.setMessage(Object(r.zd)("1615")),e.next=11,y.go();case 11:if(w=e.sent){e.next=12;break}return e.abrupt("return",{v:void 0});case 12:if(y.getStatus()!==a.w.kCancel){e.next=13;break}return e.abrupt("return",{v:void 0});case 13:return D=y.getDetailedResult()===a.e.kCoordIn?w*(Math.PI/180):w,e.abrupt("return",0);case 14:if(f){e.next=15;break}return e.abrupt("return",{v:void 0});case 15:if("H"===M&&(f.x<c.x?f.x=c.x:f.x>i.x&&(f.x=i.x)),"V"===M&&(f.y<c.y&&(f.y=c.y),f.y>i.y&&(f.y=i.y)),o=t.drawDimRotated(c.x,c.y,i.x,i.y,f.x,f.y,D||0),k=o.getMcDbDimension()){e.next=16;break}return e.abrupt("return",{v:void 0});case 16:return k.textPosition=f,k.useSetTextPosition(),P&&(k.dimensionText=P),A&&(k.textRotation=A),k.trueColor=new a.C(0,255,0),t.updateDisplay(),e.abrupt("return",1);case 17:case"end":return e.stop()}}),e)}));case 16:return e.delegateYield(E(),"t0",17);case 17:if(0!==(z=e.t0)){e.next=18;break}return e.abrupt("continue",16);case 18:if(1!==z){e.next=19;break}return e.abrupt("continue",21);case 19:if(!z){e.next=20;break}return e.abrupt("return",z.v);case 20:e.next=16;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.Pb)("_DrawRotatedDimension",m);var O=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,m,O,j,C,P,A,D,M;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.n.getCurrentMxCAD(),console.log(t.drawDimStyle),(n=new a.ob).setMessage("".concat(Object(r.zd)("1601"),"<").concat(Object(r.zd)("1602"),">")),n.setKeyWords(""),e.next=1,n.go();case 1:if(c=e.sent,n.getStatus()!==a.w.kNone){e.next=12;break}s=new a.x,(o=new a.p).AddMcDbEntityTypes("CIRCLE,ARC,LINE,LWPOLYLINE"),b=function(e,t){u=e;var n=a.lb.findEntAtPoint(e.x,e.y,e.z,-1,o);if(n&&n.isValid()){var r=n.getMcDbEntity();r&&(d&&d.highlight(!1),r.highlight(!0),d=r)}};case 2:return s.setMessage(Object(r.zd)("1603")),s.setUserDraw(b),s.setFilter(o),e.next=3,s.go();case 3:if(l=e.sent,f=l.getMcDbEntity(),d&&d.highlight(!1),s.getStatus()!==a.w.kCancel){e.next=4;break}return e.abrupt("return");case 4:if(!(f instanceof a.Ab)){e.next=6;break}if(p=f.getStartPoint().val,x=f.radius,g=a.Bb.kXAxis.clone().rotateBy(f.endAngle).mult(x),v=f.center,h=v.clone().addvec(g),p&&h){e.next=5;break}return e.abrupt("return");case 5:return c=p,i=h,e.abrupt("continue",12);case 6:if(!(f instanceof a.Db)){e.next=8;break}if(y=f.center,w=f.getClosestPointTo(u,!1).val){e.next=7;break}return e.abrupt("return");case 7:return c=w,i=w.clone().addvec(y.sub(w).mult(2)),e.abrupt("continue",12);case 8:if(!(f instanceof a.vb)){e.next=9;break}return c=f.startPoint,i=f.endPoint,e.abrupt("continue",12);case 9:if(!(f instanceof a.xb)){e.next=10;break}for(m=0;m<f.numVerts();m++)O=f.getPointAt(m).val,j=f.getPointAt(m+1).val,C=f.getClosestPointTo(u,!1).val,j&&0===k(C,O,j)&&(c=O,i=j);return e.abrupt("continue",12);case 10:return a.hb.acutPrintf("\n"+Object(r.zd)("1604")),e.abrupt("continue",2);case 11:e.next=2;break;case 12:if(c){e.next=13;break}return e.abrupt("return");case 13:if(i){e.next=15;break}return n.setMessage(Object(r.zd)("1605")),n.setUserDraw((function(e,t){c&&t.drawMcDbLine(c.x,c.y,c.z,e.x,e.y,e.z)})),e.next=14,n.go();case 14:if(i=e.sent){e.next=15;break}return e.abrupt("return");case 15:D=r.C.mark((function e(){var s,o,u,d,b,l,f,p;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage(Object(r.zd)("1606")),n.setKeyWords("[".concat(Object(r.zd)("1607"),"(T)/").concat(Object(r.zd)("169"),"(A)]")),n.clearLastInputPoint(),n.setUserDraw((function(e){if(c&&i){s&&s.erase();var n=(s=t.drawDimAligned(c.x,c.y,i.x,i.y,e.x,e.y)).getMcDbDimension();n&&(P&&(n.dimensionText=P),A&&(n.textRotation=A))}})),e.next=1,n.go();case 1:if(o=e.sent,!n.isKeyWordPicked("T")){e.next=4;break}return(d=new a.z).clearLastInputPoint(),d.setMessage("".concat(Object(r.zd)("1608"),"<").concat(P||(null===(u=s.getMcDbDimension())||void 0===u?void 0:u.dimensionText)||"",">")),d.setKeyWords(""),e.next=2,d.go();case 2:if("string"==typeof(b=e.sent)){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return P=b,s&&s.erase(),e.abrupt("return",0);case 4:if(s&&s.erase(),!n.isKeyWordPicked("A")){e.next=8;break}return(l=new a.ub).clearLastInputPoint(),l.setMessage(Object(r.zd)("1597")),e.next=5,l.go();case 5:if(f=e.sent){e.next=6;break}return e.abrupt("return",{v:void 0});case 6:if(l.getStatus()!==a.w.kCancel){e.next=7;break}return e.abrupt("return",{v:void 0});case 7:return A=l.getDetailedResult()===a.e.kCoordIn?f*(Math.PI/180):f,e.abrupt("return",0);case 8:if(o){e.next=9;break}return e.abrupt("return",{v:void 0});case 9:if(s=t.drawDimAligned(c.x,c.y,i.x,i.y,o.x,o.y),p=s.getMcDbDimension()){e.next=10;break}return e.abrupt("return",{v:void 0});case 10:return p.textPosition=o,P&&(p.dimensionText=P),A&&(p.textRotation=A),t.updateDisplay(),e.abrupt("return",1);case 11:case"end":return e.stop()}}),e)}));case 16:return e.delegateYield(D(),"t0",17);case 17:if(0!==(M=e.t0)){e.next=18;break}return e.abrupt("continue",16);case 18:if(1!==M){e.next=19;break}return e.abrupt("continue",21);case 19:if(!M){e.next=20;break}return e.abrupt("return",M.v);case 20:e.next=16;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function j(){return(j=Object(r.B)(r.C.mark((function e(){var t;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.hb.getCurrentDraw().getViewAngle(),t-=.5*Math.PI,a.n.getCurrentMxCAD().zoomAngle(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.A).setMessage(Object(r.zd)("1564")),t.setKeyWords("[".concat(Object(r.zd)("1565")," UCS(C)/").concat(Object(r.zd)("1566"),"(W)/").concat(Object(r.zd)("169"),"(A)/").concat(Object(r.zd)("1567"),"(X)]")),e.next=1,t.go();case 1:if(null==(n=e.sent)||n.toLocaleLowerCase(),null==n||n.toLocaleLowerCase(),"a"!==(null==n?void 0:n.toLocaleLowerCase())){e.next=4;break}return(c=new a.ub).clearLastInputPoint(),c.setMessage(Object(r.zd)("1568")),e.next=2,c.go();case 2:if(i=e.sent){e.next=3;break}return e.abrupt("return");case 3:c.getDetailedResult()===a.e.kCoordIn&&(i*=Math.PI/180),a.n.getCurrentMxCAD().zoomAngle(i);case 4:if("x"!==(null==n?void 0:n.toLocaleLowerCase())){e.next=7;break}return(s=new a.ub).clearLastInputPoint(),s.setMessage(Object(r.zd)("1569")),e.next=5,s.go();case 5:if(o=e.sent){e.next=6;break}return e.abrupt("return");case 6:s.getDetailedResult()===a.e.kCoordIn&&(o*=Math.PI/180),u=a.hb.getCurrentDraw().getViewAngle(),u+=o,a.n.getCurrentMxCAD().zoomAngle(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){var n=document.timeline?document.timeline.currentTime:performance.now(),r=!1;return function a(c){if(!r){var i=c-n,s=Math.round(i/e);t(s);var o=(s+1)*e+n,u=document.timeline?document.timeline.currentTime:performance.now();return setTimeout((function(){requestAnimationFrame(a)}),o-u)}}(n),function(){r=!0}}function A(e,t,n){for(var r=t,a=n;a-r>1e-4;){var c=(r+a)/2;Math.floor(e/c)*c>e||c<t?a=c:r=c}return e/Math.floor(e/r)}function D(e,t,n,r){var a=e.distanceTo(t),c=[],i=A(a,n,r);if(isNaN(i))return c;for(var s=a/i,o=t.sub(e).normalize(),u=0;u<s;u++)c.push(e.clone().addvec(o.clone().mult(i*u)));return c}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.wb,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.wb,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI,c=[];n=Math.max(3,n),c.push(t);for(var i=r/n,s=1;s<n;s++){var o=Math.cos(i*s),u=Math.sin(i*s),d=e.clone(),b=t.clone(),l=b.x-d.x,f=b.y-d.y,p=l*o-f*u+d.x,x=l*u+f*o+d.y,g=new a.wb(p,x);c.push(g)}return c}Object(r.Pb)("_DrawAlignedDimension",O),Object(r.Pb)("Mx_Plan90CCW",(function(){return j.apply(this,arguments)})),Object(r.Pb)("Mx_Plan",(function(){return C.apply(this,arguments)})),Object(r.Pb)("_ViewColor",(function(){var e=a.n.getCurrentMxCAD(),t=e.mxdraw.getViewColor(),n=Object(r.Ad)().createColor;Object(r.cd)("Mx_Color",{color:n({color:Object(s.a)(t).toString()}),call:function(t){var n=Object(s.a)(t),r=n.red(),c=n.green(),i=n.blue();e.setViewBackgroundColor(r,c,i),a.hb.callEvent("updateBackgroundColor",new a.C(r,c,i))}})}));var E=function(e,t){return[e,new a.wb(e.x,t.y,e.z),t,new a.wb(t.x,e.y,t.z)]};function z(){return(z=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=function(e,t){e.colorIndex=t.colorIndex,e.trueColor=t.trueColor,e.drawOrder=t.drawOrder,e.layer=t.layer,e.layerId=t.layerId,e.linetype=t.linetype,e.linetypeScale=t.linetypeScale,e.lineweight=t.lineweight,e.textStyle=t.textStyle},t=a.hb.viewCoordLong2Cad(2),n=Number(localStorage.getItem("mx_revcloud_minArcLength")),c=Number(localStorage.getItem("mx_revcloud_maxArcLength")),(isNaN(n)||n<1e-4)&&(i=a.hb.viewCoordLong2Cad(12),localStorage.setItem("mx_revcloud_minArcLength",i.toString())),(isNaN(c)||c<1e-4)&&(s=a.hb.viewCoordLong2Cad(12),localStorage.setItem("mx_revcloud_maxArcLength",s.toString())),o=new a.ob,u=-.45,d=!1,b=!1,l=!1,p=r.C.mark((function e(){var i,s,p,x,g,v,h,y,w,k,m,O,j,C,z,I,L,S,T,R,V,_,B,N,W,K,U,F,H,Y;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(r.zd)("1616"),d&&(i=Object(r.zd)("1617")),b&&(i=Object(r.zd)("1618")),o.setMessage(i),o.setKeyWords("[".concat(Object(r.zd)("1619"),"(A)/").concat(Object(r.zd)("177"),"(O)/").concat(Object(r.zd)("178"),"(R)/").concat(Object(r.zd)("179"),"(P)/").concat(Object(r.zd)("180"),"(F)/").concat(Object(r.zd)("1624"),"(S)]")),s=new a.xb,o.clearLastInputPoint(),p=function(){var e=Object(r.B)(r.C.mark((function e(t){var n,a,c;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.clearLastInputPoint(),o.setMessage(Object(r.zd)("1625")),o.setKeyWords("[".concat(Object(r.zd)("1626"),"(Y)/").concat(Object(r.zd)("1627"),"(N)]")),e.next=1,o.go();case 1:if(o.isKeyWordPicked("Y"))for(n=t.numVerts(),a=0;a<n;a++)c=t.getBulgeAt(a),t.setBulgeAt(a,-c);return e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=1,o.go();case 1:if(x=e.sent,!o.isKeyWordPicked("A")){e.next=7;break}return(g=new a.zb).setMessage(Object(r.zd)("1628")),e.next=2,g.go();case 2:if("number"==typeof(v=e.sent)){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(!(v<1e-5)){e.next=4;break}return a.hb.acutPrintf("\n"+Object(r.zd)("1629")),e.abrupt("return",{v:void 0});case 4:return n=v,localStorage.setItem("mx_revcloud_minArcLength",v.toString()),h=function(){var e=Object(r.B)(r.C.mark((function e(){var t;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.setMessage(Object(r.zd)("1630")),e.next=1,g.go();case 1:if("number"==typeof(t=e.sent)){e.next=2;break}return e.abrupt("return",!1);case 2:if(!(t<1e-5)){e.next=3;break}return a.hb.acutPrintf("\n"+Object(r.zd)("1631")),e.abrupt("return");case 3:if(!(t<n)){e.next=5;break}return a.hb.acutPrintf("\n"+Object(r.zd)("1632")),e.next=4,h();case 4:return e.abrupt("return",e.sent);case 5:c=t,localStorage.setItem("mx_revcloud_maxArcLength",t.toString());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=5,h();case 5:if(!1!==e.sent){e.next=6;break}return e.abrupt("return",{v:void 0});case 6:return e.abrupt("return",0);case 7:if(!o.isKeyWordPicked("O")){e.next=16;break}return(y=new a.p).AddMcDbEntityTypes("CIRCLE,ARC,LINE,LWPOLYLINE,ELLIPSE"),e.next=8,a.lb.userSelect(Object(r.zd)("1602"),y);case 8:if(w=e.sent,k=w[0]){e.next=9;break}return e.abrupt("return",{v:void 0});case 9:if(m=k.getMcDbEntity()){e.next=10;break}return e.abrupt("return",{v:void 0});case 10:if(!(m instanceof a.xb)){e.next=12;break}for(s.isClosed=m.isClosed,s.constantWidth=m.constantWidth,f(s,m),O=m.numVerts(),C=0;C<O;C++)z=m.getPointAt(C).val,j&&z&&D(j,z,n,c).forEach((function(e){s.addVertexAt(e,u,void 0,l?t:void 0)})),j=z;return s.isClosed?D(j,m.getPointAt(0).val,n,c).forEach((function(e){s.addVertexAt(e,u,void 0,l?t:void 0)})):s.addVertexAt(j,u),e.next=11,p(s);case 11:return m.erase(),e.abrupt("return",{v:a.n.getCurrentMxCAD().drawEntity(s)});case 12:if(!(m instanceof a.vb)){e.next=14;break}return f(s,m),D(m.startPoint,m.endPoint,n,c).forEach((function(e){s.addVertexAt(e,u,void 0,l?t:void 0)})),s.addVertexAt(m.endPoint,u,void 0,l?t:void 0),e.next=13,p(s);case 13:return m.erase(),e.abrupt("return",{v:a.n.getCurrentMxCAD().drawEntity(s)});case 14:if(!(m instanceof a.Db)){e.next=16;break}return I=m.getLength().val,L=I/A(I,n,c),S=m.getStartPoint().val,M(m.center,S,L).forEach((function(e){s.addVertexAt(e,u,void 0,l?t:void 0)})),f(s,m),m instanceof a.Db&&(s.isClosed=!0),e.next=15,p(s);case 15:return m.erase(),e.abrupt("return",{v:a.n.getCurrentMxCAD().drawEntity(s)});case 16:if(!o.isKeyWordPicked("R")){e.next=17;break}return d=!0,b=!1,e.abrupt("return",0);case 17:if(!o.isKeyWordPicked("P")){e.next=18;break}return b=!0,d=!1,e.abrupt("return",0);case 18:if(!o.isKeyWordPicked("F")){e.next=19;break}return b=!1,d=!1,e.abrupt("return",0);case 19:if(!o.isKeyWordPicked("S")){e.next=25;break}return o.setMessage(Object(r.zd)("1633")),o.setKeyWords("[".concat(Object(r.zd)("1634"),"(N)/").concat(Object(r.zd)("1635"),"(C)]")),e.next=20,o.go();case 20:if(o.getDetailedResult()!==a.e.kEcsIn){e.next=21;break}return e.abrupt("return",{v:void 0});case 21:if(o.getDetailedResult()!==a.e.kNewCommadIn){e.next=22;break}return e.abrupt("return",{v:void 0});case 22:if(o.getStatus()!==a.w.kNone){e.next=23;break}return e.abrupt("return",{v:void 0});case 23:if(o.getStatus()!==a.w.kCancel){e.next=24;break}return e.abrupt("return",{v:void 0});case 24:return o.isKeyWordPicked("N")&&(l=!1),o.isKeyWordPicked("C")&&(l=!0),e.abrupt("return",0);case 25:if(x){e.next=26;break}return e.abrupt("return",{v:void 0});case 26:if(!d){e.next=29;break}return o.setMessage(Object(r.zd)("1610")),o.setMessage(""),T=function(e,a){if(x){var i=E(x,a),s=Object(r.jd)(i,4),o=s[0],d=s[1],b=s[2],f=s[3],p=x.x<a.x&&x.y<a.y||x.x>a.x&&x.y>a.y;[[o,d],[d,b],[b,f],[f,o]].forEach((function(a){var i=Object(r.jd)(a,2);D(i[0],i[1],n,c).forEach((function(n){e.addVertexAt(n,p?u:-u,void 0,l?t:void 0)}))})),e.isClosed=!0}},o.setUserDraw((function(e,t){var n=new a.xb;T(n,e),t.drawMcDbEntity(n)})),e.next=27,o.go();case 27:if(R=e.sent){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:return T(s,R),e.abrupt("return",{v:a.n.getCurrentMxCAD().drawEntity(s)});case 29:if(!b){e.next=37;break}(V=[]).push(x),_=function(e,r){var a;r.forEach((function(r){a&&D(a,r,n,c).forEach((function(n){e.addVertexAt(n,u,void 0,l?t:void 0)})),a=r})),r.length>2?(e.isClosed=!0,D(a,r[0],n,c).forEach((function(n){e.addVertexAt(n,u,void 0,l?t:void 0)}))):e.addVertexAt(a,u,void 0,l?t:void 0)},o.setUserDraw((function(e,t){var n=new a.xb;_(n,[].concat(V,[e])),t.drawMcDbEntity(n)}));case 30:return o.setMessage(Object(r.zd)("1636")),o.setKeyWords(V.length<2?"":"[".concat(Object(r.zd)("1552"),"(U)]")),e.next=31,o.go();case 31:if(B=e.sent,!o.isKeyWordPicked("U")){e.next=32;break}return V.pop(),o.clearLastInputPoint(),e.abrupt("continue",30);case 32:if(o.getDetailedResult()!==a.e.kNullEnterIn&&o.getDetailedResult()!==a.e.kMouseRightIn){e.next=34;break}return _(s,V),e.next=33,p(s);case 33:return e.abrupt("return",{v:a.n.getCurrentMxCAD().drawEntity(s)});case 34:if(B){e.next=35;break}return e.abrupt("return",{v:void 0});case 35:return V.push(B),e.abrupt("continue",30);case 36:e.next=42;break;case 37:return s.addVertexAt(x,u,void 0,l?t:void 0),N=x.clone(),W=0,K=x,U=function(){var e=Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(),e.next=1,p(s);case 1:a.n.getCurrentMxCAD().drawEntity(s);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.setMessage(Object(r.zd)("1637")+"..."),o.setKeyWords(""),o.setUserDraw((function(e,t){x&&(K=e,W=x.distanceTo(e),t.drawMcDbEntity(s.clone()),t.drawLine(x.toVector3(),e.toVector3()))})),o.clearLastInputPoint(),F=!1,H=P(20,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(W<n)){e.next=1;break}return e.abrupt("return");case 1:if(!(K.distanceTo(N)<n)){e.next=2;break}return s.isClosed=!0,a.hb.stopRunCommand(),F=!0,e.abrupt("return");case 2:s.addVertexAt(K,u,void 0,l?t:void 0),x=K,W=0;case 3:case"end":return e.stop()}}),e)})))),e.next=38,o.go();case 38:if(Y=e.sent,o.getDetailedResult()!==a.e.kMouseRightIn&&o.getDetailedResult()!==a.e.kNullEnterIn){e.next=39;break}return e.next=39,U();case 39:if(Y||F){e.next=40;break}return e.abrupt("return",{v:H()});case 40:return Y&&s.addVertexAt(Y,u,void 0,l?t:void 0),e.next=41,U();case 41:return e.abrupt("return",1);case 42:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(p(),"t0",2);case 2:if(0!==(x=e.t0)){e.next=3;break}return e.abrupt("continue",1);case 3:if(1!==x){e.next=4;break}return e.abrupt("continue",6);case 4:if(!x){e.next=5;break}return e.abrupt("return",x.v);case 5:e.next=1;break;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,u,d,b;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(r.od)(),n=function(){t&&Object(r.cd)("MxFullScreen")},c=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:210,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:297,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=Object(r.kd)()||{},d=u.baseUrl,b=void 0===d?"":d,l=u.mxfilepath,f=void 0===l?"":l,p=u.printPdfUrl,x=void 0===p?"":p,g={width:""+c,height:""+i,roate_angle:s,bd_pt1_x:""+e.x,bd_pt1_y:""+e.y,bd_pt2_x:""+t.x,bd_pt2_y:""+t.y};a.n.getCurrentMxCAD().saveFileToUrl(x,(function(e,t){try{var r=JSON.parse(t);if("ok"==r.ret){var a=b+f+r.file;Object(o.a)(a),n()}else console.log(t)}catch(e){console.log("Mx: sserverResult error")}}),void 0,JSON.stringify(g))},a.hb.acutPrintf("\n"+Object(r.zd)("1570")),i=a.n.getCurrentMxCAD(),0,s=!1,u=r.C.mark((function e(){var t,o,u,b,l,f,p,x,g,v,h,y,w,k,m,O;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.ob).setMessage("\n"+Object(r.zd)("1571")+":"),t.setKeyWords("[".concat(Object(r.zd)("1572"),"(S)/[").concat(Object(r.zd)("1573"),"(D)]")),t.disableAllTrace(),e.next=1,t.go();case 1:if(o=e.sent,!t.isKeyWordPicked("D")){e.next=2;break}s=!0,e.next=15;break;case 2:if(!t.isKeyWordPicked("S")){e.next=11;break}return(u=new a.A).setMessage(Object(r.zd)("1574")),u.setKeyWords("[A1(A)/A2(B)/A3(C)/A4(D)/".concat(Object(r.zd)("170"),"16.55x23.90(E)]")),u.setDisableDynInput(!0),e.next=3,u.go();case 3:if(b=e.sent){e.next=4;break}return e.abrupt("return",{v:void 0});case 4:if((l={A:{w:594,h:841},B:{w:420,h:594},C:{w:297,h:420},D:{w:210,h:297},E:{w:165.5,h:239,nw:130,nh:190}})[b]){e.next=5;break}return e.abrupt("return",{v:void 0});case 5:return(f=new a.z).setMessage("".concat(Object(r.zd)("1576"),"(").concat(Object(r.zd)("1577"),")")),e.next=6,f.go();case 6:if(p=e.sent){e.next=7;break}return e.abrupt("return",{v:void 0});case 7:if(d=parseFloat(p),!isNaN(d)){e.next=8;break}return a.hb.acutPrintf(Object(r.zd)("1578")),e.abrupt("return",{v:void 0});case 8:return x=l[b].w*d,g=l[b].h*d,v=0,h=0,l[b].nw&&(v=l[b].nw*d),l[b].nh&&(h=l[b].nh*d),s&&(y=x,x=g,g=y,y=v,v=h,h=y),(t=new a.ob).disableAllTrace(),t.setMessage("\n"+Object(r.zd)("1579")),t.setKeyWords(""),t.setUserDraw((function(e,t){t.setColor(16711680);var n=new a.xb,r=new a.wb(e.x-.5*x,e.y-.5*g),c=new a.wb(e.x-.5*x,e.y+.5*g),s=new a.wb(e.x+.5*x,e.y+.5*g),o=new a.wb(e.x+.5*x,e.y-.5*g);n.addVertexAt(r),n.addVertexAt(c),n.addVertexAt(s),n.addVertexAt(o),n.constantWidth=a.hb.screenCoordLong2Doc(2),n.isClosed=!0,t.drawMcDbEntity(n);var u=[];if(u.push(r.toVector3()),u.push(c.toVector3()),u.push(s.toVector3()),u.push(o.toVector3()),t.setColor(12868),t.drawSolid(u,.5),v>0&&h>0){var d=new a.wb(e.x-.5*v,e.y-.5*h),b=new a.wb(e.x-.5*v,e.y+.5*h),l=new a.wb(e.x+.5*v,e.y+.5*h),f=new a.wb(e.x+.5*v,e.y-.5*h),p=[];p.push(d.toVector3()),p.push(b.toVector3()),p.push(l.toVector3()),p.push(f.toVector3()),p.push(d.toVector3());var y=i.mxdraw.viewCoordLong2Cad(3),w=a.j.createDashedLines(p,16777215,2*y,y);t.drawEntity(w)}})),e.next=9,t.go();case 9:if(w=e.sent){e.next=10;break}return e.abrupt("return",{v:n()});case 10:return k=new a.wb(w.x-.5*x,w.y-.5*g),m=new a.wb(w.x+.5*x,w.y+.5*g),c(k,m,s?l[b].h:l[b].w,s?l[b].w:l[b].h,0),e.abrupt("return",{v:void 0});case 11:if(o){e.next=12;break}return e.abrupt("return",{v:n()});case 12:return t.setMessage("\n"+Object(r.zd)("1580")+":"),t.setUserDraw((function(e,t){if(!o)return n();t.setColor(16711680);var r=new a.xb;r.addVertexAt(o),r.addVertexAt(new a.wb(o.x,e.y)),r.addVertexAt(e),r.addVertexAt(new a.wb(e.x,o.y)),r.constantWidth=a.hb.screenCoordLong2Doc(2),r.isClosed=!0,t.drawMcDbEntity(r);var c=[];c.push(o.toVector3()),c.push(new THREE.Vector3(o.x,e.y)),c.push(e.toVector3()),c.push(new THREE.Vector3(e.x,o.y)),t.setColor(12868),t.drawSolid(c,.5)})),t.setDisableOsnap(!0),t.setDisableOrthoTrace(!0),t.setDynamicInputType(a.Cb.kXYCoordInput),e.next=13,t.go();case 13:if(O=e.sent){e.next=14;break}return e.abrupt("return",{v:n()});case 14:return c(o,O,s?297:210,s?210:297,0),e.abrupt("return",{v:void 0});case 15:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(u(),"t0",2);case 2:if(!(b=e.t0)){e.next=3;break}return e.abrupt("return",b.v);case 3:e.next=1;break;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.hb.viewCoordLong2Cad(20),(n=new a.ob).setDisableDynInput(!0),n.setDynamicInputType(a.Cb.kNoInput),e.next=1,n.go();case 1:if(c=e.sent){e.next=2;break}return e.abrupt("return");case 2:return i=new a.xb,s=0,o=c,u=P(20,(function(){s<t||(i.addVertexAt(o),c=o,s=0)})),n.setUserDraw((function(e,t){c&&(o=e,s=c.distanceTo(e),t.drawMcDbEntity(i.clone()),t.drawLine(c.toVector3(),e.toVector3()))})),e.next=3,n.go();case 3:if(d=e.sent){e.next=4;break}return e.abrupt("return",u());case 4:u(),i.addVertexAt(d),a.n.getCurrentMxCAD().drawEntity(i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.zb).setMessage(Object(r.zd)("1598")),e.next=1,t.go();case 1:if(n=e.sent){e.next=2;break}return e.abrupt("return");case 2:return t.setMessage(Object(r.zd)("1599")),e.next=3,t.go();case 3:if(c=e.sent){e.next=4;break}return e.abrupt("return");case 4:return(i=new a.ob).clearLastInputPoint(),i.setMessage(Object(r.zd)("1600")),i.setUserDraw((function(e,t){var r=new a.Db,i=new a.Db;r.radius=n/2,i.radius=c/2,r.center=e,i.center=e,t.drawMcDbEntity(r),t.drawMcDbEntity(i)})),e.next=5,i.go();case 5:if(s=e.sent){e.next=6;break}return e.abrupt("return");case 6:o=Math.abs(n-c)/4,u=Math.min(n,c),d=s.clone().addvec(a.Bb.kXAxis.clone().mult(u/2+o)),b=s.clone().addvec(a.Bb.kXAxis.clone().negate().mult(u/2+o)),l=new a.xb,1,l.addVertexAt(d,1),l.addVertexAt(b,1),l.addVertexAt(d,1),l.isClosed=!0,l.constantWidth=2*o,a.n.getCurrentMxCAD().drawEntity(l);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.numVerts(),a=0;a<e.numVerts();a++){var c=e.getPointAt(a).val,i=e.getPointAt(a+1).val,s=e.getBulgeAt(a);if(0===s){if(a+1===r&&e.isClosed&&(i=e.getPointAt(0).val),i&&k(t,c,i)<n)return{start:c,end:i,startIndex:a,endIndex:a+1}}else if(i){var o=e.getParamAtPoint(c).val,u=e.getParamAtPoint(i).val,d=e.getParamAtPoint(t).val;if(u>d&&d>o)return{start:c,end:i,startIndex:a,endIndex:a+1}}}if(e.isClosed){var b=e.getPointAt(0).val,l=e.getPointAt(e.numVerts()-1).val;if(k(t,l,b)<n)return{start:l,end:b,startIndex:e.numVerts()-1,endIndex:0,isClosed:!0}}}function R(){return(R=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,k,m,O,j,C,P,A;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.n.getCurrentMxCAD(),n=new a.x,(b=new a.p).AddMcDbEntityTypes("CIRCLE,ARC,LINE,LWPOLYLINE"),p=function(e,t){l=e;var n=a.lb.findEntAtPoint(e.x,e.y,e.z,-1,b);if(n&&n.isValid()){var r=n.getMcDbEntity();r&&(f&&f.highlight(!1),r.highlight(!0),f=r)}},x=r.C.mark((function e(){var t,x,g,v,h,y,w,k,m,O,j,C,P,A,D,M,E,z,I,L,S,R,V,_,B,N,W,K,U,F,H,Y,X;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage("".concat(Object(r.zd)("1581")).concat(Object(r.zd)("171"),"、").concat(Object(r.zd)("172"),"、").concat(Object(r.zd)("173")).concat(Object(r.zd)("1585")," <").concat(Object(r.zd)("1586"),">")),n.setUserDraw(p),n.setFilter(b),e.next=1,n.go();case 1:if(t=e.sent,x=t.getMcDbEntity(),f&&f.highlight(!1),n.getStatus()!==a.w.kCancel){e.next=2;break}return e.abrupt("return",{v:void 0});case 2:if(n.getStatus()!==a.w.kNone){e.next=9;break}return(g=new a.ob).clearLastInputPoint(),g.setMessage(Object(r.zd)("1587")),e.next=3,g.go();case 3:if(v=e.sent){e.next=4;break}return e.abrupt("return",{v:void 0});case 4:return g.setBasePt(v),g.setMessage(Object(r.zd)("1588")),e.next=5,g.go();case 5:if(h=e.sent){e.next=6;break}return e.abrupt("return",{v:void 0});case 6:return g.setMessage(Object(r.zd)("1589")),e.next=7,g.go();case 7:if(y=e.sent){e.next=8;break}return e.abrupt("return",{v:void 0});case 8:return c=v.x,i=v.y,s=h.x,o=h.y,u=y.x,d=y.y,e.abrupt("return",0);case 9:if(!(x instanceof a.Ab)){e.next=11;break}if(w=x.getStartPoint().val,k=x.radius,m=a.Bb.kXAxis.clone().rotateBy(x.endAngle).mult(k),O=x.center,j=O.clone().addvec(m),w&&j){e.next=10;break}return e.abrupt("return",{v:void 0});case 10:return s=w.x,o=w.y,u=j.x,d=j.y,c=O.x,i=O.y,e.abrupt("return",0);case 11:if(!(x instanceof a.Db)){e.next=14;break}return C=x.center,c=C.x,i=C.y,s=l.x,o=l.y,(P=new a.ob).setMessage(Object(r.zd)("1589")),e.next=12,P.go();case 12:if(A=e.sent){e.next=13;break}return e.abrupt("return",{v:void 0});case 13:return D=x.getClosestPointTo(A,!1).val,u=D.x,d=D.y,e.abrupt("return",0);case 14:if(!(x instanceof a.vb||x instanceof a.xb)){e.next=26;break}if(M=new a.x,(E=new a.p).AddMcDbEntityTypes("LINE,LWPOLYLINE"),M.setFilter(E),f=null,M.setUserDraw((function(e,t){p(e),z=e})),I=x.getClosestPointTo(l,!1).val,s=I.x,o=I.y,x instanceof a.vb?(L=x).highlight(!0):(S=T(x,I,2)||{},R=S.start,V=S.end,R&&V&&(L=new a.vb(R,V)),x.highlight(!1)),L){e.next=15;break}return e.abrupt("return",{v:void 0});case 15:return M.setMessage(Object(r.zd)("1590")),e.next=16,M.go();case 16:if(B=e.sent,M.getStatus()!==a.w.kCancel){e.next=17;break}return e.abrupt("return",{v:L.highlight(!1)});case 17:if(B){e.next=18;break}return e.abrupt("continue",15);case 18:if(B.isValid()){e.next=19;break}return e.abrupt("continue",15);case 19:if(N=B.getMcDbEntity(),W=void 0,!(N instanceof a.xb)){e.next=20;break}K=T(N,M.getDocPickPoint(),2)||{},U=K.start,F=K.end,W=new a.vb(U,F),N.highlight(!1),e.next=22;break;case 20:if(!(N instanceof a.vb)){e.next=21;break}W=N,e.next=22;break;case 21:return a.hb.acutPrintf("\n"+Object(r.zd)("1591")),e.abrupt("continue",15);case 22:if(W){e.next=23;break}return e.abrupt("return",{v:L.highlight(!1)});case 23:if(L.highlight(!1),W.highlight(!1),!(H=null===(_=L.clone())||void 0===_?void 0:_.IntersectWith(W.clone(),a.rb.Intersect.kExtendBoth)).isEmpty()){e.next=24;break}return e.abrupt("continue",15);case 24:return Y=H.at(0),X=W.getClosestPointTo(z,!1).val,u=X.x,d=X.y,c=Y.x,i=Y.y,e.abrupt("continue",25);case 25:return e.abrupt("return",0);case 26:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(x(),"t0",2);case 2:if(0!==(g=e.t0)){e.next=3;break}return e.abrupt("continue",5);case 3:if(!g){e.next=4;break}return e.abrupt("return",g.v);case 4:e.next=1;break;case 5:if((v=new a.ob).clearLastInputPoint(),![c,i,s,o,u,d].some((function(e){return"number"!=typeof e}))){e.next=6;break}return e.abrupt("return");case 6:return v.setMessage(Object(r.zd)("1592")),v.setKeyWords("[".concat(Object(r.zd)("174"),"(T)/").concat(Object(r.zd)("169"),"(A)/").concat(Object(r.zd)("175"),"(Q)]")),v.setUserDraw((function(e,t){var n=new a.V;n.compute(c,i,s,o,u,d,e.x,e.y),y&&(n.dimensionText=y),w&&(n.textRotation=w),t.drawMcDbEntity(n,!0)})),e.next=7,v.go();case 7:if(k=e.sent,!v.isKeyWordPicked("T")){e.next=10;break}return(O=new a.z).clearLastInputPoint(),O.setMessage("".concat(Object(r.zd)("1595")).concat(Object(r.zd)("1596"),"<").concat(y||(null===(m=h.getMcDbDimension())||void 0===m?void 0:m.dimensionText)||"",">")),O.setKeyWords(""),e.next=8,O.go();case 8:if("string"==typeof(j=e.sent)){e.next=9;break}return e.abrupt("return");case 9:return y=j,e.abrupt("continue",6);case 10:if(!v.isKeyWordPicked("A")){e.next=14;break}return(C=new a.ub).clearLastInputPoint(),C.setMessage(Object(r.zd)("1597")),e.next=11,C.go();case 11:if(P=e.sent){e.next=12;break}return e.abrupt("return");case 12:if(C.getStatus()!==a.w.kCancel){e.next=13;break}return e.abrupt("return");case 13:return w=C.getDetailedResult()===a.e.kCoordIn?P*(Math.PI/180):P,e.abrupt("continue",6);case 14:if(v.isKeyWordPicked("Q"),k){e.next=15;break}return e.abrupt("return");case 15:if(t.drawUseDefaultProperties=!0,h=t.drawDimAngular(c,i,s,o,u,d,k.x,k.y),A=h.getMcDbDimension()){e.next=16;break}return e.abrupt("return");case 16:return y&&(A.dimensionText=y),w&&(A.textRotation=w),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,n,r,c){var i=t.sub(e),s=0===n.distanceTo(r),o=n.x>r.x;c.forEach((function(c){if(c)if(!o||s||c instanceof a.Db||c instanceof a.I&&(0===c.startAngle&&c.endAngle===2*Math.PI||0===c.endAngle&&c.startAngle===2*Math.PI))c.move(e,t);else{var u=c.getGripPoints();if(u.isEmpty())return;u.forEach((function(e,t){if(function(e,t,n){var r=t.x,a=t.y,c=n.x,i=n.y,s=e.x,o=e.y,u=Math.min(r,c),d=Math.min(a,i),b=Math.max(r,c),l=Math.max(a,i);return s>=u&&s<=b&&o>=d&&o<=l}(e,n,r)&&!(c instanceof a.Ab&&2===t)&&!(c instanceof a.vb&&2===t)){if(c instanceof a.xb&&u.length()!==c.numVerts())for(var s=c.numVerts(),o=0,d=0;d<s;d++){if(c.getPointAt(d).val,0!==c.getBulgeAt(d)&&++o===t)return;o++}c.moveGripPointsAt(t,i.x,i.y,i.z)}}))}}))}Object(r.Pb)("_Revcloud",(function(){return z.apply(this,arguments)})),Object(r.Pb)("Plot",(function(){return I.apply(this,arguments)})),Object(r.Pb)("MxET_Pencil",(function(){return L.apply(this,arguments)})),window.addEventListener("keydown",(function(e){122===e.keyCode&&(e.returnValue=!1,Object(r.cd)("MxFullScreen"))}),!0),r.qd.register({key:{keyCode:"Escape"},when:function(e){return!e.isRunCommand&&Object(r.od)()},action:function(){Object(r.cd)("MxFullScreen")}}),Object(r.Pb)("MxFullScreen",(function(){var e;Object(r.od)()?((e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen)?e.call(document):(Object(r.nd)().error(Object(r.zd)("1546")+"!"),console.error(Object(r.zd)("1546")+"!")),"keyboard"in navigator&&navigator.keyboard.unlock()):(function(e){var t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen;t?t.call(e):(Object(r.nd)().error(Object(r.zd)("1546")+"!"),console.error(Object(r.zd)("1546")+"!"))}(Object(r.ld)()||document.body),"keyboard"in navigator&&navigator.keyboard.lock())})),Object(r.Pb)("_donut",(function(){return S.apply(this,arguments)})),Object(r.Pb)("_dimangular",(function(){return R.apply(this,arguments)}));var _=Object(r.pd)(0,"_stretch_offsetX"),B=Object(r.pd)(0,"_stretch_offsetY"),N=Object(r.pd)(0,"_stretch_offsetZ");function W(){return(W=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new a.pb,!((n=a.lb.getCurrentSelect()).length<=0)){e.next=3;break}return e.next=1,t.userSelect(Object(r.zd)("1639"));case 1:if(e.sent){e.next=2;break}return e.abrupt("return");case 2:n=t.getIds(),s=t.getSelectPoint(),c=s.pt1,i=s.pt2,e.next=4;break;case 3:o=a.lb.getCurrentSelectPoints(),u=o.point1,d=o.point2,c=u,i=d;case 4:return(b=new a.ob).setMessage("\n"+Object(r.zd)("1640")),b.setKeyWords("[".concat(Object(r.zd)("1641"),"(D)]")),e.next=5,b.go();case 5:if(l=e.sent,f=function(){var e=Object(r.B)(r.C.mark((function e(t){var s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return b.setMessage("\n".concat(Object(r.zd)("1642"),"<").concat(_.value,", ").concat(B.value,", ").concat(N.value,">")),b.setKeyWords(""),b.clearLastInputPoint(),e.next=1,b.go();case 1:if(t=e.sent){e.next=2;break}return e.abrupt("return");case 2:if(t){e.next=4;break}if(0!==_.value||0!==B.value||0!==N.value){e.next=3;break}return e.abrupt("return");case 3:t=new a.wb(_.value,B.value,N.value),e.next=5;break;case 4:o=(s=t).x,u=s.y,d=s.z,_.value=o,B.value=u,N.value=d;case 5:V(new a.wb,t,c,i,n.map((function(e){return e.getMcDbEntity()})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!b.isKeyWordPicked("D")&&b.getStatus()!==a.w.kNone){e.next=7;break}return e.next=6,f();case 6:return e.abrupt("return",e.sent);case 7:if(l){e.next=8;break}return e.abrupt("return");case 8:return b.setMessage("\n".concat(Object(r.zd)("1643")).concat(Object(r.zd)("1585"),"<").concat(Object(r.zd)("1644"),">")),b.setBasePt(l),b.setKeyWords(""),b.setUserDraw((function(e,t){var r=n.map((function(e){return e.clone()}));V(l,e,c,i,r),r.forEach((function(e,r){var a,c=null===(a=n[r])||void 0===a?void 0:a.getMcDbEntity();if(c){var i=c.trueColor.getColorValue(c.layerId);t.setColor(Number(i))}t.drawMcDbEntity(e)}))})),e.next=9,b.go();case 9:if(p=e.sent,b.getStatus()!==a.w.kNone){e.next=11;break}return e.next=10,f(l);case 10:return e.abrupt("return",e.sent);case 11:if(p){e.next=12;break}return e.abrupt("return");case 12:x=n.map((function(e){return e.getMcDbEntity()})).filter((function(e){return!!e})),V(l,p,c,i,x);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(u.b)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(r.Pb)("_stretch",(function(){return W.apply(this,arguments)}));var F=function(){return Object(r.rd)((function e(t){Object(r.sd)(this,e),Object(u.b)(this,"resizeObserver",null),Object(u.b)(this,"mutationObserver",null),Object(u.b)(this,"element",null),this.callback=t}),[{key:"addListener",value:function(e){this.element=e,this.setupResizeObserver(),this.setupMutationObserver()}},{key:"removeListener",value:function(){this.resizeObserver&&(this.resizeObserver.unobserve(this.element),this.resizeObserver.disconnect(),this.resizeObserver=null),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.element=null}},{key:"setupResizeObserver",value:function(){"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.callback),this.resizeObserver.observe(this.element))}},{key:"setupMutationObserver",value:function(){"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(this.callback),this.mutationObserver.observe(this.element,{attributes:!0}))}}])}();function H(){return(H=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.n.getCurrentMxCAD();case 1:return(n=new a.x).setMessage(Object(r.zd)("1609")),e.next=2,n.go();case 2:if(c=e.sent,n.getStatus()!==a.w.kCancel){e.next=3;break}return e.abrupt("return");case 3:if(n.getStatus()!==a.w.kNone){e.next=4;break}return e.abrupt("return");case 4:if(!((i=c.getMcDbEntity())instanceof a.Ab||i instanceof a.Db)){e.next=8;break}return(s=new a.ob).setMessage(Object(r.zd)("1610")),e.next=5,s.go();case 5:if(o=e.sent,s.getStatus()!==a.w.kCancel){e.next=6;break}return e.abrupt("return");case 6:if(s.getStatus()!==a.w.kNone){e.next=7;break}return e.abrupt("return");case 7:return o&&(u=i.center.clone(),d=o.sub(u).normalize().mult(i.radius),b=u.clone().addvec(d),l=u.clone().addvec(d.clone().negate()),f=Math.min(l.distanceTo(o),b.distanceTo(o)),t.drawDimDiametric(b.x,b.y,l.x,l.y,f)),e.abrupt("continue",10);case 8:return a.hb.acutPrintf(Object(r.zd)("1611")),e.abrupt("continue",1);case 9:e.next=1;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.n.getCurrentMxCAD();case 1:return(n=new a.x).setMessage(Object(r.zd)("1609")),e.next=2,n.go();case 2:if(c=e.sent,n.getStatus()!==a.w.kCancel){e.next=3;break}return e.abrupt("return");case 3:if(n.getStatus()!==a.w.kNone){e.next=4;break}return e.abrupt("return");case 4:if(!((i=c.getMcDbEntity())instanceof a.Ab||i instanceof a.Db)){e.next=5;break}return s=i.center.clone(),o=a.Bb.kXAxis.clone().mult(i.radius),u=s.clone().addvec(o),t.drawDimDiametric(s.x,s.y,u.x,u.y,i.radius),e.abrupt("continue",7);case 5:return a.hb.acutPrintf(Object(r.zd)("1611")),e.abrupt("continue",1);case 6:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return new Promise((function(t){var n=Object(r.ud)(),c=n.hideLoading,i=n.showLoading;try{var s=Object(r.nd)().info(Object(r.zd)("1801")+"..."),o=a.n.App.getCurrentMxCAD().openWebFile(e,(function(e){0===e?(Object(r.nd)().success(Object(r.zd)("1802")),t(!0)):(Object(r.nd)().error(Object(r.zd)("1543")),t(!1)),c(),s()}));Object(r.td)(e).then((function(e){e/1048576>1&&o&&i()})),t(o)}catch(e){c(),t(!1)}}))}function G(e,t,n){return t=Object(r.xd)(t),Object(r.yd)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Object(r.xd)(e).constructor):t.apply(e,n))}function J(e,t,n,a){var c=Object(r.wd)(Object(r.xd)(e.prototype),t,n);return"function"==typeof c?function(e){return c.apply(n,e)}:c}Object(r.Pb)("_watermark",(function(e){var t={watermark_txt:Object(r.zd)("1645"),watermark_html:"",watermark_x:20,watermark_y:20,watermark_rows:200,watermark_cols:200,watermark_x_space:80,watermark_y_space:80,watermark_color:"#aaa",watermark_alpha:.4,watermark_fontsize:"15px",watermark_font:"微软雅黑",watermark_width:"auto",watermark_height:"auto",watermark_angle:15,watermark_className:"mx_mask_div"};t=U(U({},t),e);var n,c=a.n.getCurrentMxCAD().mxdraw.getCanvas(),i=null,s=null,o=function(){document.querySelectorAll("."+t.watermark_className).forEach((function(e){return e.remove()}))},u=function(){var e=document.createDocumentFragment(),n=c.parentElement,r=n.clientWidth,a=n.clientHeight;if(r!==i||a!==s){i=r,s=a,o();var u=Math.max(n.scrollWidth,n.clientWidth),d=Math.max(n.scrollHeight,n.clientHeight);if("auto"===t.watermark_width||"auto"===t.watermark_height)if(""!==t.watermark_html){var b=function(e){var t=document.createElement("template");t.innerHTML=e.trim();var n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.pointerEvents="none",n.appendChild(t.content.cloneNode(!0)),document.body.appendChild(n);var r=n.getBoundingClientRect(),a=r.width,c=r.height;return a=Math.ceil(a)+5,c=Math.ceil(c),document.body.removeChild(n),{width:a,height:c}}(t.watermark_html),l=b.width,f=b.height;"auto"===t.watermark_width&&(t.watermark_width=l),"auto"===t.watermark_height&&(t.watermark_height=f)}else{var p=t.watermark_txt.length,x=parseFloat(t.watermark_fontsize)||16,g=function(e,t,n){"string"==typeof t&&(t=parseFloat(t));var r=document.createElement("canvas"),a=r.getContext("2d");if(a){a.font=t+"px "+n;var c=a.measureText(e).width,i=1.2*t;return r.remove(),{width:c=Math.ceil(c),height:i=Math.ceil(i)}}}(t.watermark_txt,t.watermark_fontsize,t.watermark_font)||{},v=g.width,h=void 0===v?p*x:v,y=g.height,w=void 0===y?x+t.watermark_x_space+t.watermark_y_space:y;"auto"===t.watermark_width&&(t.watermark_width=h),"auto"===t.watermark_height&&(t.watermark_height=w)}t.watermark_cols=Math.ceil(u/(t.watermark_x_space+t.watermark_width)),t.watermark_rows=Math.ceil(d/(t.watermark_y_space+t.watermark_height));for(var k,m,O=0;O<t.watermark_rows;O++){m=t.watermark_y+(t.watermark_y_space+t.watermark_height)*O;for(var j=0;j<t.watermark_cols;j++){k=t.watermark_x+(t.watermark_width+t.watermark_x_space)*j;var C=document.createElement("div");C.id=(t.watermark_className||"")+O+j,C.className=t.watermark_className||"",""!==t.watermark_html?C.innerHTML=t.watermark_html:C.appendChild(document.createTextNode(t.watermark_txt)),C.style.webkitTransform="rotate(-"+t.watermark_angle+"deg)",C.style.MozTransform="rotate(-"+t.watermark_angle+"deg)",C.style.msTransform="rotate(-"+t.watermark_angle+"deg)",C.style.OTransform="rotate(-"+t.watermark_angle+"deg)",C.style.transform="rotate(-"+t.watermark_angle+"deg)",C.style.visibility="",C.style.position="absolute",C.style.left=k+"px",C.style.top=m+"px",C.style.overflow="hidden",C.style.zIndex="1050",C.style.pointerEvents="none",C.style.opacity=t.watermark_alpha.toString(),C.style.fontSize=t.watermark_fontsize,C.style.fontFamily=t.watermark_font,C.style.color=t.watermark_color,C.style.textAlign="center",C.style.width=t.watermark_width+"px",C.style.height=t.watermark_height+"px",C.style.display="block",e.appendChild(C)}}n.appendChild(e)}};return u(),n=function(e,t){var n=new F(t);return n.addListener(e),n}(c,function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,a)}),t)}}(u,200)),function(){o(),n&&function(e){e.removeListener()}(n)}})),Object(r.Pb)("_DrawDiametricDimension",(function(){return H.apply(this,arguments)})),Object(r.Pb)("_DrawRadialDimension",(function(){return Y.apply(this,arguments)})),Object(r.Pb)("_openMxweb",(function(e){X(e)})),a.hb.on("mxcadApplicationCreatedMxCADObject",(function(){var e,t=[],n=a.n.getCurrentMxCAD().mxdraw.getOrbitControls();n.addEventListener("change",(function(){clearTimeout(e),e=setTimeout((function(){var e=n.object.position.clone(),r=n.object.zoom,c=n.target.clone(),i=a.n.getCurrentMxCAD().mxdraw.getCamera();t.push({zoom:r,position:e,target:c,camera:i.clone(!1)})}),500)}));var c=function(e){if(!e)return!1;var n=a.n.getCurrentMxCAD().mxdraw,r=n.getOrbitControls(),i=r.object.position.clone(),s=r.object.zoom,o=r.target.clone(),u=a.n.getCurrentMxCAD().mxdraw.getCamera();return u.copy(e.camera,!1),u.updateProjectionMatrix(),s===e.zoom&&i.equals(e.position)&&o.equals(e.target)?c(t.pop()):(r.object.position.copy(e.position),r.object.zoom=e.zoom,r.target.copy(e.target),r.update(),n._mxdrawObj.mcObject.updateDisplayMatrixData(),!0)};Object(r.Pb)("Mx_WindowZoom",Object(r.B)(r.C.mark((function e(){var n,i,s,o,u,d,b,l;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new a.ob).setMessage("\n"+Object(r.zd)("1698")),n.setKeyWords("[".concat(Object(r.zd)("182"),"(A)/").concat(Object(r.zd)("183"),"(E)/").concat(Object(r.zd)("184"),"(P)/").concat(Object(r.zd)("177"),"(O)]")),i=a.n.getCurrentMxCAD(),e.next=1,n.go();case 1:if(s=e.sent,!n.isKeyWordPicked("A")){e.next=2;break}return e.abrupt("return",i.mxdraw.zoomInitialStates());case 2:if(!n.isKeyWordPicked("E")){e.next=3;break}return e.abrupt("return",i.zoomAll(!0));case 3:if(!n.isKeyWordPicked("P")){e.next=4;break}return c(t.pop())||a.hb.acutPrintf("\n"+Object(r.zd)("1702")+"\n"+Object(r.zd)("1703")),e.abrupt("return");case 4:if(!n.isKeyWordPicked("O")){e.next=8;break}return e.next=5,a.lb.userSelect("ZOOM ".concat(Object(r.zd)("1602")));case 5:if(!((o=e.sent).length<=0)){e.next=6;break}return e.abrupt("return");case 6:if(u=a.lb.getMcDbEntitysBoundingBox(o)){e.next=7;break}return e.abrupt("return");case 7:return d=u.minPt,b=u.maxPt,e.abrupt("return",i.zoomW(d,b));case 8:if(null!=s){e.next=9;break}return e.abrupt("return");case 9:return n.setUserDraw((function(e,t){t.drawRect(a.W.cad2doc1(s),a.W.cad2doc1(e))})),n.setKeyWords(""),e.next=10,n.go();case 10:if(null!=(l=e.sent)){e.next=11;break}return e.abrupt("return");case 11:i.zoomW(s,l);case 12:case"end":return e.stop()}}),e)}))))}));var Z=function(e){function t(){var e;Object(r.sd)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=G(this,t,[].concat(a)),Object(u.b)(e,"dDashArray",.03),Object(u.b)(e,"dDashRatio",.1),Object(u.b)(e,"isAligned",!1),Object(u.b)(e,"fixedSize",!0),Object(u.b)(e,"referenceAxis",new THREE.Vector3(0,1,1)),Object(u.b)(e,"offsetHeight",void 0),Object(u.b)(e,"isDrawsMallRound",!0),e}return Object(r.vd)(t,e),Object(r.rd)(t,[{key:"getTypeName",value:function(){return"MxAuxiliaryLine"}},{key:"create",value:function(){return new t}},{key:"onViewChange",value:function(){return!!this.fixedSize&&(this.setNeedUpdateDisplay(!1),!0)}},{key:"worldDraw",value:function(e){var t=this.getDash(),n=t.dDashArray,r=t.dDashRatio,c=e.getMxObject();e.setLineWidth(.7),e.setDash(n,r);var i=this.toSmallcoord(c,this.pt1),s=this.toSmallcoord(c,this.pt2),o=i,u=s;void 0===this.offsetHeight&&(this.offsetHeight=c.screenCoordLong2World(40));var d=this.offsetHeight;if(this.isAligned){i.x>s.x&&(i=this.pt2,s=this.pt1);var b=s.clone().sub(i).cross(this.referenceAxis.clone().normalize()).normalize();o=i.clone().add(b.clone().multiplyScalar(d)),u=s.clone().add(b.clone().multiplyScalar(d))}else{var l=Math.abs(this.referenceAxis.y?i.y-s.y:i.x-s.x)+d,f=d,p=l;(0!==this.referenceAxis.x&&i.x>s.x||0!==this.referenceAxis.y&&i.y>s.y)&&(i=this.pt2,s=this.pt1),this.referenceAxis.x>0&&(f=l,p=d),this.referenceAxis.y>0&&(f=l,p=d),o=i.clone().add(this.referenceAxis.clone().multiplyScalar(f)),u=s.clone().add(this.referenceAxis.clone().multiplyScalar(p))}o.setZ(i.z),u.setZ(s.z);var x=a.j.createDashedLines([i,o,u,s],8421504,.1,.1);if(e.drawEntity(x),this.isDrawsMallRound){var g=c.screenCoordLong2World(1);e.drawCircle(i,g),e.drawCircle(s,g),e.drawCircle(o,g),e.drawCircle(u,g)}var v=o.distanceTo(u).toFixed(3);if(e.getType()===a.X.kWorldDraw){var h=new a.F;h.opacity=1,h.text=v,h.backgroundColor=16777185,h.color=16,h.position=new THREE.Vector3((o.x+u.x)/2,(o.y+u.y)/2),h.setFontSize(36),h.height=c.screenCoordLong2World(16),h.setLineWidthByPixels(!0),h.setUseSmallcoordDisplay(this.use_smallcoord_display),h.worldDraw(e)}else{var y=a.j.creatTextSprite(v,new THREE.Vector3((o.x+u.x)/2,(o.y+u.y)/2),c.screenCoordLong2World(16),0,16777215);y&&e.drawEntity(y)}}},{key:"getGripPoints",value:function(){return[this.pt1,this.pt2]}},{key:"moveGripPointsAt",value:function(e,t){return 0===e&&this.pt1.add(t),1===e&&this.pt2.add(t),!0}},{key:"dwgIn",value:function(e){return J(t,"dwgIn",this)([e]),this.dwgInHelp(e,["referenceAxis","isAligned","offsetHeight","fixedSize","isDrawsMallRound"]),!0}},{key:"dwgOut",value:function(e){return e=J(t,"dwgOut",this)([e]),this.dwgOutHelp(e,["referenceAxis","isAligned","offsetHeight","fixedSize","isDrawsMallRound"]),e}}])}(a.Y);function q(e,t,n){return t=Object(r.xd)(t),Object(r.yd)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Object(r.xd)(e).constructor):t.apply(e,n))}var Q=function(e){function t(){var e;Object(r.sd)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=q(this,t,[].concat(a)),Object(u.b)(e,"dDashArray",.03),Object(u.b)(e,"dDashRatio",.1),Object(u.b)(e,"pt1",void 0),Object(u.b)(e,"pt2",void 0),Object(u.b)(e,"center",void 0),Object(u.b)(e,"fixedSize",!0),Object(u.b)(e,"offsetDist",void 0),Object(u.b)(e,"isClockwise","auto"),Object(u.b)(e,"isDrawsMallRound",!0),Object(u.b)(e,"isMaxRadius",!1),Object(u.b)(e,"radius",void 0),e}return Object(r.vd)(t,e),Object(r.rd)(t,[{key:"getTypeName",value:function(){return"MxAuxiliaryArc"}},{key:"create",value:function(){return new t}},{key:"onViewChange",value:function(){return!!this.fixedSize&&(this.setNeedUpdateDisplay(!1),!0)}},{key:"calculateLineAngle",value:function(e,t,n){var r=2*Math.PI/360;return{startAngle:180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI*r,endAngle:180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI*r}}},{key:"getClockwise",value:function(){var e=this.getStartPoint(),t=this.getEndPoint(),n=this.isClockwise;if("auto"===n){var r=e.clone().sub(this.center),a=t.clone().sub(this.center);n=r.x*a.y-r.y*a.x<0}return n}},{key:"getAngle",value:function(){var e=this.center,t=this.getStartPoint(),n=this.getEndPoint(),r=this.getClockwise(),a=this.calculateLineAngle(e,t,n),c=a.startAngle,i=a.endAngle-c;return!r&&i<0?i+=2*Math.PI:r&&i>0&&(i-=2*Math.PI),Math.abs(i)}},{key:"getRadius",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.radius?this.radius+(e&&this.offsetDist||0):this.isMaxRadius?Math.max(this.center.distanceTo(this.pt1),this.center.distanceTo(this.pt2)):this.center.distanceTo(this.pt2)+(e&&this.offsetDist||0)}},{key:"getStartPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.hb.getCurrentDraw(),t=this.pt1;this.pt2;var n=this.center,r=t;void 0===this.offsetDist&&(this.offsetDist=e.screenCoordLong2World(40));var c=this.offsetDist,i=t.clone().sub(n).normalize(),s=this.getRadius()+c;return(r=n.clone().add(i.multiplyScalar(s))).setZ(t.z),r}},{key:"getEndPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.hb.getCurrentDraw(),t=this.pt2,n=this.center,r=t;void 0===this.offsetDist&&(this.offsetDist=e.screenCoordLong2World(40));var c=this.offsetDist,i=t.clone().sub(n).normalize(),s=this.getRadius()+c;return(r=n.clone().add(i.multiplyScalar(s))).setZ(t.z),r}},{key:"worldDraw",value:function(e){var t=this.getDash(),n=t.dDashArray,r=t.dDashRatio,c=e.getMxObject();e.setDash(n,r),e.setLineWidth(.7),this.toSmallcoord(c,this.pt2);var i=this.center;void 0===this.offsetDist&&(this.offsetDist=c.screenCoordLong2World(40));var s=this.offsetDist,o=this.getStartPoint(),u=this.getEndPoint(),d=this.getRadius()+s,b=this.calculateLineAngle(i,o,u),l=b.startAngle,f=b.endAngle,p=this.getClockwise(),x=new THREE.ArcCurve(i.x,i.y,d,l,f,p),g=(new THREE.Geometry).setFromPoints(x.getPoints(50)),v=a.j.createDashedLines([o,i,u],8421504,.1,.1);if(e.setColor(8421504),e.drawEntity(v),e.drawGeometryLines(g),this.isDrawsMallRound){var h=c.screenCoordLong2World(2);e.drawCircle(o,h),e.drawCircle(u,h)}var y=this.getAngle(),w=THREE.MathUtils.radToDeg(y).toFixed(3)+"°",k=x.getPointAt(.5),m=k.x,O=k.y,j=new THREE.Vector3(m,O);if(e.getType()===a.X.kWorldDraw){var C=new a.F;C.opacity=1,C.text=w,C.backgroundColor=16777185,C.color=16,C.position=j,C.setFontSize(36),C.height=c.screenCoordLong2World(16),C.setLineWidthByPixels(!0),C.setUseSmallcoordDisplay(this.use_smallcoord_display),C.worldDraw(e)}else{var P=a.j.creatTextSprite(w,j,c.screenCoordLong2World(16),0,16777215);P&&e.drawEntity(P)}}},{key:"getGripPoints",value:function(){return[this.pt1,this.pt2,this.center]}},{key:"moveGripPointsAt",value:function(e,t){return 0===e&&this.pt1.add(t),1===e&&this.pt2.add(t),2===e&&this.center.add(t),!0}},{key:"dwgIn",value:function(e){return this.dwgInHelp(e,["fixedSize","isDrawsMallRound","offsetDist","pt1","pt2","center","isClockwise","isMaxRadius","radius"]),!0}},{key:"dwgOut",value:function(e){return this.dwgOutHelp(e,["fixedSize","isDrawsMallRound","offsetDist","pt1","pt2","center","isClockwise","isMaxRadius","radius"]),e}}])}(a.Z);function $(e,t,n){if(e.isEqualTo(t))return 0;var r=e.c().addvec(t.c().sub(e).mult(.5)),c=t.c().sub(e);c.rotateBy(Math.PI/2,a.Bb.kZAxis);var i=new a.vb(r,r.c().addvec(c)),s=n.c();s.rotateBy(Math.PI/2,a.Bb.kZAxis);var o=new a.vb(e,e.c().addvec(s)),u=i.IntersectWith(o,a.rb.Intersect.kExtendBoth);if(u.isEmpty())return 0;var d=u.at(0),b=d.distanceTo(e);c.normalize(),c.mult(b);var l=d.c().addvec(c),f=d.c().subvec(c),p=l.c().sub(e),x=f.c().sub(e),g=l;return p.angleTo1(n)>x.angleTo1(n)&&(g=f),a.lb.calcBulge(e,g,t).val}var ee=function(){var e=Object(r.B)(r.C.mark((function e(t,n){var c,i,s,o,u,d,b,l,f,p,x,g,v,h;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=!0,i=new a.ob,s=!1,o=function(e){"Control"===e.key&&(s=!0)},u=a.n.getCurrentMxCAD(),d=function(){return s=!1},window.addEventListener("keydown",o),window.addEventListener("keyup",d),b=function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",d)},t){e.next=4;break}return i.clearLastInputPoint(),i.setMessage(Object(r.zd)("1684")),e.next=1,i.go();case 1:if(l=e.sent,i.getDetailedResult()!==a.e.kNewCommadIn){e.next=2;break}return b(),e.abrupt("return",!1);case 2:if(l){e.next=3;break}return e.abrupt("return",b());case 3:t=l;case 4:f=[{point:t}],p=r.C.mark((function e(){var o,d,l,p,x,g,v,h,y,w,k,m,O,j,C,P,A,D,M,E,z,I,L,S,T,R,V,_,B,N,W,K,U,F,H,Y,X,G,J,Z,q,Q,ee,te,ne,re,ae,ce,ie,se,oe,ue,de,be,le,fe,pe,xe,ge,ve,he,ye,we,ke,me,Oe,je,Ce,Pe,Ae,De,Me,Ee,ze,Ie,Le,Se,Te,Re,Ve,_e,Be,Ne,We,Ke,Ue,Fe,He,Ye,Xe,Ge,Je,Ze,qe,Qe,$e,et,tt,nt,rt,at,ct,it,st,ot,ut;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=11;break}return i.setMessage(Object(r.zd)("1727")),i.setKeyWords("[".concat(Object(r.zd)("171"),"(A)/").concat(f.length>2?Object(r.zd)("1728")+"(C)/":"").concat(Object(r.zd)("1552"),"(U)/").concat(Object(r.zd)("1549"),"(T)]")),i.setUserDraw((function(e,t){var n=new a.xb;f.forEach((function(e){var t=e.point,r=e.bulge;n.addVertexAt(t,r)})),n.addVertexAt(e),t.drawMcDbEntity(n)})),e.next=1,i.go();case 1:if(o=e.sent,i.getDetailedResult()!==a.e.kNullEnterIn&&i.getDetailedResult()!==a.e.kNullSpaceIn){e.next=2;break}return d=new a.xb,f.forEach((function(e){var t=e.point,n=e.bulge;d.addVertexAt(t,n)})),l=d.getLength().val,p=u.drawEntity(d),n&&n(f),e.abrupt("return",{v:{dist:l,pl:d,plId:p}});case 2:if(i.getDetailedResult()!==a.e.kNewCommadIn){e.next=3;break}return b(),e.abrupt("return",{v:!1});case 3:if(i.getStatus()!==a.w.kCancel){e.next=4;break}return e.abrupt("return",{v:b()});case 4:if(i.getStatus()!==a.w.kNone){e.next=5;break}return e.abrupt("return",{v:b()});case 5:if(!i.isKeyWordPicked("A")){e.next=6;break}return c=!1,e.abrupt("return",0);case 6:if(!i.isKeyWordPicked("U")){e.next=7;break}return 0===f.length?a.hb.acutPrintf(Object(r.zd)("1729")):(f.pop(),!(null===(x=f[f.length-1])||void 0===x)&&x.point&&i.setLastInputPoint(f[f.length-1].point),n&&n(f)),e.abrupt("return",0);case 7:if(!i.isKeyWordPicked("T")){e.next=8;break}return g=new a.xb,f.forEach((function(e){var t=e.point,n=e.bulge;g.addVertexAt(t,n)})),v=g.getLength().val,h=u.drawEntity(g),n&&n(f),e.abrupt("return",{v:{dist:v,pl:g,plId:h}});case 8:if(!i.isKeyWordPicked("C")){e.next=9;break}return(y=new a.xb).isClosed=!0,f.forEach((function(e){var t=e.point,n=e.bulge;y.addVertexAt(t,n)})),w=y.getLength().val,n&&n(f),k=u.drawEntity(y),e.abrupt("return",{v:{dist:w,pl:y,plId:k}});case 9:if(!o){e.next=10;break}return f.push({point:o}),n&&n(f),e.abrupt("return",0);case 10:e.next=82;break;case 11:return(m=i).setMessage(Object(a.D)("NO1_ID_ARX_PL5","".concat(Object(r.zd)("1730"),"(").concat(Object(r.zd)("1731"),")"))),m.setKeyWords("[".concat(Object(r.zd)("169"),"(A)/").concat(Object(r.zd)("185"),"(CE)/").concat(f.length>2?Object(r.zd)("1728")+"(C)/":"").concat(Object(r.zd)("186"),"(D)/").concat(Object(r.zd)("173"),"(L)/").concat(Object(r.zd)("187"),"(R)/").concat(Object(r.zd)("1735"),"(S)/").concat(Object(r.zd)("1552"),"(U)]")),O=new a.Bb,f.length<2?O.copy(a.Bb.kXAxis):(j=f.length,C=f[j-2].point,P=f[j-2].bulge,A=f[j-1].point,!P||Math.abs(P)<1e-7?O=new a.wb(A.x,A.y,0).sub(new a.wb(C.x,C.y,0)):((D=new a.xb).addVertexAt(C,P),D.addVertexAt(A),(M=D.getFirstDeriv(new a.wb(A.x,A.y,0))).ret?O=M.val:O.copy(a.Bb.kXAxis))),E=f[f.length-1],m.setUserDraw((function(e,t){var n=$(E.point,e,s?O.clone().negate():O),r=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;r.addVertexAt(t,n)})),r.addVertexAt(E.point,n),r.addVertexAt(e),t.drawMcDbEntity(r)})),e.next=12,m.go();case 12:if(z=e.sent,m.getDetailedResult()!==a.e.kNullEnterIn&&m.getDetailedResult()!==a.e.kNullSpaceIn){e.next=13;break}return I=new a.xb,f.forEach((function(e){var t=e.point,n=e.bulge;I.addVertexAt(t,n)})),L=I.getLength().val,S=u.drawEntity(I),n&&n(f),e.abrupt("return",{v:{dist:L,pl:I,plId:S}});case 13:if(null===z){e.next=14;break}T={point:z,bulge:0},f[f.length-1].bulge=$(E.point,T.point,s?O.clone().negate():O),f.push(T),n&&n(f),e.next=82;break;case 14:if(m.getStatus()!=a.w.kKeyWord){e.next=80;break}if(!m.isKeyWordPicked("A")){e.next=31;break}return(R=new a.ub).setBasePt(E.point),R.setMessage(Object(a.D)("ID_ARX_PLGET_I_ANGLE",Object(r.zd)("1736"))),e.next=15,R.go();case 15:if(V=e.sent,R.getDetailedResult()!==a.e.kNewCommadIn){e.next=16;break}return b(),e.abrupt("return",{v:!1});case 16:if(null!==V){e.next=17;break}return e.abrupt("return",1);case 17:return m.setMessage("".concat(Object(r.zd)("1730"),"(").concat(Object(r.zd)("1731"),")")),m.setKeyWords("[".concat(Object(r.zd)("185"),"(CE)/").concat(Object(r.zd)("187"),"(R)]")),m.setLastInputPoint(E.point),_=f[f.length-1].point,B=function(e){var t=Math.PI/2-V/2,n=new a.wb((e.x+_.x)/2,(e.y+_.y)/2),r=n.distanceTo(_),c=r/Math.sin(t),i=r/Math.tan(t),o=n.sub(_).rotateBy(Math.PI/2).normalize().mult(s?-c-i:c-i),u=n.addvec(o);return a.lb.calcBulge(_,u,e).val},m.setUserDraw((function(e,t){var n=B(e),r=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;r.addVertexAt(t,n)})),r.addVertexAt(E.point,n),r.addVertexAt(e),t.drawMcDbEntity(r)})),e.next=18,m.go();case 18:if(N=e.sent,!m.isKeyWordPicked("CE")){e.next=22;break}return m.setMessage(Object(r.zd)("1737")),m.setKeyWords(""),m.setBasePt(_),m.setUserDraw((function(e,t){var n=e.distanceTo(_),r=e.addvec(e.sub(_).rotateBy(V).normalize().mult(n)),c=B(r),i=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;i.addVertexAt(t,n)})),i.addVertexAt(E.point,c),i.addVertexAt(r),t.drawMcDbEntity(i)})),e.next=19,m.go();case 19:if(W=e.sent,m.getDetailedResult()!==a.e.kNewCommadIn){e.next=20;break}return b(),e.abrupt("return",{v:!1});case 20:if(W){e.next=21;break}return e.abrupt("return",1);case 21:return K=W.distanceTo(_),U=W.addvec(W.sub(_).rotateBy(V).normalize().mult(K)),(F={}).bulge=0,F.point=U,f[f.length-1].bulge=B(U),f.push(F),m.setLastInputPoint(U),n&&n(f),e.abrupt("return",0);case 22:if(!m.isKeyWordPicked("R")){e.next=29;break}return(H=new a.zb).setMessage(Object(r.zd)("1738")),H.setKeyWords(""),e.next=23,H.go();case 23:if(Y=e.sent,H.getDetailedResult()!==a.e.kNewCommadIn){e.next=24;break}return b(),e.abrupt("return",{v:!1});case 24:if("number"==typeof Y){e.next=25;break}return e.abrupt("return",1);case 25:return X=Y*Math.sin(V/2),m.setBasePt(_),m.setMessage("".concat(Object(r.zd)("1739"),"(").concat(Object(r.zd)("1740"),")")),m.setKeyWords(""),m.setUserDraw((function(e,t){var n=_.clone().addvec(e.sub(_).normalize().mult(2*X)),r=B(n),c=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;c.addVertexAt(t,n)})),c.addVertexAt(E.point,r),c.addVertexAt(n),t.drawMcDbEntity(c)})),e.next=26,m.go();case 26:if(G=e.sent,m.getDetailedResult()!==a.e.kNewCommadIn){e.next=27;break}return b(),e.abrupt("return",{v:!1});case 27:if(G){e.next=28;break}return e.abrupt("return",1);case 28:return J=_.clone().addvec(G.sub(_).normalize().mult(2*X)),(Z={}).bulge=0,Z.point=J,f[f.length-1].bulge=B(J),f.push(Z),n&&n(f),e.abrupt("return",0);case 29:if(N){e.next=30;break}return e.abrupt("return",1);case 30:(q={}).bulge=0,q.point=N,f[f.length-1].bulge=B(N),f.push(q),n&&n(f);case 31:if(!m.isKeyWordPicked("CE")){e.next=47;break}return m.setMessage(Object(r.zd)("1737")),m.setKeyWords(""),m.setUserDraw((function(){})),e.next=32,m.go();case 32:if(Q=e.sent,m.getDetailedResult()!==a.e.kNewCommadIn){e.next=33;break}return b(),e.abrupt("return",{v:!1});case 33:if(Q){e.next=34;break}return e.abrupt("return",{v:b()});case 34:return ee=E.point,te=Q.distanceTo(ee),m.setLastInputPoint(ee),m.setMessage("".concat(Object(r.zd)("1730"),"(").concat(Object(r.zd)("1731"),")")),m.setKeyWords("[".concat(Object(r.zd)("169"),"(A)/").concat(Object(r.zd)("188"),"(L)]")),m.clearLastInputPoint(),m.setUserDraw((function(e,t){t.drawLine(e.toVector3(),Q.toVector3());var n=Q.clone().addvec(e.sub(Q).normalize().mult(te)),r=Q.sub(ee).angleTo2(Q.sub(n),a.Bb.kZAxis),c=new a.wb((ee.x+n.x)/2,(ee.y+n.y)/2),i=Q.sub(c).normalize().mult(-te),o=Q.clone().addvec((s?r<Math.PI:r>Math.PI)?i.negate():i),u=a.lb.calcBulge(ee,o,n).val,d=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;d.addVertexAt(t,n)})),d.addVertexAt(E.point,u),d.addVertexAt(n),t.drawMcDbEntity(d)})),e.next=35,m.go();case 35:if(ne=e.sent,!m.isKeyWordPicked("A")){e.next=39;break}return(re=new a.ub).setBasePt(Q),re.setMessage(Object(a.D)("ID_ARX_PLGET_I_ANGLE","".concat(Object(r.zd)("1736"),"(").concat(Object(r.zd)("1731"),")"))),re.setKeyWords(""),re.setUserDraw((function(e,t){var n=a.Bb.kXAxis.clone().angleTo2(e.sub(Q),a.Bb.kZAxis),r=s?2*Math.PI-n/2:n/2,c=ee.sub(Q).rotateBy(r).normalize().mult(te),i=ee.sub(Q).rotateBy(n).normalize().mult(te),o=Q.clone().addvec(c),u=Q.clone().addvec(i),d=a.lb.calcBulge(ee,o,u).val,b=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;b.addVertexAt(t,n)})),b.addVertexAt(E.point,d),b.addVertexAt(u),t.drawMcDbEntity(b)})),e.next=36,re.go();case 36:if(ae=e.sent,re.getDetailedResult()!==a.e.kNewCommadIn){e.next=37;break}return b(),e.abrupt("return",{v:!1});case 37:if(null!==ae){e.next=38;break}return e.abrupt("return",1);case 38:return ce=s?2*Math.PI-ae/2:ae/2,ie=ee.sub(Q).rotateBy(ce).normalize().mult(te),se=ee.sub(Q).rotateBy(ae).normalize().mult(te),oe=Q.clone().addvec(ie),ue=Q.clone().addvec(se),de=a.lb.calcBulge(ee,oe,ue).val,(be={}).bulge=0,be.point=ue,f[f.length-1].bulge=de,f.push(be),new a.xb,n&&n(f),e.abrupt("return",0);case 39:if(!m.isKeyWordPicked("L")){e.next=44;break}return(le=new a.zb).setMessage("".concat(Object(r.zd)("1742"),"(").concat(Object(r.zd)("1731"),")")),le.setKeyWords(""),le.setBasePt(ee),le.setUserDraw((function(e,t){var n=e.distanceTo(ee);if(!(n>2*te)){var r=2*Math.asin(n/2/te),c=ee.sub(Q).normalize().mult(te),i=Q.clone().addvec(c.clone().rotateBy(s?Math.PI-r/2:r/2)),o=Q.clone().addvec(c.clone().rotateBy(r)),u=a.lb.calcBulge(ee,i,o).val,d=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;d.addVertexAt(t,n)})),d.addVertexAt(E.point,u),d.addVertexAt(o),t.drawMcDbEntity(d)}})),e.next=40,le.go();case 40:if(fe=e.sent,le.getDetailedResult()!==a.e.kNewCommadIn){e.next=41;break}return b(),e.abrupt("return",{v:!1});case 41:if("number"==typeof fe){e.next=42;break}return e.abrupt("return",1);case 42:if(!(fe>2*te)){e.next=43;break}return a.hb.acutPrintf("*".concat(Object(r.zd)("1743")," ").concat(Object(r.zd)("1744"),"*")),m.setLastInputPoint(ee),e.abrupt("return",0);case 43:return pe=2*Math.asin(fe/2/te),xe=ee.sub(Q).normalize().mult(te),ge=Q.clone().addvec(xe.clone().rotateBy(s?Math.PI-pe/2:pe/2)),ve=Q.clone().addvec(xe.clone().rotateBy(pe)),he=a.lb.calcBulge(ee,ge,ve).val,(ye={}).bulge=0,ye.point=ve,f[f.length-1].bulge=he,f.push(ye),m.setLastInputPoint(ve),n&&n(f),e.abrupt("return",0);case 44:if(m.getDetailedResult()!==a.e.kNewCommadIn){e.next=45;break}return b(),e.abrupt("return",{v:!1});case 45:if(ne){e.next=46;break}return e.abrupt("return",{v:b()});case 46:return we=Q.clone().addvec(ne.sub(Q).normalize().mult(te)),ke=Q.sub(ee).angleTo2(Q.sub(we),a.Bb.kZAxis),me=new a.wb((ee.x+we.x)/2,(ee.y+we.y)/2),Oe=Q.sub(me).normalize().mult(-te),je=Q.clone().addvec((s?ke<Math.PI:ke>Math.PI)?Oe.negate():Oe),Ce=a.lb.calcBulge(ee,je,we).val,(Pe={}).bulge=0,Pe.point=we,f[f.length-1].bulge=Ce,f.push(Pe),m.setLastInputPoint(we),n&&n(f),e.abrupt("return",0);case 47:if(!m.isKeyWordPicked("R")){e.next=62;break}return(Ae=new a.zb).setMessage(Object(a.D)("ID_ARX_PLGETSTARTRADIUS",Object(r.zd)("1745"))),Ae.setKeyWords(""),e.next=48,Ae.go();case 48:if(De=e.sent,Ae.getDetailedResult()!==a.e.kNewCommadIn){e.next=49;break}return b(),e.abrupt("return",{v:!1});case 49:if(null!==De){e.next=50;break}return e.abrupt("return",1);case 50:return Me=E.point,m.setLastInputPoint(Me),m.setMessage("".concat(Object(r.zd)("1730"),"(").concat(Object(r.zd)("1731"),")")),m.setKeyWords("[".concat(Object(r.zd)("169"),"(A)]")),m.setUserDraw((function(e,t){if(De){var n=e.distanceTo(Me);if(!(n>2*De)){var r=Math.acos(n/2/De),c=Me.clone().addvec(e.sub(Me).rotateBy(r).normalize().mult(De)),i=c.clone().addvec(new a.wb((Me.x+e.x)/2,(Me.y+e.y)/2).sub(c).normalize().mult(s?-De:De)),o=a.lb.calcBulge(Me,i,e).val,u=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;u.addVertexAt(t,n)})),u.addVertexAt(E.point,o),u.addVertexAt(e),t.drawMcDbEntity(u)}}})),e.next=51,m.go();case 51:if(Ee=e.sent,!m.isKeyWordPicked("A")){e.next=58;break}return(ze=new a.ub).setMessage(Object(a.D)("ID_ARX_PLGET_I_ANGLE",Object(r.zd)("1736"))),ze.setKeyWords(""),ze.setBasePt(Me),e.next=52,ze.go();case 52:if(Ie=e.sent,ze.getDetailedResult()!==a.e.kNewCommadIn){e.next=53;break}return b(),e.abrupt("return",{v:!1});case 53:if("number"==typeof Ie){e.next=54;break}return e.abrupt("return",1);case 54:return Le=Math.sin(Ie/2)*De*2,m.setMessage("".concat(Object(r.zd)("1739"),"(").concat(Object(r.zd)("1731"),")")),m.setKeyWords(""),m.setBasePt(Me),m.setUserDraw((function(e,t){if(De){var n=e.sub(Me).normalize(),r=Me.clone().addvec(n.clone().mult(Le)),c=r.clone().addvec(n.clone().negate().rotateBy(-(Math.PI/2-Ie/2)).mult(De)),i=c.clone().addvec(c.sub(new a.wb((Me.x+r.x)/2,(Me.y+r.y)/2)).normalize().mult(s?De:-De)),o=a.lb.calcBulge(Me,i,r).val,u=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;u.addVertexAt(t,n)})),u.addVertexAt(E.point,o),u.addVertexAt(r),t.drawMcDbEntity(u)}})),e.next=55,m.go();case 55:if(Se=e.sent,m.getDetailedResult()!==a.e.kNewCommadIn){e.next=56;break}return b(),e.abrupt("return",{v:!1});case 56:if(Se){e.next=57;break}return e.abrupt("return",1);case 57:return Te=Se.sub(Me).normalize(),Re=Me.clone().addvec(Te.clone().mult(Le)),Ve=Re.clone().addvec(Te.clone().negate().rotateBy(-(Math.PI/2-Ie/2)).mult(De)),_e=Ve.clone().addvec(Ve.sub(new a.wb((Me.x+Re.x)/2,(Me.y+Re.y)/2)).normalize().mult(s?De:-De)),Be=a.lb.calcBulge(Me,_e,Re).val,(Ne={}).bulge=0,Ne.point=Re,f[f.length-1].bulge=Be,f.push(Ne),n&&n(f),e.abrupt("return",0);case 58:if(m.getDetailedResult()!==a.e.kNewCommadIn){e.next=59;break}return b(),e.abrupt("return",{v:!1});case 59:if(Ee){e.next=60;break}return e.abrupt("return",1);case 60:if(!((We=Ee.distanceTo(Me))>2*De)){e.next=61;break}return a.hb.acutPrintf("".concat(Object(r.zd)("1730")," *").concat(Object(r.zd)("1744"),"*")),e.abrupt("return",0);case 61:return Ke=Math.acos(We/2/De),Ue=Me.clone().addvec(Ee.sub(Me).rotateBy(Ke).normalize().mult(De)),Fe=Ue.clone().addvec(new a.wb((Me.x+Ee.x)/2,(Me.y+Ee.y)/2).sub(Ue).normalize().mult(s?-De:De)),He=a.lb.calcBulge(Me,Fe,Ee).val,(Ye={}).bulge=0,Ye.point=Ee,f[f.length-1].bulge=He,f.push(Ye),n&&n(f),e.abrupt("return",0);case 62:if(!m.isKeyWordPicked("D")){e.next=68;break}return m.setMessage(Object(r.zd)("1746")),m.setKeyWords(""),m.setUserDraw((function(e,t){t.drawLine(e.toVector3(),E.point.toVector3())})),e.next=63,m.go();case 63:if(Xe=e.sent,m.getDetailedResult()!==a.e.kNewCommadIn){e.next=64;break}return b(),e.abrupt("return",{v:!1});case 64:if(Xe){e.next=65;break}return e.abrupt("return",1);case 65:return Ge=Xe.sub(E.point),m.setLastInputPoint(E.point),m.setMessage("".concat(Object(r.zd)("1730"),"(").concat(Object(r.zd)("1731"),")")),m.setKeyWords(""),m.setUserDraw((function(e,t){var n=$(E.point,e,s?Ge.clone().negate():Ge),r=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;r.addVertexAt(t,n)})),r.addVertexAt(E.point,n),r.addVertexAt(e),t.drawMcDbEntity(r)})),e.next=66,m.go();case 66:if(Je=e.sent,m.getDetailedResult()!==a.e.kNewCommadIn){e.next=67;break}return b(),e.abrupt("return",{v:!1});case 67:return(Ze={}).bulge=0,Ze.point=Je,f[f.length-1].bulge=$(E.point,Ze.point,s?Ge.clone().negate():Ge),f.push(Ze),n&&n(f),e.abrupt("return",0);case 68:if(!m.isKeyWordPicked("L")){e.next=69;break}c=!0,e.next=79;break;case 69:if(!m.isKeyWordPicked("S")){e.next=77;break}return qe=new a.wb(f[f.length-1].point.x,f[f.length-1].point.y,0),(Qe=new a.ob).setMessage(Object(a.D)("NO1_ID_SPECIFY_ARC2",Object(r.zd)("1747"))),Qe.setBasePt(qe),e.next=70,Qe.go();case 70:if($e=e.sent,Qe.getDetailedResult()!==a.e.kNewCommadIn){e.next=71;break}return b(),e.abrupt("return",{v:!1});case 71:if(null!==$e){e.next=72;break}return e.abrupt("return",1);case 72:return(et=new a.ob).setMessage(Object(a.D)("ID_CIRCULAR_ENDPOINT","".concat(Object(r.zd)("1730"),"(").concat(Object(r.zd)("1731"),")"))),et.setUserDraw((function(e,t){var n=new a.Ab;n.computeArc(qe.x,qe.y,$e.x,$e.y,e.x,e.y);var r=$e;s&&(r=n.center.clone().addvec(n.center.clone().sub($e)));var c=a.lb.calcBulge(qe,r,e).val,i=new a.xb;f.forEach((function(e){var t=e.point,n=e.bulge;i.addVertexAt(t,n)})),i.addVertexAt(E.point,c),i.addVertexAt(e),t.drawMcDbEntity(i)})),e.next=73,et.go();case 73:if(null===(tt=e.sent)){e.next=74;break}nt=$e,s&&((rt=new a.Ab).computeArc(qe.x,qe.y,$e.x,$e.y,tt.x,tt.y),nt=rt.center.clone().addvec(rt.center.clone().sub($e))),(at=a.lb.calcBulge(qe,nt,tt)).ret?((ct={}).point=tt,ct.dBluge=0,f[f.length-1].bulge=at.val,f.push(ct),n&&n(f)):a.hb.acutPrintf(Object(a.D)("ID_ENDPOINT_INVALID1","\n ".concat(Object(r.zd)("189")," *").concat(Object(r.zd)("1744"),"*"))),e.next=76;break;case 74:if(et.getDetailedResult()!==a.e.kNewCommadIn){e.next=75;break}return b(),e.abrupt("return",{v:!1});case 75:return e.abrupt("return",1);case 76:e.next=79;break;case 77:if(!m.isKeyWordPicked("C")){e.next=78;break}return f[f.length-1].bulge=$(E.point,t,s?O.clone().negate():O),(it=new a.xb).isClosed=!0,f.forEach((function(e){var t=e.point,n=e.bulge;it.addVertexAt(t,n)})),st=it.getLength().val,n&&n(f),ot=u.drawEntity(it),e.abrupt("return",{v:{dist:st,pl:it,plId:ot}});case 78:m.isKeyWordPicked("U")&&f.length>1&&(f.pop(),ut=new a.xb,f.forEach((function(e){var t=e.point,n=e.bulge;ut.addVertexAt(t,n)})),n&&n(f),f.length>0&&m.setLastInputPoint(f[f.length-1].point));case 79:e.next=82;break;case 80:if(m.getDetailedResult()!==a.e.kNewCommadIn){e.next=81;break}return b(),e.abrupt("return",{v:!1});case 81:return e.abrupt("return",1);case 82:case"end":return e.stop()}}),e)}));case 5:return e.delegateYield(p(),"t0",6);case 6:if(0!==(x=e.t0)){e.next=7;break}return e.abrupt("continue",5);case 7:if(1!==x){e.next=8;break}return e.abrupt("continue",10);case 8:if(!x){e.next=9;break}return e.abrupt("return",x.v);case 9:e.next=5;break;case 10:return g=new a.xb,f.forEach((function(e){var t=e.point,n=e.bulge;g.addVertexAt(t,n)})),v=g.getLength().val,n&&n(f),h=u.drawEntity(g),e.abrupt("return",{dist:v,pl:g,plId:h});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function te(e,t){var n=t.x,r=t.y;return e.x>n&&e.y>r||e.x<n&&e.y<r}function ne(e,t){var n=(e.x+t.x)/2,r=(e.y+t.y)/2;return new a.wb(n,r)}function re(e,t,n){var r=te(e,n),a=te(t,n);return r&&a}function ae(){return ce.apply(this,arguments)}function ce(){return(ce=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,k,m,O,j=arguments;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>0&&void 0!==j[0]&&j[0],n=new a.ob,c=[],n.clearLastInputPoint(),n.setMessage(Object(r.zd)("1684")),e.next=1,n.go();case 1:if(i=e.sent,n.getDetailedResult()!==a.e.kNewCommadIn){e.next=2;break}return e.abrupt("return",!1);case 2:if(i){e.next=3;break}return e.abrupt("return");case 3:return n.setUserDraw((function(e,t){t.drawLine(i.toVector3(),e.toVector3())})),n.setMessage(Object(r.zd)("1694")),n.setKeyWords("[".concat(Object(r.zd)("1769"),"(M)]")),e.next=4,n.go();case 4:if(s=e.sent,n.getDetailedResult()!==a.e.kNewCommadIn){e.next=5;break}return e.abrupt("return",!1);case 5:if(n.getStatus()!==a.w.kCancel){e.next=6;break}return e.abrupt("return");case 6:if(!n.isKeyWordPicked("M")){e.next=10;break}return e.next=7,ee(i,(function(e){var t=new a.xb;e.forEach((function(e){var n=e.point,r=e.bulge;t.addVertexAt(n,r)})),a.hb.acutPrintf(Object(r.zd)("191")+" = "+t.getLength().val)}));case 7:if(!1!==(o=e.sent)){e.next=8;break}return e.abrupt("return",o);case 8:if(u=(o||{}).plId){e.next=9;break}return e.abrupt("return");case 9:return(d=u.getMcDbEntity())&&c.push(d),e.abrupt("return",{markedLines:c});case 10:if(!s){e.next=11;break}return t&&(b=re(i,s,ne(i,s)),(l=new Z).referenceAxis=new THREE.Vector3(0,0,b?-1:1),l.isAligned=!0,l.pt1=i.toVector3(),l.pt2=s.toVector3(),a.hb.addToCurrentSpace(l),c.push(l),Math.abs(i.x-s.x)>.001&&Math.abs(i.y-s.y)>.001&&((f=new Z).isAligned=!1,f.referenceAxis=new THREE.Vector3(0,i.y>s.y?1:-1,-1),f.pt1=i.toVector3(),f.pt2=s.toVector3(),a.hb.addToCurrentSpace(f),c.push(f),(p=new Z).isAligned=!1,p.referenceAxis=new THREE.Vector3(i.x>s.x?1:-1,0,-1),p.pt1=i.toVector3(),p.pt2=s.toVector3(),a.hb.addToCurrentSpace(p),c.push(p),(x=new Q).offsetDist=0,x.center=i.toVector3(),x.pt1=i.toVector3().add(new THREE.Vector3(1,0,0)),x.pt2=s.toVector3(),a.hb.addToCurrentSpace(x),c.push(x)),(g=new a.Y).pt1=i.toVector3(),g.pt2=s.toVector3(),a.hb.addToCurrentSpace(g),c.push(g)),v=i.distanceTo(s),h=s.x-i.x,y=s.y-i.y,w=s.z-i.z,k=Math.atan2(y,h)*(180/Math.PI),m=Math.sqrt(h*h+y*y+w*w),O=0===m?0:Math.asin(w/m)*(180/Math.PI),a.hb.acutPrintf("".concat(Object(r.zd)("191")," = ").concat(Object(r.Bd)(v,4)," , XY ").concat(Object(r.zd)("1770")," = ").concat(Object(r.Bd)(k,4)," , ").concat(Object(r.zd)("1771")," XY ").concat(Object(r.zd)("1772")," = ").concat(Object(r.Bd)(O,4),"\n X 增量 = ").concat(Object(r.Bd)(h,4),"，  Y 增量 = ").concat(Object(r.Bd)(y,4),"，   Z 增量 = ").concat(Object(r.Bd)(w,4))),e.abrupt("return",{dist:v,angleInDegrees:k,angleWithZAxis:O,deltaX:h,deltaY:y,deltaZ:w,markedLines:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return se.apply(this,arguments)}function se(){return(se=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f=arguments;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.length>0&&void 0!==f[0]&&f[0];case 1:return n=new a.x,(c=new a.p).AddMcDbEntityTypes("CIRCLE,ARC"),n.setFilter(c),n.setMessage(Object(r.zd)("1762")),e.next=2,n.go();case 2:if(i=e.sent,n.getDetailedResult()!==a.e.kCodeAbort){e.next=3;break}return e.abrupt("return");case 3:if(n.getDetailedResult()!==a.e.kEcsIn){e.next=4;break}return e.abrupt("return");case 4:if(n.getDetailedResult()!==a.e.kMouseRightIn){e.next=5;break}return e.abrupt("return");case 5:if(n.getDetailedResult()!==a.e.kNewCommadIn){e.next=6;break}return e.abrupt("return",!1);case 6:if(n.getDetailedResult()!==a.e.kNullSpaceIn){e.next=7;break}return e.abrupt("return");case 7:if(n.getDetailedResult()!==a.e.kNullEnterIn){e.next=8;break}return e.abrupt("return");case 8:if(i){e.next=9;break}return e.abrupt("return");case 9:if(!((s=i.getMcDbEntity())instanceof a.Ab||s instanceof a.Db)){e.next=12;break}if(o=[],!t){e.next=11;break}if(u=s.getClosestPointTo(n.getDocPickPoint(),!1),d=u.val,u.ret&&d){e.next=10;break}return e.abrupt("return");case 10:b=s.center,(l=new Z).pt1=d.toVector3(),l.pt2=b.toVector3(),l.isAligned=!0,l.offsetHeight=0,a.hb.addToCurrentSpace(l),o.push(l);case 11:return a.hb.acutPrintf(Object(r.zd)("187")+" = "+s.radius+"\n"+Object(r.zd)("190")+" = "+2*s.radius+"\n"),e.abrupt("return",{radius:s.radius,markedLines:o});case 12:e.next=1;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,n,r){var a=k(r,e,n),c=k(r,t,n);return!!isNaN(c)||!isNaN(a)&&(c===a?n.distanceTo(e)>n.distanceTo(t):a<c)}function ue(){return de.apply(this,arguments)}function de(){return(de=Object(r.B)(r.C.mark((function e(){var t,n,c,i;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new a.x,(n=new a.p).AddMcDbEntityTypes("CIRCLE,ARC,LINE,LWPOLYLINE"),c=r.C.mark((function e(){var c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,k,m,O,j,C,P,A,D,M,E,z,I,L,S,R,V,_,B,N,W,K,U,F,H,Y,X,G,J,Z,q,$;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setFilter(n),t.setMessage("".concat(Object(r.zd)("1581")).concat(Object(r.zd)("171"),"、").concat(Object(r.zd)("172"),"、").concat(Object(r.zd)("173"),"<").concat(Object(r.zd)("1586"),">")),e.next=1,t.go();case 1:if(c=e.sent,i=t.getDetailedResult(),s=[],t.getDetailedResult()!==a.e.kNewCommadIn){e.next=2;break}return e.abrupt("return",{v:!1});case 2:if(t.getDetailedResult()!==a.e.kCodeAbort){e.next=3;break}return e.abrupt("return",{v:!1});case 3:if(t.getDetailedResult()!==a.e.kEcsIn){e.next=4;break}return e.abrupt("return",{v:void 0});case 4:if(i!==a.e.kNullEnterIn&&i!==a.e.kNullSpaceIn&&i!==a.e.kMouseRightIn){e.next=11;break}return o=new a.ab,u=new Q,o.setMessage("\n".concat(Object(r.zd)("1750"))),e.next=5,o.go();case 5:if(d=e.sent){e.next=6;break}return e.abrupt("return",{v:void 0});case 6:return u.center=d,o.setMessage("\n${t('1588')}"),o.setUserDraw((function(e,t){t.drawLine(e,d)})),e.next=7,o.go();case 7:if(b=e.sent){e.next=8;break}return e.abrupt("return",{v:void 0});case 8:return u.pt1=b,o.setMessage("\n".concat(Object(r.zd)("1589"),":")),o.setUserDraw((function(e,t){t.drawLine(e,d),t.drawLine(b,d),u.offsetDist=0,u.pt2=e,t.drawCustomEntity(u)})),e.next=9,o.go();case 9:if(l=e.sent){e.next=10;break}return e.abrupt("return",{v:void 0});case 10:return u.pt2=l,f=d.distanceTo(b)-d.distanceTo(l),u.offsetDist=f<0?0:f/2,(p=new a.Y).pt1=d,p.pt2=b,(x=new a.Y).pt1=d,x.pt2=l,a.hb.addToCurrentSpace(p),a.hb.addToCurrentSpace(x),a.hb.addToCurrentSpace(u),g=u.getAngle(),a.hb.acutPrintf(Object(r.zd)("169")+" = "+g+"°"),s.push(u,p,x),e.abrupt("return",{v:{angle:g,markedArcs:s}});case 11:if(c){e.next=12;break}return e.abrupt("return",0);case 12:if(v=c.getMcDbEntity()){e.next=13;break}return e.abrupt("return",0);case 13:if(!(v instanceof a.vb||v instanceof a.xb)){e.next=30;break}if(m=t.getDocPickPoint(),v instanceof a.xb?(j=T(v,m,2)||{},C=j.start,P=j.end,h=C,y=P):(h=v.startPoint,y=v.endPoint),h){e.next=14;break}return e.abrupt("return",0);case 14:if(y){e.next=15;break}return e.abrupt("return",0);case 15:return(A=new a.p).AddMcDbEntityTypes("LINE,LWPOLYLINE"),t.setFilter(A),t.setMessage(Object(r.zd)("1590")),e.next=16,t.go();case 16:if(D=e.sent,O=t.getDocPickPoint(),t.getDetailedResult()!==a.e.kNewCommadIn){e.next=17;break}return e.abrupt("return",{v:!1});case 17:if(t.getDetailedResult()!==a.e.kCodeAbort){e.next=18;break}return e.abrupt("return",{v:!1});case 18:if(t.getDetailedResult()!==a.e.kEcsIn){e.next=19;break}return e.abrupt("return",{v:void 0});case 19:if(D){e.next=20;break}return e.abrupt("continue",15);case 20:if(D.isValid()){e.next=21;break}return e.abrupt("continue",15);case 21:if((M=D.getMcDbEntity())instanceof a.xb?(E=T(M,O,2)||{},z=E.start,I=E.end,w=z,k=I):M instanceof a.vb&&(w=M.startPoint,k=M.endPoint),!w||!k){e.next=22;break}return e.abrupt("continue",23);case 22:return e.abrupt("continue",15);case 23:if(!(L=new a.vb(h,y).IntersectWith(new a.vb(w,k),a.rb.Intersect.kExtendBoth)).isEmpty()){e.next=24;break}return a.hb.acutPrintf(Object(r.zd)("1751")),e.abrupt("return",{v:void 0});case 24:if(h){e.next=25;break}return e.abrupt("return",0);case 25:if(y){e.next=26;break}return e.abrupt("return",0);case 26:if(w){e.next=27;break}return e.abrupt("return",0);case 27:if(k){e.next=28;break}return e.abrupt("return",0);case 28:if(O){e.next=29;break}return e.abrupt("return",0);case 29:return S=L.at(0),R=oe(h,y,S,m),V=R?h:y,_=oe(w,k,S,m),B=_?w:k,(N=new Q).center=S.toVector3(),N.pt1=V.toVector3(),N.pt2=B.toVector3(),N.isMaxRadius=!0,N.offsetDist=0,a.hb.addToCurrentSpace(N),W=N.getAngle(),a.hb.acutPrintf(Object(r.zd)("169")+" = "+W+"°"),s.push(N),(K=new a.Y).pt1=N.pt1,K.pt2=N.center,(U=new a.Y).pt1=N.center,U.pt2=N.pt2,a.hb.addToCurrentSpace(K),a.hb.addToCurrentSpace(U),s.push(K,U),e.abrupt("return",{v:{angle:W,markedArcs:s}});case 30:if(!(v instanceof a.Ab)){e.next=31;break}return(F=new Q).offsetDist=v.radius,F.center=v.center.toVector3(),F.pt1=new THREE.Vector3(v.radius),F.pt1.applyAxisAngle(new THREE.Vector3(0,0,1),v.startAngle).add(v.center.toVector3()),F.pt2=new THREE.Vector3(v.radius),F.pt2.applyAxisAngle(new THREE.Vector3(0,0,1),v.endAngle).add(v.center.toVector3()),(H=v.endAngle-v.startAngle)>Math.PI?H-=2*Math.PI:H<-Math.PI&&(H+=2*Math.PI),F.isClockwise=Math.abs(H)>Math.PI&&H>0,a.hb.addToCurrentSpace(F),Y=F.getAngle(),a.hb.acutPrintf(Object(r.zd)("169")+" = "+Y+"°"),s.push(F),(X=new a.Y).pt1=F.pt1,X.pt2=F.center,(G=new a.Y).pt1=F.center,G.pt2=F.pt2,a.hb.addToCurrentSpace(X),a.hb.addToCurrentSpace(G),s.push(X,G),e.abrupt("return",{v:{angle:Y,markedArcs:s}});case 31:if(!(v instanceof a.Db)){e.next=35;break}return(J=new Q).center=v.center.toVector3(),J.pt1=t.getDocPickPoint().toVector3(),(Z=new a.ob).setUserDraw((function(e,t){J.pt2=e.toVector3(),J.offsetDist=0,t.drawCustomEntity(J)})),Z.setMessage(Object(r.zd)("1752")),e.next=32,Z.go();case 32:if(q=e.sent,Z.getDetailedResult()!==a.e.kNewCommadIn){e.next=33;break}return e.abrupt("return",{v:!1});case 33:if(q){e.next=34;break}return e.abrupt("return",{v:void 0});case 34:return J.pt2=q.toVector3(),J.offsetDist=v.radius,a.hb.addToCurrentSpace(J),$=J.getAngle(),a.hb.acutPrintf(Object(r.zd)("169")+" = "+$+"°"),s.push(J),e.abrupt("return",{v:{angle:$,markedArcs:s}});case 35:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(c(),"t0",2);case 2:if(0!==(i=e.t0)){e.next=3;break}return e.abrupt("continue",1);case 3:if(!i){e.next=4;break}return e.abrupt("return",i.v);case 4:e.next=1;break;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.Pb)("_MxMeasurementDistance",ae);var be=function(e){var t=e.numVerts(),n=[];if(t<3)return n;var r=a.n.getCurrentMxCAD(),c=e.getPointAt(0).val,i=e.getPointAt(t-1).val;if(!e.isClosed&&!c.isEqualTo(i))return n;r.pathMoveTo(c.x,c.y);for(var s=0;s<t;s++){var o=e.getPointAt(s).val,u=e.getBulgeAt(s),d=e.getWidthsAt(s),b=d.val1,l=d.val2;r.pathLineToEx(o.x,o.y,b,l,u)}r.pathLineTo(i.x,i.y);var f=r.drawPathToHatch().getMcDbEntity();return f&&n.push(f),n},le=function(){var e=Object(r.B)(r.C.mark((function e(t){var n,c,i,s,o,u,d,b,l,f,p,x,g,v,h;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.n.getCurrentMxCAD(),!(t instanceof a.xb)){e.next=1;break}return e.abrupt("return",be(t));case 1:if(!(t instanceof a.Db)){e.next=3;break}if(n.pathMoveTo(t.center.x,t.center.y),n.pathCircle(t.center.x,t.center.y,t.radius),c=n.drawPathToHatch(),!(i=c.getMcDbEntity())){e.next=2;break}return e.abrupt("return",[i]);case 2:e.next=5;break;case 3:return s=t.clone(),o=n.getDatabase().currentSpace.getBoundingBox(),u=o.minPt,d=o.maxPt,b=u.clone(),l=d.clone(),s.move(b,l),f=s.getBoundingBox(),p=new a.wb((f.minPt.x+f.maxPt.x)/2,(f.minPt.y+f.maxPt.y)/2),x=n.drawEntity(s),e.next=4,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 4:if(g=a.lb.builderHatchFromPoint(p),x.erase(),s.erase(),!g){e.next=5;break}if(g.move(l,b),v=n.drawEntity(g),!(h=v.getMcDbEntity())){e.next=5;break}return e.abrupt("return",[h]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,k,m;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new a.ob,n=[],c=!1,i=!1,s=0;case 1:return t.setMessage((c?"(".concat(Object(r.zd)("1753"),")"):"")+(i?"(".concat(Object(r.zd)("1754"),")"):"")+"".concat(Object(r.zd)("1617"),"<").concat(Object(r.zd)("177"),">")),t.setKeyWords("[".concat(Object(r.zd)("177"),"(O)/").concat(c?"":Object(r.zd)("1755")+"(A)/").concat(i?"":Object(r.zd)("1756")+"(S)/").concat(Object(r.zd)("1757"),"(X)]")),e.next=2,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 2:return e.next=3,t.go();case 3:if(o=e.sent,t.getDetailedResult()!==a.e.kNewCommadIn){e.next=4;break}return e.abrupt("return",n.length>0&&{markedLines:n});case 4:if(t.getDetailedResult()!==a.e.kCodeAbort){e.next=5;break}return e.abrupt("return",n.length>0&&{markedLines:n});case 5:if(t.getDetailedResult()!==a.e.kEcsIn&&t.getDetailedResult()!==a.e.kMouseRightIn){e.next=6;break}return e.abrupt("return",n.length>0?{markedLines:n}:void 0);case 6:if(!t.isKeyWordPicked("O")&&t.getDetailedResult()!==a.e.kNullEnterIn&&t.getDetailedResult()!==a.e.kNullSpaceIn){e.next=18;break}case 7:return(u=new a.x).setMessage(Object(r.zd)("1602")),e.next=8,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 8:return e.next=9,u.go();case 9:if(d=e.sent,u.getDetailedResult()!==a.e.kNewCommadIn){e.next=10;break}return e.abrupt("return",n.length>0&&{markedLines:n});case 10:if(u.getDetailedResult()!==a.e.kCodeAbort){e.next=11;break}return e.abrupt("return",n.length>0&&{markedLines:n});case 11:if(u.getDetailedResult()!==a.e.kEcsIn){e.next=12;break}return e.abrupt("return",n.length>0&&{markedLines:n});case 12:if(u.getDetailedResult()!==a.e.kNullEnterIn&&u.getDetailedResult()!==a.e.kNullSpaceIn&&u.getDetailedResult()!==a.e.kMouseRightIn){e.next=13;break}return e.abrupt("continue",18);case 13:if(d){e.next=14;break}return e.abrupt("continue",7);case 14:if(b=d.getMcDbEntity()){e.next=15;break}return e.abrupt("continue",7);case 15:return l=b.getArea().val,f=0,b instanceof a.jb&&(f=b.getLength().val),e.next=16,le(b);case 16:if((p=e.sent)&&n.push.apply(n,Object(r.Cd)(p)),0===l&&p&&(b instanceof a.Db?l=Math.PI*Math.pow(b.radius,2):b instanceof a.I&&0===b.startAngle&&b.endAngle===2*Math.PI?(x=Math.sqrt(b.majorAxis.x*b.majorAxis.x+b.majorAxis.y*b.majorAxis.y)/2,g=x*b.radiusRatio,l=Math.PI*x*g,v=Math.pow((x-g)/(x+g),2),f=Math.PI*(x+g)*(1+3*v/(10+Math.sqrt(4-3*v)))):l=p.reduce((function(e,t){return e+t.getArea().val}),0)),0===l?a.hb.acutPrintf(Object(r.zd)("1758")+"\n"):a.hb.acutPrintf("".concat(Object(r.zd)("1759")," = ").concat(l,", ").concat(Object(r.zd)("1760")," = ").concat(f,"\n")),!c&&!i){e.next=17;break}return c?s+=l:s-=l,a.hb.acutPrintf("".concat(Object(r.zd)("1761")," = ").concat(s,"\n")),e.abrupt("continue",7);case 17:return e.abrupt("return",{markedLines:n});case 18:if(!t.isKeyWordPicked("A")){e.next=19;break}return c=!0,i=!1,e.abrupt("continue",1);case 19:if(!t.isKeyWordPicked("S")){e.next=20;break}return i=!0,c=!1,e.abrupt("continue",1);case 20:if(!t.isKeyWordPicked("X")){e.next=21;break}return a.hb.acutPrintf("".concat(Object(r.zd)("1761")," = ").concat(s,"\n")),e.abrupt("return",n.length>0?{markedLines:n}:void 0);case 21:if(!o){e.next=26;break}return e.next=22,ee(o);case 22:if(!1!==(h=e.sent)){e.next=23;break}return e.abrupt("return",n.length>0?{markedLines:n}:h);case 23:if(y=(h||{}).plId){e.next=24;break}return e.abrupt("return",n.length>0?{markedLines:n}:void 0);case 24:if(!((w=y.getMcDbEntity())instanceof a.xb)){e.next=26;break}if(w.isClosed=!0,n.push(w),k=be(w),n.push.apply(n,Object(r.Cd)(k)),m=w.getArea().val,a.hb.acutPrintf("".concat(Object(r.zd)("1759")," = ").concat(w.getArea().val,", ").concat(Object(r.zd)("1760")," = ").concat(w.getLength().val,"\n")),!c&&!i){e.next=25;break}return c?s+=m:s-=m,a.hb.acutPrintf("".concat(Object(r.zd)("1761")," = ").concat(s,"\n")),e.abrupt("continue",1);case 25:return e.abrupt("return",{markedLines:n});case 26:e.next=1;break;case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function pe(e,t,n){return t=Object(r.xd)(t),Object(r.yd)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Object(r.xd)(e).constructor):t.apply(e,n))}var xe=function(e){function t(){return Object(r.sd)(this,t),pe(this,t,arguments)}return Object(r.vd)(t,e),Object(r.rd)(t,[{key:"getTypeName",value:function(){return"MxSelectLine"}},{key:"worldDraw",value:function(e){e.setLineWidthByPixels(!0),e.setLineWidth(10),e.setColor(16737894),e.drawSelectLine(this.pt1,this.pt2)}}])}(a.Y);function ge(e,t,n){var r=e.distanceTo(t)/2,c=r*n,i=(r*r+c*c)/(2*c),s=(e.x+t.x)/2,o=(e.y+t.y)/2;return new a.wb(s,o).addvec(t.clone().sub(e).perpVector().normalize().mult(i-c))}function ve(e,t,n,r){var a=t.clone().sub(e),c=n.clone().sub(e),i=a.length(),s=(new THREE.Vector3).crossVectors(a,c);void 0===r&&(r=s.dot(new THREE.Vector3(0,0,1))<0);var o=a.clone().add(c);return r&&(o=o.negate()),o=o.normalize(),e.clone().add(o.multiplyScalar(i))}function he(){return(he=Object(r.B)(r.C.mark((function e(){var t,n;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.ob).setMessage(Object(r.zd)("1749")),e.next=1,t.go();case 1:if(n=e.sent){e.next=2;break}return e.abrupt("return");case 2:a.hb.acutPrintf("X = ".concat(n.x,"     Y = ").concat(n.y,"     Z = ").concat(n.z," \n"));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e,t,n,r){var a=e-n,c=t-r,i=0;return i=0==a?Math.PI/2:Math.atan(Math.abs(c/a)),a<0&&c>=0?i=Math.PI-i:a<0&&c<0?i=Math.PI+i:a>=0&&c<0&&(i=2*Math.PI-i),i-Math.PI}function we(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},s=c.x*c.x+c.y*c.y;if(0===s||r){var o=0===s?0:(i.x*c.x+i.y*c.y)/s;return new a.wb(e.x+c.x*o,e.y+c.y*o)}var u=(i.x*c.x+i.y*c.y)/s;return u<0?e:u>1?t:new a.wb(e.x+c.x*u,e.y+c.y*u)}function ke(e,t,n){var r=t.x-e.x,a=t.y-e.y,c=n.x-e.x,i=n.y-e.y,s=r*r+a*a;if(0===s)return n.x===e.x&&n.y===e.y;var o=(c*r+i*a)/s;return o>=0&&o<=1||(o<0?{isStart:!0}:{isStart:!1})}Object(r.Pb)("_MEASUREGEOM",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(r.zd)("1764"),i=[],s=function(){i.forEach((function(e){e.erase()}))},e.prev=1,o=r.C.mark((function e(){var o,u,d,b,l,f,p,x,g,v,h,y,w,k,m,O,j,C,P,A,D,M,E,z,I;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(p=new a.ob).setCursorType(a.E.kCross),p.disableAllTrace(),p.setDisableDynInput(!0),p.clearLastInputPoint(),p.setMessage(c),x="[".concat(Object(r.zd)("191"),"(D)/").concat(Object(r.zd)("187"),"(R)/").concat(Object(r.zd)("169"),"(A)/").concat(Object(r.zd)("192"),"(AR)/").concat(Object(r.zd)("1767"),"(Q)/").concat(Object(r.zd)("193"),"(M)/").concat(Object(r.zd)("1757"),"(X)]"),p.setKeyWords(x),g=a.n.getCurrentMxCAD(),v=new a.pb,h=new a.p([a.bb.kEntityType,"LINE,ARC,CIRCLE,LWPOLYLINE,INSERT"]),y=function(e,t,n){for(var r,c,i,s,o=function(){var s=e[u].getMcDbEntity();if(!s)return 0;if(s instanceof a.nb){var o=s.blockTableRecordId.getMcDbBlockTableRecord();return o?{v:y(o.getAllEntityId(),t.clone(),n.clone())}:0}if(!(s instanceof a.jb))return 0;var d,b,l=s.IntersectWith(new a.vb(t,n),a.rb.Intersect.kOnBothOperands);if(s instanceof a.xb&&s.isClosed){var f=s.numVerts()-1,p=s.getPointAt(0).val,x=s.getPointAt(f).val,g=new a.vb(p,x).IntersectWith(new a.vb(t,n),a.rb.Intersect.kOnBothOperands);if(!g.isEmpty()){var v=g.at(0),h=v.distanceTo(t);(void 0===r||h<r)&&(c=s,r=h,i=v)}}if(l.isEmpty())return 0;l.forEach((function(e){var n=e.distanceTo(t);(void 0===b||n<b)&&(b=n,d=e)})),(void 0===r||b<r)&&(c=s,r=b,i=d)},u=0;u<e.length;u++)if(0!==(s=o())&&s)return s.v;if(c)return{minDistEnt:c,minDist:r,intersectPt:i}},w=function(e,t){if(v.crossingSelect(e.x,e.y,t.x,t.y,h),!v.isNull())return y(v.getIds(),e,t)},k=function(e,t,n,r){var c=t.clone().addvec(n.clone().mult(a.hb.viewCoordLong2Cad(16))),i=a.j.createDashedLines([t.toVector3(),c.toVector3()],8421504,.1,.1),s=t.clone().addvec(n.clone().mult(a.hb.viewCoordLong2Cad(28)));e.drawEntity(i),e.drawText(r,a.hb.viewCoordLong2Cad(16),0,s.toVector3())},m=function(e,t,n,r,c){if(t instanceof a.xb||t instanceof a.vb){var i,s;if(t instanceof a.vb&&(i=t.startPoint,s=t.endPoint),t instanceof a.xb){var o=T(t,c,10);if(!o)return;var u=t.getBulgeAt(o.startIndex);if(0===u)i=o.start,s=o.end;else{var d=t.getParamAtPoint(o.start).val,b=t.getParamAtPoint(o.end).val,l=t.getDistAtParam(d).val,f=t.getDistAtParam(b).val,p=ge(o.start,o.end,u);e.drawCircle(o.end.toVector3(),5);var x=ve(p.toVector3(),o.start.toVector3(),o.end.toVector3()),g=x.x,v=x.y,h=new a.wb(g,v),y=h.clone().sub(p).normalize(),w=p.distanceTo(h);Math.abs(u)>1&&(h.addvec(p.clone().sub(h).normalize().mult(2*w)),y.negate()),k(e,h,y,Math.abs(f-l).toFixed(3))}}if(i&&s){var m=new xe;m.pt1=i.toVector3(),m.pt2=s.toVector3(),e.drawCustomEntity(m);var O=new Z;return O.pt1=i.toVector3(),O.pt2=s.toVector3(),O.isAligned=!0,{draw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.x>n.x||r.y<n.y;O.referenceAxis=new THREE.Vector3(0,0,t?1:-1),e.drawCustomEntity(O)},line:new a.vb(i,s)}}}if(t instanceof a.Db){var j=new a.Bb(-1,0,0),C=t.center.clone().addvec(j.clone().mult(t.radius));k(e,C,j,t.getLength().val.toFixed(3))}if(t instanceof a.Ab){var P=t.getGripPoints().at(2);k(e,P,P.sub(t.center).normalize(),t.getLength().val.toFixed(3))}},O=function(e,t,n,r,c){if(r&&c&&(!r.startPoint.isEqualTo(c.startPoint)||!r.endPoint.isEqualTo(c.endPoint))){var i=r.IntersectWith(c,a.rb.Intersect.kOnBothOperands);if(!i.isEmpty()){var s=new Q;s.offsetDist=0;var o=i.at(0),u=oe(r.startPoint,r.endPoint,o,t),d=oe(c.startPoint,c.endPoint,o,n);s.pt1=u?r.startPoint.toVector3():r.endPoint.toVector3(),s.pt2=d?c.startPoint.toVector3():c.endPoint.toVector3(),s.center=o.toVector3();var b=s.getAngle();if(b===Math.PI/2){e.setColor(16760576),s.radius=Math.min(a.hb.viewCoordLong2Cad(10),Math.min(r.getLength().val,c.getLength().val)/10);var l=s.getRadius(!0),f=s.getStartPoint().clone().add(s.center.clone().sub(s.pt1).normalize().negate().multiplyScalar(l)),p=s.getEndPoint().clone().add(s.center.clone().sub(s.pt2).normalize().negate().multiplyScalar(l)),x=new THREE.Vector3(f.x+p.x-s.center.x,f.y+p.y-s.center.y);e.drawLine(f,x),e.drawLine(p,x)}else s.radius=a.hb.viewCoordLong2Cad(26),e.drawCustomEntity(s);return b}}},j=function(e,t,n,r,c,i){var s=new a.vb(t,n),o=new a.vb(t,r),u=new a.vb(t,c),d=new a.vb(t,i),b=w(t,n),l=w(t,r),f=w(t,c),p=w(t,i);b&&(s.endPoint=b.intersectPt),l&&(o.endPoint=l.intersectPt),f&&(u.endPoint=f.intersectPt),p&&(d.endPoint=p.intersectPt),e.setColor(16777215);var x=b&&m(e,b.minDistEnt,t,n,b.intersectPt)||{},g=x.line,v=x.draw,h=l&&m(e,l.minDistEnt,t,r,l.intersectPt)||{},y=h.line,k=h.draw,j=f&&m(e,f.minDistEnt,t,c,f.intersectPt)||{},C=j.line,P=j.draw,A=p&&m(e,p.minDistEnt,t,i,p.intersectPt)||{},D=A.line,M=A.draw,E=b&&f&&O(e,b.intersectPt,f.intersectPt,g,C),z=b&&p&&O(e,b.intersectPt,p.intersectPt,g,D),I=l&&f&&O(e,l.intersectPt,f.intersectPt,y,C),L=l&&p&&O(e,l.intersectPt,p.intersectPt,y,D);b&&l&&O(e,b.intersectPt,l.intersectPt,g,y),f&&p&&O(e,f.intersectPt,p.intersectPt,C,D);var S=Math.PI/2,T=E===S&&z===S&&I===S&&L===S;function R(e){return e.startPoint.x===e.endPoint.x?1/0:(e.endPoint.y-e.startPoint.y)/(e.endPoint.x-e.startPoint.x)}var V=function(e,t){return function(e,t){return R(e)===R(t)}(e,t)&&function(e,t){return e.getLength().val===t.getLength().val}(e,t)},_=[];g&&_.push({line:g,draw:v,info:b}),y&&_.push({line:y,draw:k,info:l}),C&&_.push({line:C,draw:P,info:f}),D&&_.push({line:D,draw:M,info:p}),_.reduce((function(e,t){for(var n=!1,r=0;r<e.length;r++){var a=e[r];if(V(a[0].line,t.line)){a.push(t),n=!0;break}}return n||e.push([t]),e}),[]).forEach((function(e){if(1===e.length){if(V(e[0].line,new a.vb(s.endPoint,o.endPoint))||V(e[0].line,new a.vb(u.endPoint,d.endPoint)))return;e[0].draw&&e[0].draw()}else if(!T)if(2===e.length){if(V(e[1].line,new a.vb(s.endPoint,o.endPoint))||V(e[1].line,new a.vb(u.endPoint,d.endPoint)))return;b&&l||f&&p?(b&&l&&(b.intersectPt.distanceTo(t)<l.intersectPt.distanceTo(t)?v&&v(!0):k&&k()),f&&p&&(f.intersectPt.distanceTo(t)<p.intersectPt.distanceTo(t)?P&&P(!1):M&&M())):(e[0].draw&&e[0].draw(),e[1].draw&&e[1].draw())}else e.forEach((function(e){var t=e.draw;t&&t()}))})),e.setColor(16760576),e.drawMcDbEntity(s),e.drawMcDbEntity(o),e.drawMcDbEntity(u),e.drawMcDbEntity(d);var B=a.hb.viewCoordLong2Cad(16);if(b&&l){var N=s.endPoint.distanceTo(o.endPoint);s.endPoint.distanceTo(t)>o.endPoint.distanceTo(t)?e.drawText(N.toFixed(3),B,0,new THREE.Vector3((t.x+s.endPoint.x)/2,(t.y+s.endPoint.y)/2)):e.drawText(N.toFixed(3),B,0,new THREE.Vector3((t.x+o.endPoint.x)/2,(t.y+o.endPoint.y)/2))}if(f&&p){var W=u.endPoint.distanceTo(d.endPoint);u.endPoint.distanceTo(t)>d.endPoint.distanceTo(t)?e.drawText(W.toFixed(3),B,0,new THREE.Vector3((t.x+u.endPoint.x)/2,(t.y+u.endPoint.y)/2)):e.drawText(W.toFixed(3),B,0,new THREE.Vector3((t.x+d.endPoint.x)/2,(t.y+d.endPoint.y)/2))}},p.setUserDraw((function(e,t){var n=a.hb.viewCoordLong2Cad(g.mxdraw.getViewWidth()),r=a.hb.viewCoordLong2Cad(g.mxdraw.getViewHeight()),c=new a.wb(-n,e.y),i=new a.wb(e.x+n,e.y),s=new a.wb(e.x,e.y+r),o=new a.wb(e.x,-r);j(t,e,c,i,s,o)})),e.next=1,p.go();case 1:if(t=p.keyWordPicked(),p.getStatus()!==a.w.kCancel){e.next=2;break}return e.abrupt("return",0);case 2:if(p.getDetailedResult()!==a.e.kCodeAbort){e.next=3;break}return e.abrupt("return",0);case 3:if(p.getDetailedResult()!==a.e.kEcsIn){e.next=4;break}return e.abrupt("return",0);case 4:if((p.getDetailedResult()===a.e.kMouseRightIn||p.getDetailedResult()===a.e.kNullSpaceIn||p.getDetailedResult()===a.e.kNullEnterIn)&&(t=n),"D"!==(null===(o=t)||void 0===o?void 0:o.toLocaleUpperCase())){e.next=7;break}return s(),e.next=5,ae(!0);case 5:if(!1!==(C=e.sent)){e.next=6;break}return e.abrupt("return",0);case 6:return(P=(C||{}).markedLines)&&i.push.apply(i,Object(r.Cd)(P)),e.next=7,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 7:if("R"!==(null===(u=t)||void 0===u?void 0:u.toLocaleUpperCase())){e.next=10;break}return s(),e.next=8,ie(!0);case 8:if(!1!==(A=e.sent)){e.next=9;break}return e.abrupt("return",0);case 9:return(D=(A||{}).markedLines)&&i.push.apply(i,Object(r.Cd)(D)),e.next=10,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 10:if("A"!==(null===(d=t)||void 0===d?void 0:d.toLocaleUpperCase())){e.next=13;break}return s(),e.next=11,ue();case 11:if(!1!==(M=e.sent)){e.next=12;break}return e.abrupt("return",0);case 12:return(E=(M||{}).markedArcs)&&i.push.apply(i,Object(r.Cd)(E)),e.next=13,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 13:if("AR"!==(null===(b=t)||void 0===b?void 0:b.toLocaleUpperCase())){e.next=16;break}return s(),e.next=14,fe();case 14:if(!1!==(z=e.sent)){e.next=15;break}return e.abrupt("return",0);case 15:return(I=(z||{}).markedLines)&&i.push.apply(i,Object(r.Cd)(I)),e.next=16,Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1)})));case 1:case"end":return e.stop()}}),e)})))();case 16:if("Q"===(null===(l=t)||void 0===l?void 0:l.toLocaleUpperCase())&&s(),"X"!==(null===(f=t)||void 0===f?void 0:f.toLocaleUpperCase())){e.next=17;break}return e.abrupt("return",0);case 17:return x.includes(t)&&""!==t&&(n=t),e.abrupt("return",1);case 18:case"end":return e.stop()}}),e)}));case 2:return e.delegateYield(o(),"t0",3);case 3:if(0!==(u=e.t0)){e.next=4;break}return e.abrupt("continue",6);case 4:if(1!==u){e.next=5;break}return e.abrupt("continue",2);case 5:e.next=2;break;case 6:e.next=8;break;case 7:e.prev=7,d=e.catch(1),console.warn(d);case 8:s();case 9:case"end":return e.stop()}}),e,null,[[1,7]])})))),Object(r.Pb)("ID",(function(){return he.apply(this,arguments)}));var me=0,Oe=0,je={DE:Object(r.zd)("1547"),P:Object(r.zd)("1548"),T:Object(r.zd)("1549"),DY:Object(r.zd)("1550")},Ce="DE",Pe=function(e,t,n,r){var c,i,s,o,u,d,b,l,f,p,x,g=e.getLength().val,v=e.getDistAtPoint(n).val,h=e.getStartPoint().val,y=e.getEndPoint().val,w=v<g/2;if(e instanceof a.vb){var k=e.startPoint,m=e.endPoint;return w?(e.startPoint=h.clone().addvec(h.sub(y).normalize().mult(t)),c=function(){e.startPoint=k}):(e.endPoint=e.endPoint.clone().addvec(y.sub(h).normalize().mult(t)),c=function(){e.endPoint=m}),{ent:e,fallback:c}}if(e instanceof a.Ab){var O=e.startAngle,j=e.endAngle,C=e.clone();w?(C.startAngle=e.startAngle,C.endAngle=e.startAngle-1e-7):(C.startAngle=e.endAngle,C.endAngle=e.endAngle-1e-7);var P,A=C.getLength().val,D=e.center,M=e.getGripPoints().at(2),E=a.lb.calcBulge(h,M,y).val>0;if(w)if(P=C.getPointAtDist(E?A-t:t).val,E)e.startAngle=ye(D.x,D.y,P.x,P.y),c=function(){e.startAngle=O};else{var z=e.endAngle;e.startAngle=z,e.endAngle=ye(D.x,D.y,P.x,P.y),c=function(){e.startAngle=O,e.endAngle=j}}else if(P=C.getPointAtDist(E?t:A-t).val,E)e.endAngle=ye(D.x,D.y,P.x,P.y),c=function(){e.endAngle=j};else{var I=e.startAngle;e.startAngle=ye(D.x,D.y,P.x,P.y),e.endAngle=I,c=function(){e.startAngle=O,e.endAngle=j}}return{fallback:c,ent:e}}if(e instanceof a.I){var L=e.clone();if(L.startAngle=0,L.endAngle=2*Math.PI,t>L.getLength().val-g)return;var S=L.getPointAtDist(0).val,R=L.getPointAtDist(w?L.getDistAtPoint(h).val-t:L.getDistAtPoint(y).val+t).val,V=S.sub(L.center),_=R.sub(L.center),B=Math.atan2(V.y,V.x),N=Math.atan2(_.y,_.x)-B;N<0&&(N+=2*Math.PI);var W=e.startAngle,K=e.endAngle;w?e.startAngle=N:e.endAngle=N;return{fallback:function(){w?e.startAngle=W:e.endAngle=K},ent:e}}if(e instanceof a.xb){if(e.isClosed)return;var U=function(e){for(var t=[],n=0;n<e.numVerts();n++){var r=e.getWidthsAt(n),a=r.val1,c=r.val2;t.push({point:e.getPointAt(n).val,bulge:e.getBulgeAt(n),startWidth:a,endWidth:c})}return t},F=function(e,t){for(;e.removeVertexAt(0););for(var n=0;n<t.length;n++){var r=t[n];e.addVertexAt(r.point,r.bulge,r.startWidth,r.endWidth,n)}},H=function(e,t,n){var r=ge(e,t,n),c=new a.Ab;return c.center=r,c.radius=r.sub(e).length(),c.startAngle=ye(r.x,r.y,e.x,e.y),c.endAngle=ye(r.x,r.y,t.x,t.y),c},Y=function(e,t,n,r){if(n)if(r)e.startAngle=ye(e.center.x,e.center.y,t.x,t.y);else{var a=e.endAngle;e.startAngle=a,e.endAngle=ye(e.center.x,e.center.y,t.x,t.y)}else if(r)e.endAngle=ye(e.center.x,e.center.y,t.x,t.y);else{var c=e.startAngle;e.startAngle=ye(e.center.x,e.center.y,t.x,t.y),e.endAngle=c}return e},X=e.numVerts();if(t<0){var G=w?e.getPointAtDist(Math.abs(t)).val:e.getPointAtDist(g-Math.abs(t)).val,J=T(e,G,.1);if(!J)return;var Z=J.start,q=J.end,Q=J.startIndex,$=J.endIndex,ee=e.getBulgeAt(Q),te=0===ee?function(e,t,n,r){var a=r.startIndex,c=r.endIndex,i=r.numVerts,s=U(e);if(e.setPointAt(n?a:c,t),n)for(var o=0;o<a;o++)e.removeVertexAt(0);else for(var u=c+1;u<i;u++)e.removeVertexAt(c+1);return function(){return F(e,s)}}(e,G,w,{startIndex:Q,endIndex:$,numVerts:X}):function(e,t,n,r){var c=r.start,i=r.end,s=r.startIndex,o=r.endIndex,u=r.numVerts,d=r.bulge,b=U(e),l=H(c,i,d);Y(l,t,n,d>0);var f=l.getGripPoints().at(2),p=a.lb.calcBulge(n?t:c,f,n?i:t).val;if(e.setPointAt(n?s:o,t),e.setBulgeAt(s,p),n)for(var x=0;x<s;x++)e.removeVertexAt(0);else for(var g=o+1;g<u;g++)e.removeVertexAt(o+1);return function(){return F(e,b)}}(e,G,w,{start:Z,end:q,startIndex:Q,endIndex:$,numVerts:X,bulge:ee});return{ent:e,fallback:te}}y=w?e.getPointAt(1).val:y,h=w?h:e.getPointAt(X-2).val;var ne=w?e.getBulgeAt(0):e.getBulgeAt(X-2),re=0===ne?(i=e,s=t,o=w,d=(u={startPoint:h,endPoint:y,numVerts:X}).startPoint,b=u.endPoint,l=u.numVerts,f=o?d.clone().addvec(d.sub(b).normalize().mult(s)):b.clone().addvec(b.sub(d).normalize().mult(s)),p=o?0:l-1,x=o?d:b,i.setPointAt(p,f),function(){return i.setPointAt(p,x)}):function(e,t,n,r){var c=r.startPoint,i=r.endPoint,s=r.numVerts,o=r.bulge,u=H(c,i,o),d=u.clone();d.startAngle=n?u.startAngle:u.endAngle,d.endAngle=d.startAngle-1e-7;var b=d.getLength().val,l=o>0,f=t%b,p=d.getPointAtDist(n?l?b-f:f:l?f:b-f).val;Y(u,p,n,l);var x=u.getGripPoints().at(2),g=a.lb.calcBulge(n?p:c,x,n?i:p).val,v=n?0:s-1,h=n?0:s-2,y=n?c:i,w=o;return e.setPointAt(v,p),e.setBulgeAt(h,g),function(){e.setPointAt(v,y),e.setBulgeAt(h,w)}}(e,t,w,{startPoint:h,endPoint:y,numVerts:X,bulge:ne});return{ent:e,fallback:re}}};Object(r.Pb)("Mx_lengthen",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=new a.x,(c=new a.p).AddMcDbEntityTypes("LWPOLYLINE,LINE,ARC,ELLIPSE"),n.setFilter(c),i=function(){var e=Object(r.B)(r.C.mark((function e(i){var s,o;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=r.C.mark((function e(){var s,o,u,d,b;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage(Object(r.zd)("1551")),n.setKeyWords("[".concat(Object(r.zd)("1552"),"(U)]")),n.setUserDraw((function(e,t){var n=a.lb.findEntAtPoint(e.x,e.y,e.z,void 0,c);s&&s.highlight(!1),s=n.getMcDbCurve();var r=n.clone();r&&r instanceof a.jb&&Pe(r,"number"==typeof i?i:i(r,e),e)&&(s&&s.highlight(!0),t.setColor(Number(r.trueColor.getColorValue(r.layerId))),t.drawMcDbEntity(r))})),e.next=1,n.go();case 1:if(o=e.sent,s&&s.highlight(!1),n.getStatus()!==a.w.kCancel&&n.getStatus()!==a.w.kNone){e.next=2;break}return e.abrupt("return",{v:!0});case 2:if(!n.isKeyWordPicked("U")){e.next=3;break}return(u=t.pop())?null==u||u.fallback():a.hb.acutPrintf("\n"+Object(r.zd)("1553")),e.abrupt("return",0);case 3:if(null!==o){e.next=4;break}return e.abrupt("return",{v:!0});case 4:if(null!==(d=o.getMcDbCurve())){e.next=5;break}return e.abrupt("return",{v:!0});case 5:return(b=Pe(d,"number"==typeof i?i:i(d,n.pickPoint()),n.pickPoint()))&&t.push(b),e.abrupt("return",0);case 6:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(s(),"t0",2);case 2:if(0!==(o=e.t0)){e.next=3;break}return e.abrupt("continue",1);case 3:if(!o){e.next=4;break}return e.abrupt("return",o.v);case 4:e.next=1;break;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(r.B)(r.C.mark((function e(c){var i,s,o;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){if(e instanceof a.Ab){var t=e.clone();return t.startAngle=0,t.endAngle=c,t.getLength().val}if(e instanceof a.I){var n=e.clone(),r=n.getLength().val;return n.endAngle+=c,n.getLength().val-r}return 0},s=r.C.mark((function e(){var c,s,o,u,d,b,l;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage(Object(r.zd)("1551")),n.setKeyWords("[".concat(Object(r.zd)("1552"),"(U)]")),(s=new a.p).AddMcDbEntityTypes("LWPOLYLINE,ARC,ELLIPSE"),n.setUserDraw((function(e,t){var n=a.lb.findEntAtPoint(e.x,e.y,e.z,void 0,s);c&&c.highlight(!1),c=n.getMcDbCurve();var r=n.clone();if(r&&r instanceof a.jb){var o=i(r);Pe(r,o,e)&&(c&&c.highlight(!0),t.setColor(Number(r.trueColor.getColorValue(r.layerId))),t.drawMcDbEntity(r))}})),e.next=1,n.go();case 1:if(o=e.sent,c&&c.highlight(!1),n.getStatus()!==a.w.kCancel&&n.getStatus()!==a.w.kNone){e.next=2;break}return e.abrupt("return",{v:!0});case 2:if(!n.isKeyWordPicked("U")){e.next=3;break}return(u=t.pop())?null==u||u.fallback():a.hb.acutPrintf("\n"+Object(r.zd)("1553")),e.abrupt("return",0);case 3:if(null!==o){e.next=4;break}return e.abrupt("return",{v:!0});case 4:if(null!==(d=o.getMcDbCurve())){e.next=5;break}return e.abrupt("return",{v:!0});case 5:return b=i(d),(l=Pe(d,b,n.pickPoint()))&&t.push(l),e.abrupt("return",0);case 6:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(s(),"t0",2);case 2:if(0!==(o=e.t0)){e.next=3;break}return e.abrupt("continue",1);case 3:if(!o){e.next=4;break}return e.abrupt("return",o.v);case 4:e.next=1;break;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=r.C.mark((function e(){var c,o,d,b,l,f,p,x,g,v,h,y,w,k,m;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage("".concat(Object(r.zd)("1554"),"<").concat(je[Ce],"(DE)>")),n.setKeyWords("[".concat(Object(r.zd)("1547"),"(DE)/").concat(Object(r.zd)("1548"),"(P)/").concat(Object(r.zd)("1549"),"(T)/").concat(Object(r.zd)("1550"),"(DY)]")),e.next=1,n.go();case 1:if(c=e.sent,n.getStatus()!==a.w.kCancel){e.next=2;break}return e.abrupt("return",0);case 2:if(n.getStatus()!==a.w.kNone){e.next=3;break}return setTimeout((function(){Ce&&a.hb.setCommandLineInputData(Ce,13)})),e.abrupt("return",1);case 3:if(!n.isKeyWordPicked("DE")){e.next=14;break}return Ce="DE",(o=new a.zb).setMessage("".concat(Object(r.zd)("1555"),"<").concat(me.toFixed(4),">")),o.setKeyWords("[".concat(Object(r.zd)("169"),"(A)]")),e.next=4,o.go();case 4:if(d=e.sent,o.getStatus()!==a.w.kCancel){e.next=5;break}return e.abrupt("return",0);case 5:if(o.getStatus()===a.w.kNone&&"number"==typeof me&&(d=me),!o.isKeyWordPicked("A")){e.next=10;break}return(b=new a.ub).setMessage(Object(r.zd)("1557")),e.next=6,b.go();case 6:if(l=e.sent,b.getStatus()===a.w.kNone&&(l=0),o.getStatus()!==a.w.kCancel){e.next=7;break}return e.abrupt("return",0);case 7:if("number"==typeof l){e.next=8;break}return e.abrupt("return",0);case 8:return e.next=9,s(l);case 9:if(!e.sent){e.next=10;break}return e.abrupt("return",0);case 10:if("number"!=typeof d){e.next=13;break}return me=d,e.next=11,i(d);case 11:if(!e.sent){e.next=12;break}return e.abrupt("return",0);case 12:e.next=14;break;case 13:return e.abrupt("return",0);case 14:if(!n.isKeyWordPicked("P")){e.next=23;break}Ce="P";case 15:return(f=new a.y).setMessage("".concat(Object(r.zd)("1558"),"<").concat(Oe.toFixed(4),">")),e.next=16,f.go();case 16:if(p=e.sent,f.getStatus()!==a.w.kCancel){e.next=17;break}return e.abrupt("return",2);case 17:if(f.getStatus()===a.w.kNone&&"number"==typeof p&&(Oe=p),"number"!=typeof p){e.next=21;break}if(!(p<=0)){e.next=18;break}return a.hb.acutPrintf("\n"+Object(r.zd)("1559")),e.abrupt("continue",15);case 18:return Oe=p,e.next=19,i((function(e){var t=e.getLength().val;return t/100*Oe-t}));case 19:if(!e.sent){e.next=20;break}return e.abrupt("return",2);case 20:e.next=22;break;case 21:return e.abrupt("continue",23);case 22:e.next=15;break;case 23:if(!n.isKeyWordPicked("T")){e.next=33;break}return Ce="T",(x=new a.zb).setMessage(Object(r.zd)("1560")+"<"+(0).toFixed(4)+">"),x.setKeyWords("[".concat(Object(r.zd)("169"),"(A)]")),e.next=24,x.go();case 24:if(g=e.sent,x.getStatus()===a.w.kNone&&(g=0),x.getStatus()!==a.w.kCancel){e.next=25;break}return e.abrupt("return",0);case 25:if(!x.isKeyWordPicked("A")){e.next=30;break}return(v=new a.ub).setMessage(Object(r.zd)("1561")+"<"+(0).toFixed(4)+">"),e.next=26,v.go();case 26:if(h=e.sent,x.getStatus()!==a.w.kCancel){e.next=27;break}return e.abrupt("return",0);case 27:if(x.getStatus()===a.w.kNone&&(h=0),"number"==typeof h){e.next=28;break}return e.abrupt("return",0);case 28:return e.next=29,i((function(e){return 0}));case 29:if(!e.sent){e.next=30;break}return e.abrupt("return",0);case 30:if("number"==typeof g){e.next=31;break}return e.abrupt("return",0);case 31:return e.next=32,i((function(e){return g-e.getLength().val}));case 32:if(!e.sent){e.next=33;break}return e.abrupt("return",0);case 33:if(!n.isKeyWordPicked("DY")){e.next=38;break}Ce="DY",y=function(e,t,n,r,c,i){if(!(e instanceof a.xb)){if(e instanceof a.vb){var s=0,o=we(e.startPoint,e.endPoint,t,!0),d=ke(e.startPoint,e.endPoint,o);if("object"===Object(u.c)(d)&&d.isStart!==n){var b=e.startPoint,l=e.endPoint;d.isStart?(e.endPoint=b,e.startPoint=o):(e.startPoint=l,e.endPoint=o);return{ent:e,fallback:function(){e.startPoint=b,e.endPoint=l}}}return s=n?o.distanceTo(e.endPoint)-r:o.distanceTo(e.startPoint)-r,Pe(e,s,c)}if(e instanceof a.Ab){var f,p=e.startAngle,x=e.endAngle,g=e.getClosestPointTo(t,!0).val,v=e.getGripPoints().at(2),h=a.lb.calcBulge(e.getGripPoints().at(0),v,e.getGripPoints().at(1)).val>0,y=e.center;if(h)e.endAngle=ye(y.x,y.y,g.x,g.y),f=function(){e.endAngle=x};else{var w=e.startAngle;e.startAngle=ye(y.x,y.y,g.x,g.y),e.endAngle=w,f=function(){e.startAngle=p,e.endAngle=x}}return{ent:e,fallback:f}}if(e instanceof a.I){var k=e.endAngle,m=e.center,O=(Math.atan2(t.y-m.y,t.x-m.x)-Math.atan2(e.majorAxis.y,e.majorAxis.x)+2*Math.PI)%(2*Math.PI);O<e.startAngle&&(O+=2*Math.PI),e.endAngle=O;return{ent:e,fallback:function(){e.endAngle=k}}}}},w=r.C.mark((function e(){var c,i,s,o,u,d,b,l,f,p,x;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setMessage(Object(r.zd)("1551")),n.setKeyWords("[".concat(Object(r.zd)("1552"),"(U)]")),e.next=1,n.go();case 1:if(i=e.sent,!n.isKeyWordPicked("U")){e.next=2;break}return(s=t.pop())?null==s||s.fallback():a.hb.acutPrintf("\n"+Object(r.zd)("1553")),e.abrupt("return",0);case 2:if(n.getStatus()!==a.w.kCancel&&n.getStatus()!==a.w.kNone){e.next=3;break}return e.abrupt("return",{v:{v:!0}});case 3:if(i){e.next=4;break}return e.abrupt("return",0);case 4:if(c=i.getMcDbCurve()){e.next=5;break}return e.abrupt("return",0);case 5:return o=n.pickPoint(),u=c.getLength().val,d=c.getDistAtPoint(o).val,b=d<u/2,(l=new a.ob).setMessage(Object(r.zd)("1562")),n.setKeyWords("[".concat(Object(r.zd)("1552"),"(U)]")),l.setUserDraw((function(e,t){if(c){c.highlight(!1);var n=i.clone();n instanceof a.jb&&y(n,e,b,u,o)&&(c.highlight(!0),t.setColor(Number(c.trueColor.getColorValue(c.layerId))),t.drawMcDbEntity(n))}})),e.next=6,l.go();case 6:if(f=e.sent,c&&c.highlight(!1),l.getStatus()!==a.w.kCancel&&n.getStatus()!==a.w.kNone){e.next=7;break}return e.abrupt("return",{v:{v:!0}});case 7:if(!l.isKeyWordPicked("U")){e.next=8;break}return(p=t.pop())?null==p||p.fallback():a.hb.acutPrintf("\n"+Object(r.zd)("1553")),e.abrupt("return",0);case 8:if(null!==f){e.next=9;break}return e.abrupt("return",{v:{v:!0}});case 9:return c&&((x=y(c,f,b,u,o))&&t.push(x)),e.abrupt("return",0);case 10:case"end":return e.stop()}}),e)}));case 34:return e.delegateYield(w(),"t0",35);case 35:if(0!==(k=e.t0)){e.next=36;break}return e.abrupt("continue",34);case 36:if(!k){e.next=37;break}return e.abrupt("return",k.v);case 37:e.next=34;break;case 38:if(c){e.next=39;break}return e.abrupt("return",1);case 39:if(m=c.getMcDbCurve()){e.next=40;break}return e.abrupt("return",1);case 40:return a.hb.acutPrintf("\n"+Object(r.zd)("1563")+": "+m.getLength().val.toFixed(4)),e.abrupt("return",1);case 41:case"end":return e.stop()}}),e)}));case 1:return e.delegateYield(o(),"t0",2);case 2:if(0!==(d=e.t0)){e.next=3;break}return e.abrupt("continue",7);case 3:if(1!==d){e.next=4;break}return e.abrupt("continue",1);case 4:if(2!==d){e.next=5;break}return e.abrupt("continue",7);case 5:if(!d){e.next=6;break}return e.abrupt("return",d.v);case 6:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))),Object(r.Pb)("deselect",(function(){var e=a.n.getCurrentMxCAD();e.mxdraw.clearMxCurrentSelect(),e.updateDisplay()}));var Ae=function(){var e=Object(r.B)(r.C.mark((function e(t){var n,a;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.a)(),(a=n.dialog).showDialog(!0,t),e.prev=1,e.next=2,new Promise((function(e,t){a.onConfirm(e),a.onCancel(t)}));case 2:return e.abrupt("return",e.sent);case 3:return e.prev=3,e.catch(1),e.abrupt("return",[""]);case 4:case"end":return e.stop()}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(r.B)(r.C.mark((function e(t){var n,c,i,s,o,u;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择需要".concat(t?"锁定":"解锁","图层的对象"));case 1:n=e.sent,c=new Set,i=Object(r.Dd)(),s=i.setValue,o=Object(l.d)(i),u=o.list,n.forEach((function(e){if(e.type===a.kb.kMxCAD){var t=e.getMcDbEntity();if(!t)return;var n=u.value.findIndex((function(e){return e.name===t.layer}));n>=0&&c.add(n)}})),s("lock",t,Array.from(c),!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.Pb)("_OpenAllLayer",(function(){var e=Object(r.Dd)(),t=e.setLayerList,n=e.stringifyJSON;Object(d.a)(!0),t(n())})),Object(r.Pb)("_SelOffLayer",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择需要关闭图层的实体");case 1:t=e.sent,n=new Set,c=Object(r.Dd)(),i=c.setValue,s=c.setLayerList,o=c.stringifyJSON,u=Object(l.d)(c),d=u.list,t.forEach((function(e){if(e.type===a.kb.kMxCAD){var t=e.getMcDbEntity();if(!t)return;var r=d.value.findIndex((function(e){return e.name===t.layer}));r>=0&&n.add(r)}})),i("visible",!1,Array.from(n)),s(o());case 2:case"end":return e.stop()}}),e)})))),Object(r.Pb)("_layer_recovery",(function(){(0,Object(r.Dd)().recoveryLayerStateHistory)()})),Object(r.Pb)("_layer_putCurrent",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.x).setMessage("选择将使其图层将成为当前图层的对象"),e.next=1,t.go();case 1:if(n=e.sent){e.next=2;break}return e.abrupt("return");case 2:if(n.isValid()){e.next=3;break}return e.abrupt("return");case 3:if(c=n.getMcDbEntity()){e.next=4;break}return e.abrupt("return");case 4:if(i=Object(r.Dd)(),s=i.putCurrent,o=Object(l.d)(i),u=o.list,!((d=u.value.findIndex((function(e){var t=e.name;return c.layer===t})))<0)){e.next=5;break}return e.abrupt("return");case 5:s(d);case 6:case"end":return e.stop()}}),e)})))),Object(r.Pb)("_layer_matching",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择需要修改图层的对象");case 1:return t=e.sent,(n=new a.x).setMessage("选择匹配图层的对象"),n.setKeyWords("[名称(N)]"),e.next=2,n.go();case 2:if(c=e.sent,i="",!n.isKeyWordPicked("N")){e.next=7;break}return s=Object(b.a)(),s.dialog.showDialog(!0),e.prev=3,e.next=4,Ae();case 4:i=e.sent[0],e.next=6;break;case 5:return e.prev=5,e.catch(3),e.abrupt("return");case 6:e.next=11;break;case 7:if(c){e.next=8;break}return e.abrupt("return");case 8:if(c.isValid()){e.next=9;break}return e.abrupt("return");case 9:if(o=c.getMcDbEntity()){e.next=10;break}return e.abrupt("return");case 10:i=o.layer;case 11:if(""!==i){e.next=12;break}return e.abrupt("return");case 12:t.forEach((function(e){var t=e.getMcDbEntity();t&&(t.layer=i)})),a.n.getCurrentMxCAD().updateDisplay();case 13:case"end":return e.stop()}}),e,null,[[3,5]])})))),Object(r.Pb)("_layer_setEntToCurrentLayer",Object(r.B)(r.C.mark((function e(){var t,n;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择需要修改图层的对象");case 1:t=e.sent,n=Object(r.Ed)().getCurrentlyLayerName(),t.forEach((function(e){var t=e.getMcDbEntity();t&&(t.layer=n)})),a.n.getCurrentMxCAD().updateDisplay();case 2:case"end":return e.stop()}}),e)})))),Object(r.Pb)("_layer_CopyObjectsToNewLayer",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择要复制的对象");case 1:return t=e.sent,(n=new a.x).setMessage("选择目标图层上的对象"),n.setKeyWords("[名称(N)]"),e.next=2,n.go();case 2:if(c=e.sent,i="",!n.isKeyWordPicked("N")){e.next=4;break}return e.next=3,Ae();case 3:i=e.sent[0],e.next=8;break;case 4:if(c){e.next=5;break}return e.abrupt("return");case 5:if(c.isValid()){e.next=6;break}return e.abrupt("return");case 6:if(s=c.getMcDbEntity()){e.next=7;break}return e.abrupt("return");case 7:i=s.layer;case 8:return(o=new a.ob).setMessage("指定基点"),e.next=9,o.go();case 9:if(u=e.sent){e.next=10;break}return e.abrupt("return");case 10:return o.setMessage("指定位移的第二个点"),o.setUserDraw((function(e,n){t.forEach((function(t){if(u){var r=t.clone();r&&(r.layer=i,r.move(u,e),n.drawMcDbEntity(r))}}))})),e.next=11,o.go();case 11:d=e.sent,t.forEach((function(e){if(u&&d){var t=e.clone();if(t){t.move(u,d);var n=a.n.getCurrentMxCAD().drawEntity(t).getMcDbEntity();n&&(n.layer=i)}}}));case 12:case"end":return e.stop()}}),e)})))),Object(r.Pb)("_layer_freeze",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择需要冻结图层的对象");case 1:t=e.sent,n=new Set,c=Object(r.Dd)(),i=c.setValue,s=Object(l.d)(c),o=s.list,t.forEach((function(e){if(e.type===a.kb.kMxCAD){var t=e.getMcDbEntity();if(!t)return;var r=o.value.findIndex((function(e){return e.name===t.layer}));r>=0&&n.add(r)}})),i("freeze",!0,Array.from(n),!0);case 2:case"end":return e.stop()}}),e)})))),Object(r.Pb)("_layer_thawedAll",(function(){var e=Object(r.Dd)();(0,e.setValue)("freeze",!1,Object(l.d)(e).list.value.map((function(e,t){return t})),!0)})),Object(r.Pb)("_layer_lock",(function(){return De(!0)})),Object(r.Pb)("_layer_unlock",(function(){return De(!1)})),Object(r.Pb)("_layer_combined",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,f,p,x,g,v,h,y,w,k;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择要合并的图层上的对象",null,function(){var e=Object(r.B)(r.C.mark((function e(n,a){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a,a.setKeyWords("[命名(N)]");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:if(n=e.sent,c=[],!t||!t.isKeyWordPicked("N")){e.next=3;break}return e.next=2,Ae({isMultiple:!0});case 2:c=e.sent,e.next=4;break;case 3:n&&(i=new Set,n.forEach((function(e){var t=e.getMcDbEntity();t&&i.add(t.layer)})),c=Array.from(i));case 4:if(!(c.length>0&&""===c[0])){e.next=5;break}return e.abrupt("return");case 5:return a.hb.acutPrintf("\n选定的图层:"+c.join(",")),(s=new a.x).setMessage("选择目标图层上的对象"),s.setKeyWords("名称(N)"),e.next=6,s.go();case 6:if(o=e.sent,u="",!s.isKeyWordPicked("N")){e.next=8;break}return e.next=7,Ae();case 7:u=e.sent[0],e.next=12;break;case 8:if(o){e.next=9;break}return e.abrupt("return");case 9:if(o.isValid()){e.next=10;break}return e.abrupt("return");case 10:if(d=o.getMcDbEntity()){e.next=11;break}return e.abrupt("return");case 11:u=d.layer;case 12:return a.hb.acutPrintf("\n将要把"+c.length+'个图层合并到图层"'+u+'"中。'),(b=new a.A).setMessage("是否继续?"),b.setKeyWords("[是(Y)/否(N)]"),e.next=13,b.go();case 13:"Y"===(null==(f=e.sent)?void 0:f.toLocaleUpperCase())&&((p=new a.pb).allSelect(),p.forEach((function(e){var t=e.getMcDbEntity();t&&c.includes(t.layer)&&(t.layer=u)})),x=Object(r.Dd)(),g=x.remove,v=x.setLayerList,h=x.stringifyJSON,y=Object(l.d)(x),w=y.list,k=c.map((function(e){return w.value.findIndex((function(t){return t.name===e}))})),g(k),v(h()));case 14:case"end":return e.stop()}}),e)})))),Object(r.Pb)("_layer_remove",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,f,p,x,g,v,h,y,w,k;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,a.lb.userSelect("选择要合并的图层上的对象",null,function(){var e=Object(r.B)(r.C.mark((function e(n,a){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a,a.setKeyWords("[命名(N)]");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:if(n=e.sent,c=[],!t||!t.isKeyWordPicked("N")){e.next=3;break}return e.next=2,Ae({isMultiple:!0});case 2:c=e.sent,e.next=4;break;case 3:n&&(i=new Set,n.forEach((function(e){var t=e.getMcDbEntity();t&&i.add(t.layer)})),c=Array.from(i));case 4:if(!(c.length>0&&""===c[0])){e.next=5;break}return e.abrupt("return");case 5:return(s=new a.A).setMessage("删除图层上的对象"),s.setKeyWords("[删除(D)/不删除对象改为当前图层(C)]"),e.next=6,s.go();case 6:if(o=e.sent,s.getStatus()!==a.w.kCancel){e.next=7;break}return e.abrupt("return");case 7:u="D"===(null==o?void 0:o.toLocaleUpperCase()),d=Object(r.Ed)().getCurrentlyLayerName(),b=Object(r.Dd)(),f=b.remove,p=b.setLayerList,x=b.stringifyJSON,g=Object(l.d)(b),v=g.list,h=c.map((function(e){return v.value.findIndex((function(t){return t.name===e}))})),y=f(h),p(x()),y?((w=new a.pb).allSelect(),k=y.map((function(e){return e.name})),w.forEach((function(e){var t=e.getMcDbEntity();t&&k.includes(t.layer)&&(u?t.erase():t.layer=d)})),a.hb.acutPrintf("\n已删除的图层:"+k.join(",")+'"\n命令')):a.hb.acutPrintf("删除图层失败\n命令");case 8:case"end":return e.stop()}}),e)}))));var Me=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=r.C.mark((function e(){var n,c,i,s,o,u,d,b,l;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=r.t.instance)||void 0===n||!n.isDialogOpen){e.next=1;break}return e.abrupt("return",{v:void 0});case 1:return(c=new a.ob).clearLastInputPoint(),c.setMessage(Object(r.zd)("2105")+":"),c.setCursorType(a.E.kCross),e.next=2,c.go();case 2:if(i=e.sent,c.getStatus()!==a.w.kCancel){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(i){e.next=4;break}return e.abrupt("return",0);case 4:if(0!==t){e.next=8;break}return(s=new a.zb).setMessage(Object(r.zd)("2106")+":"),e.next=5,s.go();case 5:if(o=e.sent,s.getStatus()!==a.w.kCancel){e.next=6;break}return e.abrupt("return",{v:void 0});case 6:if(null!==o){e.next=7;break}return e.abrupt("return",{v:void 0});case 7:t=o;case 8:return(u=new a.sb).textString="",u.position=i,u.alignmentPoint=u.position,u.height=t,d=a.n.getCurrentMxCAD().drawEntity(u),b=d.getMcDbEntity(),e.prev=9,e.next=10,new Promise((function(e){b instanceof a.sb&&new r.t(b,i).onClose((function(t){t||u.erase(),e()}))}));case 10:return e.abrupt("return",0);case 11:return e.prev=11,l=e.catch(9),u.erase(),console.error(l),e.abrupt("return",1);case 12:case"end":return e.stop()}}),e,null,[[9,11]])}));case 1:return e.delegateYield(n(),"t0",2);case 2:if(0!==(c=e.t0)){e.next=3;break}return e.abrupt("continue",1);case 3:if(1!==c){e.next=4;break}return e.abrupt("continue",6);case 4:if(!c){e.next=5;break}return e.abrupt("return",c.v);case 5:e.next=1;break;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=r.t.instance)||void 0===t||!t.isDialogOpen){e.next=1;break}return e.abrupt("return");case 1:n=r.C.mark((function e(){var t,n,c,i,s;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.p).AddMcDbEntityTypes("TEXT,MTEXT,CUSTOMENTITY"),(n=new a.x).setFilter(t),n.setMessage(Object(r.zd)("2107")),e.next=1,n.go();case 1:if(c=e.sent,n.getStatus()!==a.w.kCancel){e.next=2;break}return e.abrupt("return",{v:void 0});case 2:if(c&&c.isValid()){e.next=3;break}return e.abrupt("return",0);case 3:if(!((i=c.getMcDbEntity())instanceof a.sb)){e.next=7;break}return e.prev=4,e.next=5,new Promise((function(e){new r.t(i,n.pickPoint()).onClose((function(t){e()}))}));case 5:return e.abrupt("return",0);case 6:return e.prev=6,s=e.catch(4),console.error(s),e.abrupt("return",1);case 7:case"end":return e.stop()}}),e,null,[[4,6]])}));case 2:return e.delegateYield(n(),"t0",3);case 3:if(0!==(c=e.t0)){e.next=4;break}return e.abrupt("continue",2);case 4:if(1!==c){e.next=5;break}return e.abrupt("continue",7);case 5:if(!c){e.next=6;break}return e.abrupt("return",c.v);case 6:e.next=2;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.Pb)("Mx_EditText",Ee),Object(r.Pb)("_DrawText",Me);var ze=function(){var e=Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l,f,p,x,g,v,h,y,w,k,m,O;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.n.getCurrentMxCAD(),(n=new a.B).setStyleName(r.Fd.currentName),c=n.getJustification(),i=n.getScale(),n.setJustification(c),n.setScale(i),s=[],o=function(e,t){if(0!==s.length){var n=new a.B;n.setJustification(c),n.setScale(i),n.setStyleName(r.Fd.currentName),s.forEach((function(e){n.addVertex(e)})),n.addVertex(e),t.drawMcDbEntity(n)}},u=function(){},e.prev=1;case 2:return(d=new a.ob).clearLastInputPoint(),d.setMessage(Object(r.zd)("1684")),d.setKeyWords("[".concat(Object(r.zd)("1685"),"(J)/").concat(Object(r.zd)("1686"),"(M)/").concat(Object(r.zd)("1624"),"(S)]")),e.next=3,d.go();case 3:if(b=e.sent,d.getStatus()!==a.w.kCancel){e.next=4;break}return u(),e.abrupt("return",!1);case 4:if(d.getDetailedResult()!==a.e.kNewCommadIn){e.next=5;break}return u(),e.abrupt("return",!1);case 5:if(!d.isKeyWordPicked("J")){e.next=10;break}return(l=new a.ob).setMessage(Object(r.zd)("1687")+"<"+Object(r.zd)("1688")+">"),l.setKeyWords("[".concat(Object(r.zd)("1689"),"(T)/").concat(Object(r.zd)("1690"),"(M)/").concat(Object(r.zd)("1691"),"(B)/").concat(Object(r.zd)("1688"),"(A)]")),e.next=6,l.go();case 6:if(console.log(l.getStatus()),l.getStatus()!==a.w.kNone){e.next=7;break}c=1,e.next=8;break;case 7:if(l.getStatus()!==a.w.kCancel){e.next=8;break}return e.abrupt("continue",2);case 8:if(l.getDetailedResult()!==a.e.kNewCommadIn){e.next=9;break}return u(),e.abrupt("return",!1);case 9:return l.isKeyWordPicked("T")?c=0:l.isKeyWordPicked("M")?c=1:l.isKeyWordPicked("B")?c=2:l.isKeyWordPicked("A")&&(c=-1),n.setJustification(c),e.abrupt("continue",2);case 10:if(!d.isKeyWordPicked("M")){e.next=14;break}return(f=new a.y).setMessage(Object(r.zd)("1692")+"<"+i.toString()+">"),e.next=11,f.go();case 11:if(p=e.sent,f.getStatus()!==a.w.kCancel){e.next=12;break}return e.abrupt("continue",2);case 12:if(f.getDetailedResult()!==a.e.kNewCommadIn){e.next=13;break}return u(),e.abrupt("return",!1);case 13:return f.getStatus()===a.w.kOk&&"number"==typeof p&&(x=p,!isNaN(x)&&x>0&&(i=x,n.setScale(i))),e.abrupt("continue",2);case 14:if(!d.isKeyWordPicked("S")){e.next=16;break}return(g=new a.z).setMessage(Object(r.zd)("1693")),e.next=15,g.go();case 15:return(v=e.sent)&&(r.Fd.keys().includes(v)&&n.setStyleName(v)),e.abrupt("continue",2);case 16:if(!b){e.next=17;break}return s.push(b.clone()),n.addVertex(b),e.abrupt("continue",18);case 17:e.next=2;break;case 18:h=!0;case 19:return y=h?Object(r.zd)("1694"):Object(r.zd)("1636"),(w=new a.ob).setMessage(y),h||w.setKeyWords(s.length>2?"[".concat(Object(r.zd)("1728"),"(C)/").concat(Object(r.zd)("1654"),"(U)]"):"[".concat(Object(r.zd)("1654"),"(U)]")),k=s[s.length-1],w.setBasePt(k),w.setUserDraw((function(e,t){return o(e,t),1})),e.next=20,w.go();case 20:if(m=e.sent,w.getDetailedResult()!==a.e.kMouseRightIn){e.next=21;break}return e.abrupt("continue",28);case 21:if(w.getStatus()!==a.w.kCancel){e.next=23;break}if(!(s.length>1)){e.next=22;break}return e.abrupt("continue",28);case 22:return u(),e.abrupt("return",!1);case 23:if(w.getDetailedResult()!==a.e.kNewCommadIn){e.next=24;break}return u(),e.abrupt("return",!1);case 24:if(!w.isKeyWordPicked("U")){e.next=25;break}return s.length>1&&(s.pop(),n.removeVertexAt(n.getVertexCount()-1),h=1===s.length),e.abrupt("continue",19);case 25:if(!w.isKeyWordPicked("C")){e.next=27;break}if(!(s.length>=3)){e.next=26;break}return n.setIsClosed(!0),t.drawEntity(n),e.abrupt("return",!0);case 26:return a.hb.acutPrintf(Object(r.zd)("3714")),e.abrupt("continue",19);case 27:m&&(s.push(m.clone()),n.addVertex(m),h=!1),e.next=19;break;case 28:if(!(s.length>=2)){e.next=29;break}return t.drawEntity(n),e.abrupt("return",!0);case 29:return e.abrupt("return",!1);case 30:return e.prev=30,O=e.catch(1),console.error("绘制多线出错:",O),e.abrupt("return",!1);case 31:return e.prev=31,u(),e.finish(31);case 32:case"end":return e.stop()}}),e,null,[[1,30,31,32]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(Object(r.zd)("1695")),e.next=1,ze();case 1:return e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Le(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(r.B)(r.C.mark((function e(t,n){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(r.B)(r.C.mark((function e(c){var i,s,o,u,d,b,l,f,x,g,v,y,w,k,m,O,j,C,P,A;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.hash,s=t.type,o=t.file,u=Object(r.ud)(),d=u.hideLoading,b=u.showLoading,e.next=2;break;case 1:return e.abrupt("return",c(!0));case 2:if(s!==Object(r.md)()){e.next=3;break}o.source.source.size/1048576>1&&b(),l=URL.createObjectURL(o.source.source),setTimeout((function(){X(l),setTimeout((function(){URL.revokeObjectURL(l)}),5e3)})),e.next=7;break;case 3:if(f=Object(r.e)()||{},x=f.mxfilepath,g=void 0===x?"":x,v=Object(r.m)(),y=v+g+i+"."+s+Object(r.md)(!0),w=v+g+i+"/___mx___tz___.dwg.mxweb",k=!1,t.isUseServerExistingFile){e.next=6;break}return e.next=4,h(y,i);case 4:if((m=e.sent).ok){e.next=5;break}return d(),e.abrupt("return",c(!1));case 5:m.tz&&(k=!0);case 6:Object(r.i)(Object(r.zd)("1541")+"..."),Object(r.j)(!0),O=(new Date).getTime(),j=0,n||(j=a.cb.EMSCRIPTEN_FETCH_LOAD_TO_MEMORY|a.cb.EMSCRIPTEN_FETCH_PERSIST_FILE|a.cb.EMSCRIPTEN_FETCH_REPLACE),C=a.n.App.getCurrentMxCAD(),P=!1,r.k.emit("startOpenFile"),A=C.openWebFile(y,(function(e){if(d(),P=!0,Object(r.l)(),0===e){if(c(!0),(new Date).getTime()-O>5e3&&Object(r.nd)().success(Object(r.zd)("1542")+"..."),k){var t=v+"/mxcad/files/tz";p.a.post(t,{fileHash:i}).then((function(e){e&&e.data&&0==e.data.code&&C.getImp().loadTz(w)}))}}else c(!1),Object(r.nd)().error(Object(r.zd)("1543"))}),void 0,void 0,j,!k),Object(r.td)(y).then((function(e){e/1048576>1&&A&&!P&&b()})),c(!!A),c(!1);case 7:Object(r.h)(o.name);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.Pb)("MLINE",Ie),Object(r.c)((function(){(new r.n).rxInit()})),Object(r.b)();var Te=Object(r.od)();Object(r.Pb)("OpenDwg",Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=1;break;case 1:return Te=Object(r.od)(),e.next=2,Object(r.d)(!1,"OpenDwgImp");case 2:Te&&Object(r.cd)("MxFullScreen");case 3:case"end":return e.stop()}}),e)})))),Object(r.Pb)("OpenDwg_DoNotUseCache",Object(r.B)(r.C.mark((function e(){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=1;break;case 1:return Te=Object(r.od)(),e.next=2,Object(r.d)(!0,"OpenDwgImp_DoNotUseCache");case 2:Te&&Object(r.cd)("MxFullScreen");case 3:case"end":return e.stop()}}),e)})))),Object(r.Pb)("OpenDwgImp_DoNotUseCache",function(){var e=Object(r.B)(r.C.mark((function e(t){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Le(t,!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(r.Pb)("OpenDwgImp",function(){var e=Object(r.B)(r.C.mark((function e(t){return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Le(t,!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(r.Pb)("Mx_SaveAs",g),Object(r.Pb)("Mx_QSave",v),Object(r.Pb)("Mx_Export_DWG",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 1:e.next=3;break;case 2:Te=Object(r.od)(),t=function(){Te&&Object(r.cd)("MxFullScreen")},n=Object(r.e)()||{},c=n.baseUrl,i=void 0===c?"":c,s=n.saveDwgUrl,o=void 0===s?"":s,u=n.mxfilepath,d=void 0===u?"":u,"http://localhost"==i.substring(0,16)&&(i=Object(r.f)()+i.substring(16)),"http://localhost"==o.substring(0,16)&&(o=Object(r.f)()+o.substring(16)),(b=a.n.getCurrentMxCAD()).saveFileToUrl(o,(function(e,n){try{var c=JSON.parse(n);if("ok"==c.ret){var s=i+d+c.file;fetch(s).then(function(){var e=Object(r.B)(r.C.mark((function e(n){var c,i,s;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t=e.toLowerCase(),n=t.lastIndexOf(".");if(-1!==n){var a=t.substring(n);if(a===Object(r.md)(!0))return e.substring(0,n)+".dwg";if(".dwg"===a||".dxf"===a)return e}return e+".dwg"},e.next=1,n.blob();case 1:return c=e.sent,i=b.getCurrentOriginaFileName(),i=s(i),e.next=2,a.k.saveAsFileDialog({blob:c,filename:i,types:[{description:"dwg"+Object(r.zd)("1544"),accept:{"application/octet-stream":[".dwg"]}}]});case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else console.log(n)}catch(e){console.log("Mx: sserverResult error")}}));case 3:case"end":return e.stop()}}),e)})))),Object(r.Pb)("Mx_debug",(function(){})),Object(r.Pb)("Mx_clear_buf",(function(){})),Object(r.Pb)("Mx_Array",c.a),Object(r.Pb)("Mx_NewFile",(function(){a.n.getCurrentMxCAD().newFile();var e=Object(r.Dd)().initLayerList,t=Object(r.Ad)().initColorIndexList,n=Object(r.g)().initLineTypeList;e(),t(),n()})),Object(r.Pb)("Mx_NewFile_Template",(function(){a.n.getCurrentMxCAD().openWebFile("empty_template.mxweb")})),Object(r.Pb)("MxPE_DrawMText_old",Object(r.B)(r.C.mark((function e(){var t,n,c,i,s,o,u,d,b,l;return r.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a.ob).setMessage(Object(r.zd)("1545")),e.next=1,t.go();case 1:if(n=e.sent){e.next=2;break}return e.abrupt("return");case 2:return c=Object(f.a)(),i=c.open,e.next=3,i();case 3:if("boolean"!=typeof(s=e.sent)){e.next=4;break}return e.abrupt("return");case 4:return o=s.text,u=s.size,(d=new a.qb).contents=o||"",u&&(d.textHeight=u),d.location=n,b=a.n.getCurrentMxCAD(),l=b.drawEntity(d),b.updateDisplay(),e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)}))))}}]);