(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{34:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n(9),c=function(){return{dialog:a.Nc}},o=function(e){return a.Nc&&a.Nc.showDialog(!0,e,200)}},64:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(9),c=n(0),o=n(34),r=n(2),u=n(8),l={class:"mt-2"},i={style:{width:"90px"}},s={class:"text-center"},b={class:"text-left"},d={style:{height:"26px"}},f={style:{width:"90px"}},p={class:"d-flex justify-center"},h={key:0,class:"border_box"},m={style:{width:"auto"}},j={style:{height:"3px"}};const O=Object(c.db)({__name:"index",setup:function(e){var t=Object(o.b)().dialog,n=Object(c.eb)([]),O=function(e){return 0===e?"class:iconfont gou":1===e?"class:iconfont cha":void 0},v=function(e){return 0===e?"#33CD2A":1===e?"#ff0000":void 0};t.onReveal((function(e){var t=[];e.externalReference.forEach((function(n){t.push({name:n,uploadState:3,progress:0,type:"ref",hash:e.hash})})),e.images.forEach((function(n){t.push({name:n,uploadState:3,progress:0,hash:e.hash,type:"img"})})),n.value=t}));var g=Object(c.fb)((function(){return n.value.some((function(e){return 2===e.uploadState}))})),w=[{name:"选择文件",fun:function(){var e=(Object(a.e)()||{}).baseUrl,t=void 0===e?"":e;"http://localhost"==t.substring(0,16)&&(t=Object(a.f)()+t.substring(16));var c=document.createElement("input");c.setAttribute("type","file"),c.setAttribute("accept",".dwg,image/*"),c.style.display="none",c.setAttribute("multiple","multiple"),c.setAttribute("capture","camera"),document.body.appendChild(c),c.onchange=function(){if(c.files&&!(c.files.length<1)){var e=Array.from(c.files);n.value.filter((function(t){return e.some((function(e){if(e.name===t.name)return t.source=e,!0}))})).forEach(function(){var e=Object(a.B)(a.C.mark((function e(n){var o,r,l,i,s,b;return a.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.type,r=n.name,l=n.source,i=n.hash,n.uploadState=2,e.next=5;break;case 2:n.uploadState=0,e.next=4;break;case 3:e.prev=3,b=e.catch(1),n.uploadState=1,console.warn(b);case 4:e.next=6;break;case 5:s=new FormData,l&&s.append("file",l),s.append("src_dwgfile_hash",i),s.append("ext_ref_file",r),Object(u.a)({url:t+("img"===o?"/mxcad/up_ext_reference_image":"/mxcad/up_ext_reference_dwg"),method:"post",headers:{"Content-Type":"multipart/form-data"},data:s,onUploadProgress:function(e){e.total&&(n.progress=e.loaded/e.total*100,console.log(n.progress))}}).then((function(e){0===e.data.code?(n.uploadState=0,c.remove()):(n.uploadState=1,c.remove())}),(function(){n.uploadState=1,c.remove()}));case 6:case"end":return e.stop()}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}())}},setTimeout((function(){c.click()}),100)},disabled:function(){return n.value.every((function(e){return 0===e.uploadState}))}},{name:"取消",fun:function(){t.cancel(!1),t.showDialog(!1)}},{name:"继续打开文件",fun:function(){t.confirm(!0),t.showDialog(!1)}}];return function(e,o){return Object(c.nb)(),Object(c.lb)(a.r,{title:e.t("2083"),width:"450",modelValue:Object(c.f)(t).isShow.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return Object(c.f)(t).isShow.value=e}),footerBtnList:w},{default:Object(c.vb)((function(){return[Object(c.kb)("div",l,[Object(c.C)(r.B,{height:"150",class:"mb-2",style:{overflow:"hidden"},hover:!1},{default:Object(c.vb)((function(){return[Object(c.kb)("thead",null,[Object(c.kb)("tr",null,[Object(c.kb)("th",i,Object(c.sb)(e.t("2084")),1),Object(c.kb)("th",s,Object(c.sb)(e.t("2085")),1)])]),Object(c.kb)("tbody",b,[(Object(c.nb)(!0),Object(c.bb)(c.g,null,Object(c.cb)(n.value,(function(e,t){return Object(c.nb)(),Object(c.bb)("tr",d,[Object(c.kb)("td",f,[Object(c.kb)("div",p,[2!==e.uploadState?(Object(c.nb)(),Object(c.bb)("div",h,[Object(c.C)(r.C,{icon:O(e.uploadState),color:v(e.uploadState),size:"16"},null,8,["icon","color"])])):(Object(c.nb)(),Object(c.lb)(r.h,{key:1,rotate:360,size:16,width:2,"model-value":e.progress,color:"teal",indeterminate:100===e.progress},null,8,["model-value","indeterminate"]))])]),Object(c.kb)("td",m,[Object(c.C)(a.Mc,{class:"text-left",width:285,text:e.name,"slice-num":10},null,8,["text"])])])})),256))])]})),_:1}),Object(c.kb)("div",j,[g.value?(Object(c.nb)(),Object(c.lb)(r.nb,{key:0,indeterminate:"",color:"green"})):Object(c.rb)("",!0)])])]})),_:1},8,["title","modelValue"])}}}),v=Object(a.s)(O,[["__scopeId","data-v-53cee13a"]])}}]);