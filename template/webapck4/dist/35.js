(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{73:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var a=n(9),l=n(0),u=n(5),c=n(1),r=n(2),b=n(6),o={class:"d-flex algin-center"};const i=Object(l.db)({__name:"index",setup:function(e){var t,n=a.dd.isShow,i=Object(a.Dd)(),f=i.setValue,v=i.stringifyJSON,d=i.remove,O=i.setLayerList,j=Object(u.d)(i).list,s=Object(l.eb)(!1),m=Object(l.fb)((function(){return j.value.filter((function(e){return e.name})).map((function(e){return e.name}))})),p=Object(l.eb)(Object(a.Cd)(m.value)),h=Object(l.eb)(!0);Object(l.hb)(n,(function(e){e?t=Object(a.ed)():t&&h.value&&Object(a.fd)(t)})),Object(l.hb)(p,Object(b.b)((function(e){j.value.forEach((function(t,n){f("visible",e.includes(t.name),n)})),Object(a.fd)(v())}),100));var y=Object(l.eb)(""),C=Object(l.eb)(!1),w=function(){var e=Object(a.B)(a.C.mark((function e(){var t,n;return a.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dd.showDialog(!1),e.next=1,c.lb.userSelect(Object(a.zd)("选择对象"));case 1:t=e.sent,n=new Set,t.forEach((function(e){var t=e.getMcDbEntity();t&&n.add(t.layer)})),p.value=Array.from(n),a.dd.showDialog(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.hb)(y,(function(e){""===e&&(C.value=!1,s.value=!1)}));var x=function(){""!==y.value?(C.value=!0,s.value=!0,p.value=m.value.filter((function(e){return e.toLocaleLowerCase()===y.value.toLocaleLowerCase()}))):p.value=[]},g=Object(l.eb)([]),V=function(e){var t=e(g.value.map((function(e){return e.$el})),(function(e,t){return t})).map;if(0!==t.length){var n=s.value?p.value:m.value;p.value=t.map((function(e){return n[e]}))}},k=Object(l.fb)((function(){return"".concat(Object(a.zd)("图层漫游")," - ").concat(Object(a.zd)("图层数"),":")+m.value.length})),_=function(){var e=new c.pb,t=new Set;e.allSelect(),e.forEach((function(e){var n=e.getMcDbEntity();n&&t.add(n.layer)}));var n=Array.from(t);d(j.value.filter((function(e){var t=e.name;return!n.includes(t)})),"this"),O(v())};return function(e,t){var u=Object(l.J)("box-selection");return Object(l.nb)(),Object(l.lb)(a.r,{maxWidth:"400px",ref:"layerDialog",modelValue:Object(l.f)(n),"onUpdate:modelValue":t[4]||(t[4]=function(e){return Object(l.s)(n)?n.value=e:null}),title:k.value},{actions:Object(l.vb)((function(){return[Object(l.C)(r.E,{class:"mx-1 mt-0 mb-1 py-0 px-2 bg-dialog-card-text d-flex justify-end"},{default:Object(l.vb)((function(){return[Object(l.C)(r.Z,{class:"mr-5",label:e.t("2149"),modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.value=e})},null,8,["label","modelValue"]),Object(l.C)(a.F,{onClick:_},{default:Object(l.vb)((function(){return[Object(l.pb)(Object(l.sb)(e.t("2150")),1)]})),_:1}),Object(l.C)(a.F,{onClick:t[3]||(t[3]=function(e){return Object(l.f)(a.dd).showDialog(!1)})},{default:Object(l.vb)((function(){return[Object(l.pb)(Object(l.sb)(e.t("2006")),1)]})),_:1})]})),_:1})]})),default:Object(l.vb)((function(){return[Object(l.kb)("div",o,[Object(l.C)(a.x,{onClick:w}),Object(l.C)(r.Y,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return y.value=e}),onKeydown:Object(l.Q)(x,["enter"])},null,8,["modelValue"]),Object(l.C)(r.Z,{label:e.t("2148"),modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.value=e}),disabled:!C.value},null,8,["label","modelValue","disabled"])]),Object(l.yb)((Object(l.nb)(),Object(l.lb)(r.ab,{density:"compact",color:"primary",style:{height:"300px"}},{default:Object(l.vb)((function(){return[(Object(l.nb)(!0),Object(l.bb)(l.g,null,Object(l.cb)(s.value?Object(a.Cd)(p.value):m.value,(function(e,t){return Object(l.nb)(),Object(l.lb)(r.S,{class:"ma-0",title:e,ref_for:!0,ref_key:"refItems",ref:g,key:t,onClick:function(n){return function(e,t,n){if(e.ctrlKey){var l=p.value.indexOf(t);p.value=-1===l?[].concat(Object(a.Cd)(p.value),[t]):p.value.filter((function(e){return e!==t}))}else if(e.shiftKey){var u=p.value.map((function(e){return m.value.indexOf(e)})),c=Math.min.apply(Math,Object(a.Cd)(u)),r=Math.max.apply(Math,Object(a.Cd)(u));c>n?c=n:r=n,p.value=m.value.slice(c,r+1)}else p.value=[t]}(n,e,t)},active:s.value?s.value:p.value.includes(e)},null,8,["title","onClick","active"])})),128))]})),_:1})),[[u,V]])]})),_:1},8,["modelValue","title"])}}})}}]);