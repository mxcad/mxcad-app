(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{27:function(e,t,n){"use strict";var c=n(9),l=c.Oc.f,o=c.Rc,r=c.Sc,a=c.Tc,i=c.Uc,u=c.bc,b=c.cc,s=c.hc,d=c.Pc.f,f=c.dc,O=c.ec,p=c.fc,j=c.gc,v=c.Vc,h=function(e,t,n){n in e||l(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},g=c.Wc,m=c.Xc,y=c.ic,w=c.Qc.enforce,x=c.Yc,C=c.Zc,S=c.ad,k=c.bd,_=C("match"),D=r.RegExp,V=D.prototype,E=r.SyntaxError,R=a(V.exec),F=a("".charAt),z=a("".replace),T=a("".indexOf),W=a("".slice),P=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,A=/a/g,U=/a/g,I=new D(A)!==A,L=v.MISSED_STICKY,H=v.UNSUPPORTED_Y,N=o&&(!I||L||S||k||m((function(){return U[_]=!1,D(A)!==A||D(U)===U||"/a/i"!==String(D(A,"i"))})));if(i("RegExp",N)){for(var Z=function(e,t){var n,c,l,o,r,a,i=f(V,this),d=O(e),v=void 0===t,h=[],g=e;if(!i&&d&&v&&e.constructor===Z)return e;if((d||f(V,e))&&(e=e.source,v&&(t=j(g))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),g=e,S&&"dotAll"in A&&((c=!!t&&T(t,"s")>-1)&&(t=z(t,/s/g,""))),n=t,L&&"sticky"in A&&((l=!!t&&T(t,"y")>-1)&&H&&(t=z(t,/y/g,""))),k&&(e=(o=function(e){for(var t,n=e.length,c=0,l="",o=[],r=s(null),a=!1,i=!1,u=0,b="";c<=n;c++){if("\\"===(t=F(e,c)))t+=F(e,++c);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:R(P,W(e,c+1))&&(c+=2,i=!0),l+=t,u++;continue;case">"===t&&i:if(""===b||y(r,b))throw new E("Invalid capture group name");r[b]=!0,o[o.length]=[b,u],i=!1,b="";continue}i?b+=t:l+=t}return[l,o]}(e))[0],h=o[1]),r=u(D(e,t),i?this:V,Z),(c||l||h.length)&&(a=w(r),c&&(a.dotAll=!0,a.raw=Z(function(e){for(var t,n=e.length,c=0,l="",o=!1;c<=n;c++)"\\"!==(t=F(e,c))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),l+=t):l+="[\\s\\S]":l+=t+F(e,++c);return l}(e),n)),l&&(a.sticky=!0),h.length&&(a.groups=h)),e!==g)try{b(r,"source",""===g?"(?:)":g)}catch(e){}return r},K=d(D),Y=0;K.length>Y;)h(Z,D,K[Y++]);V.constructor=Z,Z.prototype=V,g(r,"RegExp",Z,{constructor:!0})}x("RegExp")},38:function(e,t,n){"use strict";n.r(t),n.d(t,"SingleLineFindReplaceDialog",(function(){return V})),n.d(t,"cleanup",(function(){return P})),n.d(t,"default",(function(){return A})),n.d(t,"hideSingleLineFindReplaceDialog",(function(){return W})),n.d(t,"showSingleLineFindReplaceDialog",(function(){return T})),n.d(t,"useSingleLineFindReplace",(function(){return s}));var c=n(9),l=n(0),o=(n(27),n(1)),r=n(6),a=n(2),i=n(3);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t){n&&(e=n);var c=0,l=function(){};return{s:l,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){a=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(a)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=Array(t);n<t;n++)c[n]=e[n];return c}var s=function(e,t){var n=Object(l.eb)(!1),a=Object(l.eb)(""),i=Object(l.eb)(""),b=Object(l.eb)(!1),s=Object(l.eb)({matchCase:!1,matchWholeWord:!1,useWildcards:!1,matchDiacritics:!1,matchHalfFullWidth:!1}),d=Object(l.eb)({current:0,total:0}),f=Object(l.eb)([]),O=Object(l.eb)(-1),p=Object(l.fb)((function(){return!a.value})),j=Object(l.fb)((function(){return!a.value||0===d.value.total})),v=function(e){return e.replace(/[\uFF01-\uFF5E]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))},h=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},g=function(e,t){for(var n,c=[],l=t.replace(/\*/g,".*").replace(/\?/g,".").replace(/\./g,"\\."),o=new RegExp(l,"g");null!==(n=o.exec(e));)c.push({index:n.index,length:n[0].length}),n.index===o.lastIndex&&o.lastIndex++;return c},m=function(t){e.selectionStart=t.index,e.selectionEnd=t.index+t.length,e.isSelecting=!0,e.cursorPosition=t.index+t.length,e.updateCursorPosition(),e.updateSelectionHighlight(),e.cursor.focus()},y=function(){a.value&&(C(),0!==f.value.length&&(-1===O.value||O.value>=f.value.length-1?O.value=0:O.value++,d.value.current=O.value+1,m(f.value[O.value])))},w=function(t){if(!a.value||0===t.length)return 0;var n=e.mText.textString,l=Object(c.Cd)(t).sort((function(e,t){return t.index-e.index}));e.saveToHistory();var r,b=n,s=u(l);try{for(s.s();!(r=s.n()).done;){var d=r.value;b=b.substring(0,d.index)+i.value+b.substring(d.index+d.length)}}catch(e){s.e(e)}finally{s.f()}return e.mText.textString=b,e.updateBox(),e.clearSelection(),O.value=-1,f.value=[],C(),o.n.getCurrentMxCAD().updateDisplay(),l.length},x=function(){O.value=-1,f.value=[],d.value={current:0,total:0},e.clearSelection()},C=Object(r.b)((function(){x(),a.value&&(f.value=function(){if(!a.value)return[];var t=[],n=e.mText.textString;if(!n)return[];var c=n,l=a.value;if(s.value.matchCase||(c=n.toLowerCase(),l=a.value.toLowerCase()),s.value.matchHalfFullWidth||(c=v(c),l=v(l)),s.value.matchDiacritics||(c=h(c),l=h(l)),s.value.useWildcards)return g(c,l);for(var o,r=0;-1!==(o=c.indexOf(l,r));){if(s.value.matchWholeWord){var i=o>0?c[o-1]:null,u=o+l.length<c.length?c[o+l.length]:null,b=!i||!/\w/.test(i),d=!u||!/\w/.test(u);if(!b||!d){r=o+1;continue}}t.push({index:o,length:l.length}),r=o+1}return t}(),d.value.total=f.value.length,b.value=!0,f.value.length>0&&(O.value=0,d.value.current=1,m(f.value[0])))}),300),S=function(){if(e.hasSelection()){var t=e.getSelectedText();t&&(a.value=t)}n.value=!0,setTimeout((function(){C()}),100)},k=function(){n.value=!1,e.clearSelection(),x(),null!=t&&t.onClose&&t.onClose()};return{isShow:n,findText:a,replaceText:i,optionsRef:s,resultStats:d,hasSearched:b,disableFind:p,disableReplace:j,findNext:y,findPrevious:function(){a.value&&(C(),0!==f.value.length&&(-1===O.value||O.value<=0?O.value=f.value.length-1:O.value--,d.value.current=O.value+1,m(f.value[O.value])))},replaceCurrent:function(){if(-1!==O.value&&0!==f.value.length){var e=f.value[O.value];w([e]),f.value.length>0&&y()}},replaceAll:function(){if(0!==f.value.length){var e=w(f.value);e>0&&console.log(Object(c.zd)("已替换 ".concat(e," 处文本")))}},refreshSearch:C,showDialog:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?S():k()},closeDialog:k}},d={class:"find-replace-header",id:"single_line_text_find_replace_dialog_header"},f={class:"dialog-title"},O={class:"find-replace-content"},p={class:"input-row find-row"},j={class:"label"},v={class:"input-row replace-row"},h={class:"label"},g={class:"options-area"},m={class:"option-row"},y={class:"option-row"},w={class:"option-row"},x={class:"option-row"},C={class:"option-row"},S={class:"right-buttons"},k={key:0,class:"search-stats mt-2"},_={key:1,class:"search-stats mt-2 error-text"};const D=Object(l.db)({__name:"index",props:{editor:{},onClose:{type:Function}},setup:function(e,t){var n=t.expose,o=e,r=s(o.editor,{onClose:o.onClose}),i=r.isShow,u=r.findText,b=r.replaceText,D=r.optionsRef,V=r.resultStats,E=r.hasSearched,R=r.disableFind,F=r.disableReplace,z=r.findNext,T=r.findPrevious,W=r.replaceCurrent,P=r.replaceAll,A=r.showDialog,U=r.closeDialog,I=r.refreshSearch,L=Object(l.eb)(null),H=Object(l.eb)(null),N=function(e){"Escape"===e.key?U():"Enter"===e.key&&e.ctrlKey&&z()},Z=Object(l.eb)(0),K=Object(l.eb)(0),Y=function(){setTimeout((function(){H.value&&H.value.focus()}))};return Object(l.hb)([u,function(){return D.value}],(function(){I(),Y()}),{deep:!0}),Object(l.hb)(i,(function(e){e?(document.addEventListener("keydown",N),Y()):document.removeEventListener("keydown",N)})),n({showDialog:A}),function(e,t){var n=Object(l.J)("draggable");return Object(l.nb)(),Object(l.lb)(l.u,{to:"body"},[Object(l.f)(i)?Object(l.yb)((Object(l.nb)(),Object(l.bb)("div",{key:0,ref_key:"dialogRef",ref:L,class:"find-replace-dialog",onKeydown:t[7]||(t[7]=Object(l.Q)((function(){return Object(l.f)(U)&&Object(l.f)(U).apply(void 0,arguments)}),["esc"]))},[Object(l.kb)("div",d,[Object(l.kb)("div",f,[Object(l.C)(a.X,{src:Object(l.f)(c.gd)(),alt:"logo",width:"24",height:"24",class:"mr-2"},null,8,["src"]),Object(l.kb)("span",null,Object(l.sb)(Object(l.f)(c.zd)("1823")),1)]),Object(l.C)(a.w,{icon:"",size:"x-small",variant:"text",onClick:Object(l.f)(U),class:"close-btn"},{default:Object(l.vb)((function(){return[Object(l.C)(a.C,{icon:"cha",size:"small"})]})),_:1},8,["onClick"])]),Object(l.kb)("div",O,[Object(l.kb)("div",p,[Object(l.C)(Object(l.f)(a.Y),{modelValue:Object(l.f)(u),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(l.s)(u)?u.value=e:null}),onKeyup:Object(l.Q)(Object(l.f)(z),["enter"]),ref_key:"findInputRef",ref:H},{prepend:Object(l.vb)((function(){return[Object(l.kb)("label",j,Object(l.sb)(Object(l.f)(c.zd)("2167"))+":",1)]})),append:Object(l.vb)((function(){return[Object(l.C)(a.w,{onClick:Object(l.f)(z),width:"80",height:"21",disabled:Object(l.f)(R)},{default:Object(l.vb)((function(){return[Object(l.pb)(Object(l.sb)(Object(l.f)(c.zd)("2168")),1)]})),_:1},8,["onClick","disabled"])]})),_:1},8,["modelValue","onKeyup"])]),Object(l.kb)("div",v,[Object(l.C)(Object(l.f)(a.Y),{modelValue:Object(l.f)(b),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(l.s)(b)?b.value=e:null})},{prepend:Object(l.vb)((function(){return[Object(l.kb)("label",h,Object(l.sb)(Object(l.f)(c.zd)("2169"))+":",1)]})),append:Object(l.vb)((function(){return[Object(l.C)(a.w,{onClick:Object(l.f)(W),width:"80",height:"21",disabled:Object(l.f)(F)},{default:Object(l.vb)((function(){return[Object(l.pb)(Object(l.sb)(Object(l.f)(c.zd)("2170")),1)]})),_:1},8,["onClick","disabled"])]})),_:1},8,["modelValue"])]),Object(l.kb)("div",g,[Object(l.kb)("div",m,[Object(l.C)(a.Z,{modelValue:Object(l.f)(D).matchCase,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(l.f)(D).matchCase=e}),label:Object(l.f)(c.zd)("2171")},null,8,["modelValue","label"])]),Object(l.kb)("div",y,[Object(l.C)(a.Z,{modelValue:Object(l.f)(D).matchWholeWord,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(l.f)(D).matchWholeWord=e}),label:Object(l.f)(c.zd)("2172")},null,8,["modelValue","label"])]),Object(l.kb)("div",w,[Object(l.C)(a.Z,{modelValue:Object(l.f)(D).useWildcards,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Object(l.f)(D).useWildcards=e}),label:Object(l.f)(c.zd)("2173")},null,8,["modelValue","label"])]),Object(l.kb)("div",x,[Object(l.C)(a.Z,{modelValue:Object(l.f)(D).matchDiacritics,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Object(l.f)(D).matchDiacritics=e}),label:Object(l.f)(c.zd)("2174")},null,8,["modelValue","label"])]),Object(l.kb)("div",C,[Object(l.C)(a.Z,{modelValue:Object(l.f)(D).matchHalfFullWidth,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Object(l.f)(D).matchHalfFullWidth=e}),label:Object(l.f)(c.zd)("2175")},null,8,["modelValue","label"])])]),Object(l.kb)("div",S,[Object(l.C)(a.w,{onClick:Object(l.f)(T),width:"80",height:"21",disabled:Object(l.f)(R),class:"mb-2"},{default:Object(l.vb)((function(){return[Object(l.pb)(Object(l.sb)(Object(l.f)(c.zd)("184")),1)]})),_:1},8,["onClick","disabled"]),Object(l.C)(a.w,{onClick:Object(l.f)(P),width:"80",height:"21",disabled:Object(l.f)(F)},{default:Object(l.vb)((function(){return[Object(l.pb)(Object(l.sb)(Object(l.f)(c.zd)("2176")),1)]})),_:1},8,["onClick","disabled"]),Object(l.f)(V).total>0?(Object(l.nb)(),Object(l.bb)("div",k,Object(l.sb)(Object(l.f)(V).current)+" / "+Object(l.sb)(Object(l.f)(V).total),1)):Object(l.f)(u)&&Object(l.f)(E)?(Object(l.nb)(),Object(l.bb)("div",_,Object(l.sb)(Object(l.f)(c.zd)("2177")),1)):Object(l.rb)("",!0)])])],32)),[[n,{downEl:"#single_line_text_find_replace_dialog_header",x:Z.value,y:K.value}]]):Object(l.rb)("",!0)])}}}),V=Object(c.s)(D,[["__scopeId","data-v-7c747613"]]);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}var R,F,z=!1;var T=function(e){try{if(z&&R&&R.component){var t=R.component;return void(t&&t.exposed&&t.exposed.showDialog(!0))}W();var n=function(){try{return Object(c.hd)()||null}catch(e){return console.error("获取应用实例失败:",e),null}}();F||(F=document.createElement("div"),document.body.appendChild(F)),R=Object(l.C)(V,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(i.b)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)),n&&n._context&&(R.appContext=n._context),F&&(Object(l.d)(R,F),z=!0,setTimeout((function(){if(R&&R.component){var e=R.component;e&&e.exposed&&e.exposed.showDialog(!0)}}),0))}catch(e){console.error("显示单行文本查找替换对话框时出错:",e)}},W=function(){try{if(R&&R.component){var e=R.component;e&&e.exposed&&e.exposed.showDialog(!1),e.props&&"function"==typeof e.props.onClose&&e.props.onClose(),setTimeout((function(){F&&(Object(l.d)(null,F),z=!1)}),300)}}catch(e){if(console.error("隐藏单行文本查找替换对话框时出错:",e),F){try{Object(l.d)(null,F)}catch(e){}z=!1}}},P=function(){try{F&&(R&&R.component&&(R.component.exposed&&R.component.exposed.showDialog(!1),R.component.props&&"function"==typeof R.component.props.onClose&&R.component.props.onClose()),Object(l.d)(null,F),F.parentNode&&F.parentNode.removeChild(F),F=void 0,R=void 0,z=!1)}catch(e){console.error("清理单行文本查找替换对话框资源时出错:",e)}};const A={SingleLineFindReplaceDialog:V,useSingleLineFindReplace:s,create:function(e){return s(e)},show:T,hide:W,cleanup:P}}}]);