(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{45:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return d}));var n=c(9),b=c(0),r=c(1),a=c(2),u=function(e){return e[e.HOLD=0]="HOLD",e[e.CONVERT_TO_BLOCK=1]="CONVERT_TO_BLOCK",e[e.DELETE=2]="DELETE",e}(u||{}),l={class:"px-3"},s={class:"f-flex justify-center align-center mt-2"},o={class:"f-flex justify-center align-center mt-2"},i={class:"d-flex flex-column"},O={key:0,class:"f-flex justify-center align-center mt-2"},j={key:1};const f=Object(b.db)({__name:"index",setup:function(e){var t,c=n.sb.isShow,f=n.sb.showDialog,d=function(){var e,t=Object(b.eb)(""),c=Object(b.eb)(Object(n.rb)()),a=Object(n.pd)(!1,"Mx_CreateBlocksDialog_is_specify_on_screen_get_base_point"),u=Object(b.gb)({x:0,y:0,z:0}),l=function(){var e=Object(n.B)(n.C.mark((function e(){var t,c,b,a,l;return n.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new r.ob).clearLastInputPoint(),t.setMessage(Object(n.zd)("2218")),e.next=1,t.go();case 1:if(c=e.sent){e.next=2;break}return e.abrupt("return");case 2:return b=c.x,a=c.y,l=c.z,u.x=Object(n.Bd)(b,3),u.y=Object(n.Bd)(a,3),u.z=Object(n.Bd)(l,3),e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=Object(n.pd)(!1,"Mx_CreateBlocksDialog_is_specify_on_screen_select_object"),o=Object(n.pd)(2,"Mx_CreateBlocksDialog_select_Object_operation_type"),i=Object(b.eb)(!0),O=Object(b.eb)(0),j=function(){var t=Object(n.B)(n.C.mark((function t(){var c;return n.C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new r.pb,O.value=0,t.next=1,e.userSelect(Object(n.zd)("1639"));case 1:if(t.sent){t.next=2;break}return t.abrupt("return");case 2:if(c=e.count(),O.value=c,0!==c){t.next=3;break}return i.value=!0,t.abrupt("return");case 3:return i.value=!1,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=Object(b.eb)("");return{blockName:t,blockNames:c,getBlockNames:n.rb,basePoint:u,getMouseClickGetBasePoint:l,isSpecifyOnScreenGetBasePoint:a,isNoSelectObject:i,isSpecifyOnScreenSelectObject:s,selectObjectOperationType:o,selectObject:j,createBlock:function(){var e=r.n.getCurrentMxCAD().getDatabase().getBlockTable(),c=new r.tb;return c.name=t.value,e.add(c)},loadBlock:function(e,t,c){var n;null===(n=t.getMcDbBlockTableRecord())||void 0===n||n.getAllEntityId().forEach((function(e){var t;null===(t=e.getMcDbEntity())||void 0===t||t.erase()}));var b=t.getMcDbBlockTableRecord();if(b){e.forEach((function(e){var t=e.getMcDbEntity();if(t){var c=t.clone();b&&b.appendAcDbEntity(c)}})),b.origin=c;var a=new r.nb;return a.blockTableRecordId=t,a.position=c,a}},explainText:f,selectCount:O}}(),v=d.blockName,p=d.blockNames,m=d.basePoint,C=d.getMouseClickGetBasePoint,k=d.isSpecifyOnScreenGetBasePoint,_=d.isNoSelectObject,x=d.isSpecifyOnScreenSelectObject,y=d.selectObjectOperationType,g=d.selectObject,w=d.selectCount,B=d.createBlock,V=d.loadBlock;Object(b.hb)(c,(function(e){e&&(p.value=Object(n.rb)())}));var h=function(){m.x=0,m.y=0,m.z=0,v.value="",t=void 0,_.value=!0,p.value=Object(n.rb)()},D=function(){var e=Object(n.B)(n.C.mark((function e(){return n.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=1,C();case 1:f(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(n.B)(n.C.mark((function e(){return n.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=1,g();case 1:t=e.sent,f(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=[{name:"确定",fun:function(){var e=Object(n.B)(n.C.mark((function e(){var c,b,a,l,s,o,i,O;return n.C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(n.tb)(),b=c.open,a=!1,l=p.value.includes(v.value),""!==v.value){e.next=1;break}return e.abrupt("return",Object(n.nd)().error(Object(n.zd)("图块名不能为空")+"!"));case 1:if(!l){e.next=5;break}return e.prev=2,e.next=3,new Promise((function(e,t){b({title:Object(n.zd)("是否替换该图块"),text:Object(n.zd)("已定义")+v.value+Object(n.zd)("的")+Object(n.zd)("图块")+"，"+Object(n.zd)("是否替换")+"?",define:function(){a=!0,e()},cancel:function(){a=!1,t()},defineTitle:Object(n.zd)("是"),cancelTitle:Object(n.zd)("否")})}));case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),e.abrupt("return");case 5:if(a?(o=r.n.getCurrentMxCAD(),i=o.getDatabase().getBlockTable(),s=i.get(v.value)):s=B(),!k.value){e.next=6;break}return f(!1),e.next=6,C();case 6:if(!x.value){e.next=8;break}return f(!1),e.next=7,g();case 7:t=e.sent;case 8:if(t&&!_.value){e.next=9;break}return e.abrupt("return",Object(n.nd)().error(Object(n.zd)("没有为块")+v.value+Object(n.zd)("选择对象")+"!"));case 9:if(O=V(t,s,new r.wb(m.x,m.y,m.z))){e.next=10;break}return e.abrupt("return",Object(n.nd)().error(Object(n.zd)("创建块失败")+"!"));case 10:y.value!==u.HOLD&&(t.forEach((function(e){var t=e.getMcDbEntity();t&&t.erase()})),Object(n.y)()),y.value===u.CONVERT_TO_BLOCK&&r.n.getCurrentMxCAD().drawEntity(O),f(!1),h();case 11:case"end":return e.stop()}}),e,null,[[2,4]])})));return function(){return e.apply(this,arguments)}}(),primary:!0},{name:"关闭",fun:function(){f(!1),h()}}];return function(e,t){return Object(b.nb)(),Object(b.lb)(n.r,{title:e.t("212"),onClickClose:h,modelValue:Object(b.f)(c),"onUpdate:modelValue":t[7]||(t[7]=function(e){return Object(b.s)(c)?c.value=e:null}),"max-width":"400",footerBtnList:T},{default:Object(b.vb)((function(){return[Object(b.kb)("div",l,[Object(b.C)(a.lb,{class:"mt-2",modelValue:Object(b.f)(v),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(b.s)(v)?v.value=e:null}),items:Object(b.f)(p)},{prepend:Object(b.vb)((function(){return[Object(b.C)(n.v,{"key-name":"N"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1923")),1)]})),_:1})]})),_:1},8,["modelValue","items"]),Object(b.C)(a.e,{"align-stretch":""},{default:Object(b.vb)((function(){return[Object(b.C)(a.d,{cols:6,"align-self":"stretch"},{default:Object(b.vb)((function(){return[Object(b.C)(n.w,{title:e.t("1964"),class:"h-100"},{default:Object(b.vb)((function(){return[Object(b.C)(a.Z,{modelValue:Object(b.f)(k),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(b.s)(k)?k.value=e:null})},{label:Object(b.vb)((function(){return[Object(b.C)(n.v,{"key-name":"S"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1927")),1)]})),_:1})]})),_:1},8,["modelValue"]),Object(b.kb)("div",s,[Object(b.C)(n.x,{disabled:Object(b.f)(k),onClick:D},null,8,["disabled"]),Object(b.C)(n.v,{class:Object(b.ob)(Object(b.f)(k)?"text-disabled":""),"key-name":"S"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1965")),1)]})),_:1},8,["class"])]),Object(b.C)(a.Y,{class:"mt-3",modelValue:Object(b.f)(m).x,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(b.f)(m).x=e}),type:"number",disabled:Object(b.f)(k)},{prepend:Object(b.vb)((function(){return t[8]||(t[8]=[Object(b.kb)("span",{class:""}," X:",-1)])})),_:1},8,["modelValue","disabled"]),Object(b.C)(a.Y,{class:"mt-1",modelValue:Object(b.f)(m).y,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(b.f)(m).y=e}),type:"number",disabled:Object(b.f)(k)},{prepend:Object(b.vb)((function(){return t[9]||(t[9]=[Object(b.kb)("span",{class:""}," Y: ",-1)])})),_:1},8,["modelValue","disabled"]),Object(b.C)(a.Y,{class:"mt-1",modelValue:Object(b.f)(m).z,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Object(b.f)(m).z=e}),type:"number",disabled:Object(b.f)(k)},{prepend:Object(b.vb)((function(){return t[10]||(t[10]=[Object(b.kb)("span",{class:""}," Z:",-1)])})),_:1},8,["modelValue","disabled"])]})),_:1},8,["title"])]})),_:1}),Object(b.C)(a.d,{cols:6,"align-self":"stretch"},{default:Object(b.vb)((function(){return[Object(b.C)(n.w,{title:e.t("177"),class:"h-100"},{default:Object(b.vb)((function(){return[Object(b.C)(a.Z,{modelValue:Object(b.f)(x),"onUpdate:modelValue":t[5]||(t[5]=function(e){return Object(b.s)(x)?x.value=e:null})},{label:Object(b.vb)((function(){return[Object(b.C)(n.v,{class:"","key-name":"S"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1927")),1)]})),_:1})]})),_:1},8,["modelValue"]),Object(b.kb)("div",o,[Object(b.C)(n.x,{disabled:Object(b.f)(x),onClick:E},null,8,["disabled"]),Object(b.C)(n.v,{class:Object(b.ob)(Object(b.f)(x)?"text-disabled":""),"key-name":"I"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1602")),1)]})),_:1},8,["class"])]),Object(b.C)(a.r,{column:"",class:"mt-2",modelValue:Object(b.f)(y),"onUpdate:modelValue":t[6]||(t[6]=function(e){return Object(b.s)(y)?y.value=e:null})},{default:Object(b.vb)((function(){return[Object(b.kb)("div",i,[Object(b.C)(a.t,{value:Object(b.f)(u).HOLD,class:"mt-1"},{label:Object(b.vb)((function(){return[Object(b.C)(n.v,{class:"","key-name":"R"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1966")),1)]})),_:1})]})),_:1},8,["value"]),Object(b.C)(a.t,{value:Object(b.f)(u).CONVERT_TO_BLOCK,class:"mt-1"},{label:Object(b.vb)((function(){return[Object(b.C)(n.v,{class:"","key-name":"C"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1967")),1)]})),_:1})]})),_:1},8,["value"]),Object(b.C)(a.t,{value:Object(b.f)(u).DELETE,class:"mt-1"},{label:Object(b.vb)((function(){return[Object(b.C)(n.v,{class:"","key-name":"D"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("205")),1)]})),_:1})]})),_:1},8,["value"])])]})),_:1},8,["modelValue"]),Object(b.f)(_)?(Object(b.nb)(),Object(b.bb)("div",O,[Object(b.C)(a.C,{icon:"jinggao"}),Object(b.C)(n.v,{class:"","key-name":"I"},{default:Object(b.vb)((function(){return[Object(b.pb)(Object(b.sb)(e.t("1968")),1)]})),_:1})])):(Object(b.nb)(),Object(b.bb)("div",j,Object(b.sb)(e.t("1969")+":"+Object(b.f)(w)+e.t("1920")),1))]})),_:1},8,["title"])]})),_:1})]})),_:1})])]})),_:1},8,["title","modelValue"])}}}),d=Object(n.s)(f,[["__scopeId","data-v-766b5b64"]])}}]);