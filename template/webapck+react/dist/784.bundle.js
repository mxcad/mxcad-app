"use strict";(self.webpackChunkwebapck_react=self.webpackChunkwebapck_react||[]).push([[784],{6784:function(e,a,n){n.r(a),n.d(a,{default:function(){return f}});var t=n(9091),u=n(2898),l=n(5679),r=n(8285),o=n(2164),c=n(9295),i={class:"d-flex algin-center"};const f=(0,u.e)({__name:"index",setup:function(e){var a,n=t.c2.isShow,f=(0,t.x)(),v=f.setValue,s=f.stringifyJSON,d=f.remove,m=f.setLayerList,p=(0,l.s)(f).list,w=(0,u.f)(!1),h=(0,u.g)(function(){return p.value.filter(function(e){return e.name}).map(function(e){return e.name})}),y=(0,u.f)((0,t.w)(h.value)),b=(0,u.f)(!0);(0,u.i)(n,function(e){e?a=(0,t.c3)():a&&b.value&&(0,t.c4)(a)}),(0,u.i)(y,(0,c.b)(function(e){p.value.forEach(function(a,n){v("visible",e.includes(a.name),n)}),(0,t.c4)(s())},100));var x=(0,u.f)(""),g=(0,u.f)(!1),k=function(){var e=(0,t._)(t.a.mark(function e(){var a,n;return t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.c2.showDialog(!1),e.next=1,r.f.userSelect((0,t.t)("选择对象"));case 1:a=e.sent,n=new Set,a.forEach(function(e){var a=e.getMcDbEntity();a&&n.add(a.layer)}),y.value=Array.from(n),t.c2.showDialog(!0);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();(0,u.i)(x,function(e){""===e&&(g.value=!1,w.value=!1)});var V=function(){""!==x.value?(g.value=!0,w.value=!0,y.value=h.value.filter(function(e){return e.toLocaleLowerCase()===x.value.toLocaleLowerCase()})):y.value=[]},_=(0,u.f)([]),C=function(e){var a=e(_.value.map(function(e){return e.$el}),function(e,a){return a}).map;if(0!==a.length){var n=w.value?y.value:h.value;y.value=a.map(function(e){return n[e]})}},E=(0,u.g)(function(){return"".concat((0,t.t)("图层漫游")," - ").concat((0,t.t)("图层数"),":")+h.value.length}),D=function(){var e=new r.j,a=new Set;e.allSelect(),e.forEach(function(e){var n=e.getMcDbEntity();n&&a.add(n.layer)});var n=Array.from(a);d(p.value.filter(function(e){var a=e.name;return!n.includes(a)}),"this"),m(s())};return function(e,a){var l=(0,u.a6)("box-selection");return(0,u.o)(),(0,u.m)(t.U,{maxWidth:"400px",ref:"layerDialog",modelValue:(0,u.E)(n),"onUpdate:modelValue":a[4]||(a[4]=function(e){return(0,u.R)(n)?n.value=e:null}),title:E.value},{actions:(0,u.w)(function(){return[(0,u.a)(o.a1,{class:"mx-1 mt-0 mb-1 py-0 px-2 bg-dialog-card-text d-flex justify-end"},{default:(0,u.w)(function(){return[(0,u.a)(o.j,{class:"mr-5",label:e.t("2149"),modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=function(e){return b.value=e})},null,8,["label","modelValue"]),(0,u.a)(t.a3,{onClick:D},{default:(0,u.w)(function(){return[(0,u.q)((0,u.t)(e.t("2150")),1)]}),_:1}),(0,u.a)(t.a3,{onClick:a[3]||(a[3]=function(e){return(0,u.E)(t.c2).showDialog(!1)})},{default:(0,u.w)(function(){return[(0,u.q)((0,u.t)(e.t("2006")),1)]}),_:1})]}),_:1})]}),default:(0,u.w)(function(){return[(0,u.l)("div",i,[(0,u.a)(t.Y,{onClick:k}),(0,u.a)(o.i,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return x.value=e}),onKeydown:(0,u.ad)(V,["enter"])},null,8,["modelValue"]),(0,u.a)(o.j,{label:e.t("2148"),modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return w.value=e}),disabled:!g.value},null,8,["label","modelValue","disabled"])]),(0,u.z)(((0,u.o)(),(0,u.m)(o.k,{density:"compact",color:"primary",style:{height:"300px"}},{default:(0,u.w)(function(){return[((0,u.o)(!0),(0,u.c)(u.F,null,(0,u.d)(w.value?(0,t.w)(y.value):h.value,function(e,a){return(0,u.o)(),(0,u.m)(o.c,{class:"ma-0",title:e,ref_for:!0,ref_key:"refItems",ref:_,key:a,onClick:function(n){return function(e,a,n){if(e.ctrlKey){var u=y.value.indexOf(a);y.value=-1===u?[].concat((0,t.w)(y.value),[a]):y.value.filter(function(e){return e!==a})}else if(e.shiftKey){var l=y.value.map(function(e){return h.value.indexOf(e)}),r=Math.min.apply(Math,(0,t.w)(l)),o=Math.max.apply(Math,(0,t.w)(l));r>n?r=n:o=n,y.value=h.value.slice(r,o+1)}else y.value=[a]}(n,e,a)},active:w.value?w.value:y.value.includes(e)},null,8,["title","onClick","active"])}),128))]}),_:1})),[[l,C]])]}),_:1},8,["modelValue","title"])}}})}}]);