"use strict";(self.webpackChunkwebapck_react=self.webpackChunkwebapck_react||[]).push([[698],{698:function(e,a,n){n.r(a),n.d(a,{SingleLineFindReplaceDialog:function(){return S},cleanup:function(){return V},default:function(){return E},hideSingleLineFindReplaceDialog:function(){return R},showSingleLineFindReplaceDialog:function(){return O},useSingleLineFindReplace:function(){return o}});var t=n(8741);function l(e,a){(null==a||a>e.length)&&(a=e.length);for(var n=0,t=Array(a);n<a;n++)t[n]=e[n];return t}n(7663);var o=function(e,a){var n=(0,t.aq)(!1),o=(0,t.aq)(""),r=(0,t.aq)(""),i=(0,t.aq)(!1),u=(0,t.aq)({matchCase:!1,matchWholeWord:!1,useWildcards:!1,matchDiacritics:!1,matchHalfFullWidth:!1}),c=(0,t.aq)({current:0,total:0}),s=(0,t.aq)([]),d=(0,t.aq)(-1),f=(0,t.ar)(function(){return!o.value}),p=(0,t.ar)(function(){return!o.value||0===c.value.total}),v=function(e){return e.replace(/[\uFF01-\uFF5E]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})},h=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},g=function(a){e.selectionStart=a.index,e.selectionEnd=a.index+a.length,e.isSelecting=!0,e.cursorPosition=a.index+a.length,e.updateCursorPosition(),e.updateSelectionHighlight(),e.cursor.focus()},y=function(){o.value&&(x(),0!==s.value.length&&(-1===d.value||d.value>=s.value.length-1?d.value=0:d.value++,c.value.current=d.value+1,g(s.value[d.value])))},m=function(a){if(!o.value||0===a.length)return 0;var n=e.mText.textString,i=(0,t.Y)(a).sort(function(e,a){return a.index-e.index});e.saveToHistory();var u,c=n,f=function(e,a){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return l(e,a);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,a):void 0}}(e))||a){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw r}}}}(i);try{for(f.s();!(u=f.n()).done;){var p=u.value;c=c.substring(0,p.index)+r.value+c.substring(p.index+p.length)}}catch(e){f.e(e)}finally{f.f()}return e.mText.textString=c,e.updateBox(),e.clearSelection(),d.value=-1,s.value=[],x(),t.M.getCurrentMxCAD().updateDisplay(),i.length},b=function(){d.value=-1,s.value=[],c.value={current:0,total:0},e.clearSelection()},x=(0,t.as)(function(){b(),o.value&&(s.value=function(){if(!o.value)return[];var a=[],n=e.mText.textString;if(!n)return[];var t=n,l=o.value;if(u.value.matchCase||(t=n.toLowerCase(),l=o.value.toLowerCase()),u.value.matchHalfFullWidth||(t=v(t),l=v(l)),u.value.matchDiacritics||(t=h(t),l=h(l)),u.value.useWildcards)return function(e,a){for(var n,t=[],l=a.replace(/\*/g,".*").replace(/\?/g,".").replace(/\./g,"\\."),o=new RegExp(l,"g");null!==(n=o.exec(e));)t.push({index:n.index,length:n[0].length}),n.index===o.lastIndex&&o.lastIndex++;return t}(t,l);for(var r,i=0;-1!==(r=t.indexOf(l,i));){if(u.value.matchWholeWord){var c=r>0?t[r-1]:null,s=r+l.length<t.length?t[r+l.length]:null,d=!c||!/\w/.test(c),f=!s||!/\w/.test(s);if(!d||!f){i=r+1;continue}}a.push({index:r,length:l.length}),i=r+1}return a}(),c.value.total=s.value.length,i.value=!0,s.value.length>0&&(d.value=0,c.value.current=1,g(s.value[0])))},300),w=function(){n.value=!1,e.clearSelection(),b(),null!=a&&a.onClose&&a.onClose()};return{isShow:n,findText:o,replaceText:r,optionsRef:u,resultStats:c,hasSearched:i,disableFind:f,disableReplace:p,findNext:y,findPrevious:function(){o.value&&(x(),0!==s.value.length&&(-1===d.value||d.value<=0?d.value=s.value.length-1:d.value--,c.value.current=d.value+1,g(s.value[d.value])))},replaceCurrent:function(){if(-1!==d.value&&0!==s.value.length){var e=s.value[d.value];m([e]),s.value.length>0&&y()}},replaceAll:function(){if(0!==s.value.length){var e=m(s.value);e>0&&console.log((0,t.t)("已替换 ".concat(e," 处文本")))}},refreshSearch:x,showDialog:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?w():function(){if(e.hasSelection()){var a=e.getSelectedText();a&&(o.value=a)}n.value=!0,setTimeout(function(){x()},100)}()},closeDialog:w}},r={class:"find-replace-header",id:"single_line_text_find_replace_dialog_header"},i={class:"dialog-title"},u={class:"find-replace-content"},c={class:"input-row find-row"},s={class:"label"},d={class:"input-row replace-row"},f={class:"label"},p={class:"options-area"},v={class:"option-row"},h={class:"option-row"},g={class:"option-row"},y={class:"option-row"},m={class:"option-row"},b={class:"right-buttons"},x={key:0,class:"search-stats mt-2"},w={key:1,class:"search-stats mt-2 error-text"};const C=(0,t.at)({__name:"index",props:{editor:{},onClose:{type:Function}},setup:function(e,a){var n=a.expose,l=e,C=o(l.editor,{onClose:l.onClose}),S=C.isShow,_=C.findText,k=C.replaceText,F=C.optionsRef,D=C.resultStats,O=C.hasSearched,R=C.disableFind,V=C.disableReplace,E=C.findNext,T=C.findPrevious,W=C.replaceCurrent,A=C.replaceAll,B=C.showDialog,I=C.closeDialog,P=C.refreshSearch,L=(0,t.aq)(null),j=(0,t.aq)(null),q=function(e){"Escape"===e.key?I():"Enter"===e.key&&e.ctrlKey&&E()},N=(0,t.aq)(0),U=(0,t.aq)(0),G=function(){setTimeout(function(){j.value&&j.value.focus()})};return(0,t.au)([_,function(){return F.value}],function(){P(),G()},{deep:!0}),(0,t.au)(S,function(e){e?(document.addEventListener("keydown",q),G()):document.removeEventListener("keydown",q)}),n({showDialog:B}),function(e,a){var n=(0,t.av)("draggable");return(0,t.aw)(),(0,t.ax)(t.aP,{to:"body"},[(0,t.ay)(S)?(0,t.az)(((0,t.aw)(),(0,t.aA)("div",{key:0,ref_key:"dialogRef",ref:L,class:"find-replace-dialog",onKeydown:a[7]||(a[7]=(0,t.aL)(function(){return(0,t.ay)(I)&&(0,t.ay)(I).apply(void 0,arguments)},["esc"]))},[(0,t.aB)("div",r,[(0,t.aB)("div",i,[(0,t.aC)(t.aE,{src:(0,t.ay)(t.aD)(),alt:"logo",width:"24",height:"24",class:"mr-2"},null,8,["src"]),(0,t.aB)("span",null,(0,t.aF)((0,t.ay)(t.t)("1823")),1)]),(0,t.aC)(t.aI,{icon:"",size:"x-small",variant:"text",onClick:(0,t.ay)(I),class:"close-btn"},{default:(0,t.aG)(function(){return[(0,t.aC)(t.aH,{icon:"cha",size:"small"})]}),_:1},8,["onClick"])]),(0,t.aB)("div",u,[(0,t.aB)("div",c,[(0,t.aC)((0,t.ay)(t.aM),{modelValue:(0,t.ay)(_),"onUpdate:modelValue":a[0]||(a[0]=function(e){return(0,t.aK)(_)?_.value=e:null}),onKeyup:(0,t.aL)((0,t.ay)(E),["enter"]),ref_key:"findInputRef",ref:j},{prepend:(0,t.aG)(function(){return[(0,t.aB)("label",s,(0,t.aF)((0,t.ay)(t.t)("2167"))+":",1)]}),append:(0,t.aG)(function(){return[(0,t.aC)(t.aI,{onClick:(0,t.ay)(E),width:"80",height:"21",disabled:(0,t.ay)(R)},{default:(0,t.aG)(function(){return[(0,t.aJ)((0,t.aF)((0,t.ay)(t.t)("2168")),1)]}),_:1},8,["onClick","disabled"])]}),_:1},8,["modelValue","onKeyup"])]),(0,t.aB)("div",d,[(0,t.aC)((0,t.ay)(t.aM),{modelValue:(0,t.ay)(k),"onUpdate:modelValue":a[1]||(a[1]=function(e){return(0,t.aK)(k)?k.value=e:null})},{prepend:(0,t.aG)(function(){return[(0,t.aB)("label",f,(0,t.aF)((0,t.ay)(t.t)("2169"))+":",1)]}),append:(0,t.aG)(function(){return[(0,t.aC)(t.aI,{onClick:(0,t.ay)(W),width:"80",height:"21",disabled:(0,t.ay)(V)},{default:(0,t.aG)(function(){return[(0,t.aJ)((0,t.aF)((0,t.ay)(t.t)("2170")),1)]}),_:1},8,["onClick","disabled"])]}),_:1},8,["modelValue"])]),(0,t.aB)("div",p,[(0,t.aB)("div",v,[(0,t.aC)(t.aN,{modelValue:(0,t.ay)(F).matchCase,"onUpdate:modelValue":a[2]||(a[2]=function(e){return(0,t.ay)(F).matchCase=e}),label:(0,t.ay)(t.t)("2171")},null,8,["modelValue","label"])]),(0,t.aB)("div",h,[(0,t.aC)(t.aN,{modelValue:(0,t.ay)(F).matchWholeWord,"onUpdate:modelValue":a[3]||(a[3]=function(e){return(0,t.ay)(F).matchWholeWord=e}),label:(0,t.ay)(t.t)("2172")},null,8,["modelValue","label"])]),(0,t.aB)("div",g,[(0,t.aC)(t.aN,{modelValue:(0,t.ay)(F).useWildcards,"onUpdate:modelValue":a[4]||(a[4]=function(e){return(0,t.ay)(F).useWildcards=e}),label:(0,t.ay)(t.t)("2173")},null,8,["modelValue","label"])]),(0,t.aB)("div",y,[(0,t.aC)(t.aN,{modelValue:(0,t.ay)(F).matchDiacritics,"onUpdate:modelValue":a[5]||(a[5]=function(e){return(0,t.ay)(F).matchDiacritics=e}),label:(0,t.ay)(t.t)("2174")},null,8,["modelValue","label"])]),(0,t.aB)("div",m,[(0,t.aC)(t.aN,{modelValue:(0,t.ay)(F).matchHalfFullWidth,"onUpdate:modelValue":a[6]||(a[6]=function(e){return(0,t.ay)(F).matchHalfFullWidth=e}),label:(0,t.ay)(t.t)("2175")},null,8,["modelValue","label"])])]),(0,t.aB)("div",b,[(0,t.aC)(t.aI,{onClick:(0,t.ay)(T),width:"80",height:"21",disabled:(0,t.ay)(R),class:"mb-2"},{default:(0,t.aG)(function(){return[(0,t.aJ)((0,t.aF)((0,t.ay)(t.t)("184")),1)]}),_:1},8,["onClick","disabled"]),(0,t.aC)(t.aI,{onClick:(0,t.ay)(A),width:"80",height:"21",disabled:(0,t.ay)(V)},{default:(0,t.aG)(function(){return[(0,t.aJ)((0,t.aF)((0,t.ay)(t.t)("2176")),1)]}),_:1},8,["onClick","disabled"]),(0,t.ay)(D).total>0?((0,t.aw)(),(0,t.aA)("div",x,(0,t.aF)((0,t.ay)(D).current)+" / "+(0,t.aF)((0,t.ay)(D).total),1)):(0,t.ay)(_)&&(0,t.ay)(O)?((0,t.aw)(),(0,t.aA)("div",w,(0,t.aF)((0,t.ay)(t.t)("2177")),1)):(0,t.aO)("",!0)])])],32)),[[n,{downEl:"#single_line_text_find_replace_dialog_header",x:N.value,y:U.value}]]):(0,t.aO)("",!0)])}}}),S=(0,t.aQ)(C,[["__scopeId","data-v-7c747613"]]);function _(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}var k,F,D=!1,O=function(e){try{if(D&&k&&k.component){var a=k.component;return void(a&&a.exposed&&a.exposed.showDialog(!0))}R();var n=function(){try{return(0,t.aS)()||null}catch(e){return console.error("获取应用实例失败:",e),null}}();F||(F=document.createElement("div"),document.body.appendChild(F)),k=(0,t.aC)(S,function(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?_(Object(n),!0).forEach(function(a){(0,t.L)(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}({},e)),n&&n._context&&(k.appContext=n._context),F&&((0,t.aR)(k,F),D=!0,setTimeout(function(){if(k&&k.component){var e=k.component;e&&e.exposed&&e.exposed.showDialog(!0)}},0))}catch(e){console.error("显示单行文本查找替换对话框时出错:",e)}},R=function(){try{if(k&&k.component){var e=k.component;e&&e.exposed&&e.exposed.showDialog(!1),e.props&&"function"==typeof e.props.onClose&&e.props.onClose(),setTimeout(function(){F&&((0,t.aR)(null,F),D=!1)},300)}}catch(e){if(console.error("隐藏单行文本查找替换对话框时出错:",e),F){try{(0,t.aR)(null,F)}catch(e){}D=!1}}},V=function(){try{F&&(k&&k.component&&(k.component.exposed&&k.component.exposed.showDialog(!1),k.component.props&&"function"==typeof k.component.props.onClose&&k.component.props.onClose()),(0,t.aR)(null,F),F.parentNode&&F.parentNode.removeChild(F),F=void 0,k=void 0,D=!1)}catch(e){console.error("清理单行文本查找替换对话框资源时出错:",e)}};const E={SingleLineFindReplaceDialog:S,useSingleLineFindReplace:o,create:function(e){return o(e)},show:O,hide:R,cleanup:V}},7663:function(e,a,n){var t=n(8741),l=t.bE.f,o=t.bH,r=t.bI,i=t.bJ,u=t.bK,c=t.bS,s=t.bT,d=t.bY,f=t.bF.f,p=t.bU,v=t.bV,h=t.bW,g=t.bX,y=t.bL,m=function(e,a,n){n in e||l(e,n,{configurable:!0,get:function(){return a[n]},set:function(e){a[n]=e}})},b=t.bM,x=t.bN,w=t.bZ,C=t.bG.enforce,S=t.bO,_=t.bP,k=t.bQ,F=t.bR,D=_("match"),O=r.RegExp,R=O.prototype,V=r.SyntaxError,E=i(R.exec),T=i("".charAt),W=i("".replace),A=i("".indexOf),B=i("".slice),I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,P=/a/g,L=/a/g,j=new O(P)!==P,q=y.MISSED_STICKY,N=y.UNSUPPORTED_Y;if(u("RegExp",o&&(!j||q||k||F||x(function(){return L[D]=!1,O(P)!==P||O(L)===L||"/a/i"!==String(O(P,"i"))})))){for(var U=function(e,a){var n,t,l,o,r,i,u=p(R,this),f=v(e),y=void 0===a,m=[],b=e;if(!u&&f&&y&&e.constructor===U)return e;if((f||p(R,e))&&(e=e.source,y&&(a=g(b))),e=void 0===e?"":h(e),a=void 0===a?"":h(a),b=e,k&&"dotAll"in P&&(t=!!a&&A(a,"s")>-1)&&(a=W(a,/s/g,"")),n=a,q&&"sticky"in P&&(l=!!a&&A(a,"y")>-1)&&N&&(a=W(a,/y/g,"")),F&&(o=function(e){for(var a,n=e.length,t=0,l="",o=[],r=d(null),i=!1,u=!1,c=0,s="";t<=n;t++){if("\\"===(a=T(e,t)))a+=T(e,++t);else if("]"===a)i=!1;else if(!i)switch(!0){case"["===a:i=!0;break;case"("===a:E(I,B(e,t+1))&&(t+=2,u=!0),l+=a,c++;continue;case">"===a&&u:if(""===s||w(r,s))throw new V("Invalid capture group name");r[s]=!0,o[o.length]=[s,c],u=!1,s="";continue}u?s+=a:l+=a}return[l,o]}(e),e=o[0],m=o[1]),r=c(O(e,a),u?this:R,U),(t||l||m.length)&&(i=C(r),t&&(i.dotAll=!0,i.raw=U(function(e){for(var a,n=e.length,t=0,l="",o=!1;t<=n;t++)"\\"!==(a=T(e,t))?o||"."!==a?("["===a?o=!0:"]"===a&&(o=!1),l+=a):l+="[\\s\\S]":l+=a+T(e,++t);return l}(e),n)),l&&(i.sticky=!0),m.length&&(i.groups=m)),e!==b)try{s(r,"source",""===b?"(?:)":b)}catch(e){}return r},G=f(O),H=0;G.length>H;)m(U,O,G[H++]);R.constructor=U,U.prototype=R,b(r,"RegExp",U,{constructor:!0})}S("RegExp")}}]);