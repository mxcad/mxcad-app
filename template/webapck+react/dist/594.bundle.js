"use strict";(self.webpackChunkwebapck_react=self.webpackChunkwebapck_react||[]).push([[594],{3594:function(t,e,n){n.r(e),n.d(e,{default:function(){return I}});var a=n(9091),r=n(2898),u=n(9417),l=n(2164),i=n(8285);function o(t){var e=[],n=null;return t.split("\n").forEach(function(t){if(""!==t.trim())if(t.startsWith("*")){n&&(n.value+=")",e.push(n));var r=t.substring(1).split(",").map(function(t){return t.trim()});n={id:r[0],name:r[1],value:"(",imgPath:new URL("imgs/".concat(r[0],".png"),(0,a.bj)()).href}}else{if(!n)return void console.error("Invalid pattern file format. Missing pattern start marker (*)");var u=t.trim().split(",").map(function(t){return t.startsWith(".")?"0"+t:t}).join(),l=("("===n.value?"(":" (")+u+")";n.value+=l}}),n&&e.push(n),e}var c=function(t){return t.ANSI="ANSI",t.ISO="ISO",t.ANY="ANY",t}(c||{}),s=(0,u._)((0,u._)((0,u._)({},"ANSI",new URL("fonts/mx.pat",(0,a.bj)()).href),"ISO",new URL("fonts/mxiso.pat",(0,a.bj)()).href),"ANY",new URL("fonts/mxuser.pat",(0,a.bj)()).href),f=(0,r.f)(),d=(0,r.f)(0),v={};Object.keys(s).forEach(function(){var t=(0,a._)(a.a.mark(function t(e){var n,r,u,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s[e],t.next=1,fetch(n);case 1:return r=t.sent,t.next=2,r.blob();case 2:return u=t.sent,t.next=3,(0,a.bi)(u);case 3:l=t.sent,v[e]=o(l),f.value||m(e);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());var p=(0,r.f)(""),m=function(t){p.value=s[t],f.value=v[t];var e=0;w.value&&(e=f.value.indexOf(w.value)),w.value=f.value[e]},w=(0,r.f)(),h=function(t){if(f.value){var e=f.value.indexOf(t);e>=0&&(d.value=e)}w.value=t},_={class:"px-3"},b={class:"d-flex algin-center mt-3"},g={class:"mt-2"},x={class:"fill_box"},k=["onClick"],y={class:"d-inline-block text-truncate"};const C=(0,r.e)({__name:"FillSelectDialog",emits:["change"],setup:function(t,e){var n=e.expose,i=e.emit,s=(0,a.aJ)(!1),v=s.isShow,w=s.showDialog,h=(0,r.f)(),C=function(){h.value&&h.value.click()},E=function(){var t=(0,a._)(a.a.mark(function t(e){var n,r,l,i,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target,r=n.files){t.next=1;break}return t.abrupt("return");case 1:return l=r[0],t.next=2,(0,a.bk)(l);case 2:if(i=t.sent,"object"===(0,u.a)(i)){t.next=3;break}return t.abrupt("return");case 3:return n.value="",t.next=4,(0,a.bi)(i);case 4:c=t.sent,f.value=o(c);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),V=i,D=function(){if(f.value){var t=f.value[d.value];V("change",t)}w(!1)},S=[{name:"确定",fun:D,primary:!0},{name:"关闭",fun:function(){return w(!1)}}];return n({showDialog:w}),function(t,e){return(0,r.o)(),(0,r.m)(a.U,{title:t.t("2040"),"max-width":"400",modelValue:(0,r.E)(v),"onUpdate:modelValue":e[4]||(e[4]=function(t){return(0,r.R)(v)?v.value=t:null}),footerBtnList:S},{default:(0,r.w)(function(){return[(0,r.l)("div",_,[(0,r.l)("div",b,[(0,r.z)((0,r.l)("input",{class:"form__inset w-100",disabled:!0,"onUpdate:modelValue":e[0]||(e[0]=function(t){return(0,r.R)(p)?p.value=t:null})},null,512),[[r.ab,(0,r.E)(p)]]),(0,r.a)(a.a3,{onClick:C,class:"ml-1"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(t.t("219"))+"(F)...",1)]}),_:1})]),(0,r.l)("input",{type:"file",ref_key:"fillFileSelect",ref:h,onChange:E,style:{display:"none"},accept:".pat"},null,544),(0,r.l)("div",g,[(0,r.a)(l.V,{density:"compact",class:"mr-2",onClick:e[1]||(e[1]=function(t){return(0,r.E)(m)((0,r.E)(c).ANSI)})},{default:(0,r.w)(function(){return e[5]||(e[5]=[(0,r.q)("ANSI")])}),_:1}),(0,r.a)(l.V,{density:"compact",class:"mr-2",onClick:e[2]||(e[2]=function(t){return(0,r.E)(m)((0,r.E)(c).ISO)})},{default:(0,r.w)(function(){return e[6]||(e[6]=[(0,r.q)("ISO")])}),_:1}),(0,r.a)(l.V,{density:"compact",onClick:e[3]||(e[3]=function(t){return(0,r.E)(m)((0,r.E)(c).ANY)})},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(t.t("2041")),1)]}),_:1})]),(0,r.l)("div",x,[((0,r.o)(!0),(0,r.c)(r.F,null,(0,r.d)((0,r.E)(f),function(t,e){return(0,r.o)(),(0,r.m)(l.b,{text:t.id+" "+t.name,location:"bottom","open-delay":800},{activator:(0,r.w)(function(n){var a=n.props;return[(0,r.l)("div",(0,r.v)({ref_for:!0},a,{class:["fill_pattern",(0,r.E)(d)===e?"fill_pattern_active":""],onClick:function(t){return d.value=e},onDblclick:D}),[(0,r.a)(l.h,{src:t.imgPath||"",width:"32",height:"32"},null,8,["src"]),(0,r.l)("span",y,(0,r.t)(t.id),1)],16,k)]}),_:2},1032,["text"])}),256))])])]}),_:1},8,["title","modelValue"])}}}),E=(0,a.O)(C,[["__scopeId","data-v-0b03bfc9"]]);var V={class:"px-3"},D={class:"d-flex align-center"},S={class:"mr-2"};const I=(0,r.e)({__name:"index",setup:function(t){var e,n,u,o=a.bw.isShow,c=a.bw.showDialog,s=(0,r.f)(),_={patContent:f,activeIndex:d,defaultPatContents:v,switchPath:m,filePath:p,item:w,onchange:h},b=_.patContent,g=_.onchange,x=_.item,k=(0,a.j)(0,"PatternFillingDialog_angle"),y=(0,a.j)(11,"PatternFillingDialog_proportion"),C=function(){var t=(0,a._)(a.a.mark(function t(){var r,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c(!1),(r=new i.i).clearLastInputPoint(),r.setMessage("\n"+(0,a.t)("指定填充区域内部一点")+":"),r.disableAllTrace(!0),r.setDisableOsnap(!0),t.next=1,r.go();case 1:(u=t.sent)&&(n=u,e="point"),c(!0);case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),I=function(){var t=(0,a._)(a.a.mark(function t(){var n,r,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c(!1),t.next=1,i.f.userSelect((0,a.t)("选择对象"));case 1:(n=t.sent)&&n.length>0&&(r=n[0],(l=r.getMcDbEntity())&&(u=l),e="object"),c(!0);case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),P=function(){var t=(0,a._)(a.a.mark(function t(){var r,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("point"!==e||!n){t.next=2;break}if(r=i.f.builderHatchFromPoint(n)){t.next=1;break}return i.b.acutPrintf((0,a.t)("没有找到闭合区域")+"\n"),(0,a.h)().error((0,a.t)("没有找到闭合区域")),t.abrupt("return");case 1:l=i.M.getCurrentMxCAD(),x.value&&(l.addPatternDefinition(x.value.id,x.value.value),l.drawPatternDefinition=x.value.id),r.patternAngle=k.value,l.drawHatch(r,10*y.value),c(!1),(0,a.Z)(),e=n=void 0;case 2:"object"===e&&u&&(u instanceof i.d&&new i.Q,u=e=void 0,c(!1));case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),U=function(){e=u=n=void 0,c(!1)},j=[{name:"确定",fun:P,primary:!0,disabled:function(){return void 0===e}},{name:"关闭",fun:U}],A={enter:function(){var t;"INPUT"!==(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)&&P()},esc:U,k:C,b:I};return function(t,e){return(0,r.o)(),(0,r.c)(r.F,null,[(0,r.a)(a.U,{title:t.t("2042"),"max-width":"360",modelValue:(0,r.E)(o),"onUpdate:modelValue":e[4]||(e[4]=function(t){return(0,r.R)(o)?o.value=t:null}),footerBtnList:j,keys:A},{default:(0,r.w)(function(){return[(0,r.l)("div",V,[(0,r.a)(a.X,{title:t.t("2043"),class:"mt-2"},{default:(0,r.w)(function(){return[(0,r.a)(l.D,null,{default:(0,r.w)(function(){return[(0,r.a)(l.C,{cols:"8"},{default:(0,r.w)(function(){return[(0,r.a)(l.d,{items:(0,r.E)(b),"item-title":"id",modelValue:(0,r.E)(x),"onUpdate:modelValue":[e[0]||(e[0]=function(t){return(0,r.R)(x)?x.value=t:null}),(0,r.E)(g)],"return-object":""},{prepend:(0,r.w)(function(){return[(0,r.q)((0,r.t)(t.t("1624"))+": ",1)]}),_:1},8,["items","modelValue","onUpdate:modelValue"])]}),_:1}),(0,r.a)(l.C,{cols:"4"},{default:(0,r.w)(function(){return[(0,r.a)(a.a3,{style:{"min-width":"60px"},onClick:e[1]||(e[1]=function(t){return function(){var t;null===(t=s.value)||void 0===t||t.showDialog(!0)}()})},{default:(0,r.w)(function(){return[(0,r.a)(l.a,{icon:"class:iconfont more"})]}),_:1})]}),_:1})]}),_:1}),(0,r.a)(l.D,null,{default:(0,r.w)(function(){return[(0,r.a)(l.C,{cols:"8"},{default:(0,r.w)(function(){var e;return[(0,r.l)("div",D,[(0,r.l)("span",S,(0,r.t)(t.t("2044"))+":",1),(0,r.a)(l.h,{src:(null===(e=(0,r.E)(x))||void 0===e?void 0:e.imgPath)||"",width:"32",height:"32",style:{flex:"unset"}},null,8,["src"])])]}),_:1}),(0,r.a)(l.C,{cols:"4"})]}),_:1})]}),_:1},8,["title"]),(0,r.a)(a.X,{title:t.t("2045"),class:"mt-2"},{default:(0,r.w)(function(){return[(0,r.a)(l.D,null,{default:(0,r.w)(function(){return[(0,r.a)(l.C,{cols:"6"},{default:(0,r.w)(function(){return[(0,r.a)(a.W,{"key-name":"G",colon:""},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(t.t("169")),1)]}),_:1}),(0,r.a)(l.v,{modelValue:(0,r.E)(k),"onUpdate:modelValue":e[2]||(e[2]=function(t){return(0,r.R)(k)?k.value=t:null}),items:[0,5,10,15,20,30,45,60,90,95,100,120,135,150]},null,8,["modelValue"])]}),_:1}),(0,r.a)(l.C,{cols:"6"},{default:(0,r.w)(function(){return[(0,r.a)(a.W,{"key-name":"S",colon:""},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(t.t("1686")),1)]}),_:1}),(0,r.a)(l.v,{modelValue:(0,r.E)(y),"onUpdate:modelValue":e[3]||(e[3]=function(t){return(0,r.R)(y)?y.value=t:null}),items:[.25,.5,.75,1,1.25,1.5,1.75,2,11]},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1},8,["title"]),(0,r.a)(a.X,{title:t.t("2046"),class:"mt-2"},{default:(0,r.w)(function(){return[(0,r.l)("div",null,[(0,r.a)(a.Y,{onClick:C}),(0,r.a)(a.W,{"key-name":"K"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(t.t("2047"))+": "+(0,r.t)(t.t("1965")),1)]}),_:1})])]}),_:1},8,["title"])])]}),_:1},8,["title","modelValue"]),(0,r.a)(E,{ref_key:"fillSelectDialog",ref:s,onChange:(0,r.E)(g)},null,8,["onChange"])],64)}}})}}]);