"use strict";(self.webpackChunkwebapck_react=self.webpackChunkwebapck_react||[]).push([[902],{5902:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(9091),a=n(2898),i=n(9417),l=n(8285),u=n(5679),c=n(2164);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var o={class:"d-flex algin-center mt-3"},f={class:"mt-2"},p={class:"w-100"},d={class:"w-100"},v={class:"text-left"},b={class:"text-left"},m={class:"w-100"},h=["onClick"],x={class:"text-left"},y={class:"text-left"};const w=(0,a.e)({__name:"index",emits:["change"],setup:function(e,t){var n=t.expose;t.emit;var w=function(){var e=(0,a.f)(0),t=(0,r.F)(),n=t.createLineType,c=(0,u.s)(t),o=c.currentLineType,f=c.lineTypeList,p=(0,a.f)([]),d=(0,a.f)(""),v=function(){var e=(0,r._)(r.a.mark(function e(t){var n,a,i,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,a=l.M.getCurrentMxCAD(),(i=a.database.getLinetypeTable().get(t.name)).isErase()){e.next=3;break}return e.next=1,function(){return new Promise(function(e){(0,r.aC)().open({title:"MxCAD",text:(0,r.t)("218")+" "+t.name+(0,r.t)("2008")+","+(0,r.t)("2009"),cancelTitle:(0,r.t)("1627"),defineTitle:(0,r.t)("1626"),cancel:function(){e(!1)},define:function(){e(!0)}})})}();case 1:if(e.sent){e.next=2;break}return e.abrupt("return");case 2:i.erase(),e.next=4;break;case 3:n=!0;case 4:if(a.addLinetypeEx(t.name,t.value||"","").isValid()){e.next=5;break}return(0,r.h)().error((0,r.t)("218")+":"+t.name+(0,r.t)("2010")+"!"),e.abrupt("return");case 5:n&&f.value.push(t),(u=f.value.find(function(e){var n=e.name;return t.name===n}))&&(u.value=t.value,u.explain=u.appearance=t.appearance),o.value=u||t;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i._)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({lineTypeList:p,createLineType:n,index:e,filePath:d,parseTextLineTypes:function(e){for(var t=e.split("\n"),r=[],a=null,i=0;i<t.length;i++){var l=t[i].trim();if(l.startsWith("*")){a&&r.push(a);var u=l.split(","),c=u[0].slice(1).trim(),s=u.slice(1).join(",").trim(),o=t[i+1].trim().replace(/^A,/,"");a=n({name:c,appearance:s,explain:s,value:o}),i+=1}}return a&&r.push(a),r},addLineType:v},r.bh)}();w.createLineType;var k=w.lineTypeList,g=w.showDialog,O=w.isShow,_=w.index,T=w.filePath,L=w.parseTextLineTypes,j=w.addLineType,P=w.onReveal,C=function(){j(k.value[_.value]),g(!1)},D=[{name:"确定",fun:C,primary:!0},{name:"取消",fun:function(){return g(!1)}}],E=(0,a.f)(),V=function(){E.value&&E.value.click()},R=function(){var e=(0,r._)(r.a.mark(function e(t){var n,a,i,l,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,a=n.files){e.next=1;break}return e.abrupt("return");case 1:return i=a[0],e.next=2,(0,r.bk)(i);case 2:return l=e.sent,e.next=3,(0,r.bi)(l);case 3:u=e.sent,k.value=L(u),T.value=i.name;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return(0,a.j)((0,r._)(r.a.mark(function e(){var t,n,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("fonts/mx.lin",(0,r.bj)()).href,e.next=1,fetch(t);case 1:return n=e.sent,e.next=2,n.blob();case 2:return a=e.sent,e.next=3,(0,r.bi)(a);case 3:i=e.sent,T.value=t,k.value=L(i);case 4:case"end":return e.stop()}},e)}))),P(function(e){_.value=k.value.findIndex(function(t){var n=t.name;return e.name===n})}),n({showDialog:g}),function(e,t){return(0,a.o)(),(0,a.m)(r.U,{title:e.t("2011"),"max-width":"600",modelValue:(0,a.E)(O),"onUpdate:modelValue":t[1]||(t[1]=function(e){return(0,a.R)(O)?O.value=e:null}),footerBtnList:D},{default:(0,a.w)(function(){return[(0,a.l)("div",o,[(0,a.a)(r.a3,{onClick:V,class:"ml-1"},{default:(0,a.w)(function(){return[(0,a.q)((0,a.t)(e.t("219"))+"(F)...",1)]}),_:1}),(0,a.z)((0,a.l)("input",{class:"form__inset w-100",disabled:!0,"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,a.R)(T)?T.value=e:null})},null,512),[[a.ab,(0,a.E)(T)]])]),(0,a.l)("input",{type:"file",ref_key:"fillSelectEl",ref:E,onChange:R,style:{display:"none"},accept:".lin"},null,544),(0,a.l)("div",f,[(0,a.l)("p",null,(0,a.t)(e.t("2013")),1),(0,a.a)(c._,{class:"w-100",cellpadding:"20",height:"300"},{default:(0,a.w)(function(){return[(0,a.l)("thead",p,[(0,a.l)("tr",d,[(0,a.l)("th",v,(0,a.t)(e.t("218")),1),(0,a.l)("th",b,(0,a.t)(e.t("1970")),1)])]),(0,a.l)("tbody",m,[((0,a.o)(!0),(0,a.c)(a.F,null,(0,a.d)((0,a.E)(k),function(e,t){return(0,a.o)(),(0,a.c)("tr",{key:e.id,class:(0,a.p)((0,a.E)(_)===t?"active":""),onClick:function(e){return _.value=t},onDblclick:C},[(0,a.l)("td",x,(0,a.t)(e.name),1),(0,a.l)("td",y,(0,a.t)(e.appearance),1)],42,h)}),128))])]}),_:1})])]}),_:1},8,["title","modelValue"])}}}),k=(0,r.O)(w,[["__scopeId","data-v-1cae60df"]])}}]);