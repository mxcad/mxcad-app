"use strict";(self.webpackChunkwebapck_react=self.webpackChunkwebapck_react||[]).push([[960],{9960:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var a=n(9091),r=n(2898),u=n(8285),l=n(2164),c=function(e){return e[e.HOLD=0]="HOLD",e[e.CONVERT_TO_BLOCK=1]="CONVERT_TO_BLOCK",e[e.DELETE=2]="DELETE",e}(c||{}),o={class:"px-3"},i={class:"f-flex justify-center align-center mt-2"},s={class:"f-flex justify-center align-center mt-2"},f={class:"d-flex flex-column"},d={key:0,class:"f-flex justify-center align-center mt-2"},p={key:1};const b=(0,r.e)({__name:"index",setup:function(e){var t,n=a.aB.isShow,b=a.aB.showDialog,v=function(){var e,t=(0,r.f)(""),n=(0,r.f)((0,a.aA)()),l=(0,a.j)(!1,"Mx_CreateBlocksDialog_is_specify_on_screen_get_base_point"),c=(0,r.h)({x:0,y:0,z:0}),o=function(){var e=(0,a._)(a.a.mark(function e(){var t,n,r,l,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new u.i).clearLastInputPoint(),t.setMessage((0,a.t)("2218")),e.next=1,t.go();case 1:if(n=e.sent){e.next=2;break}return e.abrupt("return");case 2:return r=n.x,l=n.y,o=n.z,c.x=(0,a.v)(r,3),c.y=(0,a.v)(l,3),c.z=(0,a.v)(o,3),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),i=(0,a.j)(!1,"Mx_CreateBlocksDialog_is_specify_on_screen_select_object"),s=(0,a.j)(2,"Mx_CreateBlocksDialog_select_Object_operation_type"),f=(0,r.f)(!0),d=(0,r.f)(0),p=function(){var t=(0,a._)(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new u.j,d.value=0,t.next=1,e.userSelect((0,a.t)("1639"));case 1:if(t.sent){t.next=2;break}return t.abrupt("return");case 2:if(n=e.count(),d.value=n,0!==n){t.next=3;break}return f.value=!0,t.abrupt("return");case 3:return f.value=!1,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),b=(0,r.f)("");return{blockName:t,blockNames:n,getBlockNames:a.aA,basePoint:c,getMouseClickGetBasePoint:o,isSpecifyOnScreenGetBasePoint:l,isNoSelectObject:f,isSpecifyOnScreenSelectObject:i,selectObjectOperationType:s,selectObject:p,createBlock:function(){var e=u.M.getCurrentMxCAD().getDatabase().getBlockTable(),n=new u.n;return n.name=t.value,e.add(n)},loadBlock:function(e,t,n){var a;null===(a=t.getMcDbBlockTableRecord())||void 0===a||a.getAllEntityId().forEach(function(e){var t;null===(t=e.getMcDbEntity())||void 0===t||t.erase()});var r=t.getMcDbBlockTableRecord();if(r){e.forEach(function(e){var t=e.getMcDbEntity();if(t){var n=t.clone();r&&r.appendAcDbEntity(n)}}),r.origin=n;var l=new u.h;return l.blockTableRecordId=t,l.position=n,l}},explainText:b,selectCount:d}}(),m=v.blockName,_=v.blockNames,k=v.basePoint,w=v.getMouseClickGetBasePoint,x=v.isSpecifyOnScreenGetBasePoint,E=v.isNoSelectObject,y=v.isSpecifyOnScreenSelectObject,g=v.selectObjectOperationType,O=v.selectObject,C=v.selectCount,h=v.createBlock,V=v.loadBlock;(0,r.i)(n,function(e){e&&(_.value=(0,a.aA)())});var D=function(){k.x=0,k.y=0,k.z=0,m.value="",t=void 0,E.value=!0,_.value=(0,a.aA)()},B=function(){var e=(0,a._)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!1),e.next=1,w();case 1:b(!0);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,a._)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!1),e.next=1,O();case 1:t=e.sent,b(!0);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,a._)(a.a.mark(function e(){var n,r,l,o,i,s,f,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,a.aC)(),r=n.open,l=!1,o=_.value.includes(m.value),""!==m.value){e.next=1;break}return e.abrupt("return",(0,a.h)().error((0,a.t)("图块名不能为空")+"!"));case 1:if(!o){e.next=5;break}return e.prev=2,e.next=3,function(){return new Promise(function(e,t){r({title:(0,a.t)("是否替换该图块"),text:(0,a.t)("已定义")+m.value+(0,a.t)("的")+(0,a.t)("图块")+"，"+(0,a.t)("是否替换")+"?",define:function(){l=!0,e()},cancel:function(){l=!1,t()},defineTitle:(0,a.t)("是"),cancelTitle:(0,a.t)("否")})})}();case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),e.abrupt("return");case 5:if(l?(s=u.M.getCurrentMxCAD(),f=s.getDatabase().getBlockTable(),i=f.get(m.value)):i=h(),!x.value){e.next=6;break}return b(!1),e.next=6,w();case 6:if(!y.value){e.next=8;break}return b(!1),e.next=7,O();case 7:t=e.sent;case 8:if(t&&!E.value){e.next=9;break}return e.abrupt("return",(0,a.h)().error((0,a.t)("没有为块")+m.value+(0,a.t)("选择对象")+"!"));case 9:if(d=V(t,i,new u.q(k.x,k.y,k.z))){e.next=10;break}return e.abrupt("return",(0,a.h)().error((0,a.t)("创建块失败")+"!"));case 10:g.value!==c.HOLD&&(t.forEach(function(e){var t=e.getMcDbEntity();t&&t.erase()}),(0,a.Z)()),g.value===c.CONVERT_TO_BLOCK&&u.M.getCurrentMxCAD().drawEntity(d),b(!1),D();case 11:case"end":return e.stop()}},e,null,[[2,4]])}));return function(){return e.apply(this,arguments)}}(),S=[{name:"确定",fun:j,primary:!0},{name:"关闭",fun:function(){b(!1),D()}}];return function(e,t){return(0,r.o)(),(0,r.m)(a.U,{title:e.t("212"),onClickClose:D,modelValue:(0,r.E)(n),"onUpdate:modelValue":t[7]||(t[7]=function(e){return(0,r.R)(n)?n.value=e:null}),"max-width":"400",footerBtnList:S},{default:(0,r.w)(function(){return[(0,r.l)("div",o,[(0,r.a)(l.v,{class:"mt-2",modelValue:(0,r.E)(m),"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,r.R)(m)?m.value=e:null}),items:(0,r.E)(_)},{prepend:(0,r.w)(function(){return[(0,r.a)(a.W,{"key-name":"N"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1923")),1)]}),_:1})]}),_:1},8,["modelValue","items"]),(0,r.a)(l.D,{"align-stretch":""},{default:(0,r.w)(function(){return[(0,r.a)(l.C,{cols:6,"align-self":"stretch"},{default:(0,r.w)(function(){return[(0,r.a)(a.X,{title:e.t("1964"),class:"h-100"},{default:(0,r.w)(function(){return[(0,r.a)(l.j,{modelValue:(0,r.E)(x),"onUpdate:modelValue":t[1]||(t[1]=function(e){return(0,r.R)(x)?x.value=e:null})},{label:(0,r.w)(function(){return[(0,r.a)(a.W,{"key-name":"S"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1927")),1)]}),_:1})]}),_:1},8,["modelValue"]),(0,r.l)("div",i,[(0,r.a)(a.Y,{disabled:(0,r.E)(x),onClick:B},null,8,["disabled"]),(0,r.a)(a.W,{class:(0,r.p)((0,r.E)(x)?"text-disabled":""),"key-name":"S"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1965")),1)]}),_:1},8,["class"])]),(0,r.a)(l.i,{class:"mt-3",modelValue:(0,r.E)(k).x,"onUpdate:modelValue":t[2]||(t[2]=function(e){return(0,r.E)(k).x=e}),type:"number",disabled:(0,r.E)(x)},{prepend:(0,r.w)(function(){return t[8]||(t[8]=[(0,r.l)("span",{class:""}," X:",-1)])}),_:1},8,["modelValue","disabled"]),(0,r.a)(l.i,{class:"mt-1",modelValue:(0,r.E)(k).y,"onUpdate:modelValue":t[3]||(t[3]=function(e){return(0,r.E)(k).y=e}),type:"number",disabled:(0,r.E)(x)},{prepend:(0,r.w)(function(){return t[9]||(t[9]=[(0,r.l)("span",{class:""}," Y: ",-1)])}),_:1},8,["modelValue","disabled"]),(0,r.a)(l.i,{class:"mt-1",modelValue:(0,r.E)(k).z,"onUpdate:modelValue":t[4]||(t[4]=function(e){return(0,r.E)(k).z=e}),type:"number",disabled:(0,r.E)(x)},{prepend:(0,r.w)(function(){return t[10]||(t[10]=[(0,r.l)("span",{class:""}," Z:",-1)])}),_:1},8,["modelValue","disabled"])]}),_:1},8,["title"])]}),_:1}),(0,r.a)(l.C,{cols:6,"align-self":"stretch"},{default:(0,r.w)(function(){return[(0,r.a)(a.X,{title:e.t("177"),class:"h-100"},{default:(0,r.w)(function(){return[(0,r.a)(l.j,{modelValue:(0,r.E)(y),"onUpdate:modelValue":t[5]||(t[5]=function(e){return(0,r.R)(y)?y.value=e:null})},{label:(0,r.w)(function(){return[(0,r.a)(a.W,{class:"","key-name":"S"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1927")),1)]}),_:1})]}),_:1},8,["modelValue"]),(0,r.l)("div",s,[(0,r.a)(a.Y,{disabled:(0,r.E)(y),onClick:T},null,8,["disabled"]),(0,r.a)(a.W,{class:(0,r.p)((0,r.E)(y)?"text-disabled":""),"key-name":"I"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1602")),1)]}),_:1},8,["class"])]),(0,r.a)(l.Q,{column:"",class:"mt-2",modelValue:(0,r.E)(g),"onUpdate:modelValue":t[6]||(t[6]=function(e){return(0,r.R)(g)?g.value=e:null})},{default:(0,r.w)(function(){return[(0,r.l)("div",f,[(0,r.a)(l.S,{value:(0,r.E)(c).HOLD,class:"mt-1"},{label:(0,r.w)(function(){return[(0,r.a)(a.W,{class:"","key-name":"R"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1966")),1)]}),_:1})]}),_:1},8,["value"]),(0,r.a)(l.S,{value:(0,r.E)(c).CONVERT_TO_BLOCK,class:"mt-1"},{label:(0,r.w)(function(){return[(0,r.a)(a.W,{class:"","key-name":"C"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1967")),1)]}),_:1})]}),_:1},8,["value"]),(0,r.a)(l.S,{value:(0,r.E)(c).DELETE,class:"mt-1"},{label:(0,r.w)(function(){return[(0,r.a)(a.W,{class:"","key-name":"D"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("205")),1)]}),_:1})]}),_:1},8,["value"])])]}),_:1},8,["modelValue"]),(0,r.E)(E)?((0,r.o)(),(0,r.c)("div",d,[(0,r.a)(l.a,{icon:"jinggao"}),(0,r.a)(a.W,{class:"","key-name":"I"},{default:(0,r.w)(function(){return[(0,r.q)((0,r.t)(e.t("1968")),1)]}),_:1})])):((0,r.o)(),(0,r.c)("div",p,(0,r.t)(e.t("1969")+":"+(0,r.E)(C)+e.t("1920")),1))]}),_:1},8,["title"])]}),_:1})]}),_:1})])]}),_:1},8,["title","modelValue"])}}}),v=(0,a.O)(b,[["__scopeId","data-v-766b5b64"]])}}]);