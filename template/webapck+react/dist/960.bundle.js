"use strict";(self.webpackChunkwebapck_react=self.webpackChunkwebapck_react||[]).push([[960],{9960:function(e,a,t){t.r(a),t.d(a,{default:function(){return d}});var n=t(8741),r=function(e){return e[e.HOLD=0]="HOLD",e[e.CONVERT_TO_BLOCK=1]="CONVERT_TO_BLOCK",e[e.DELETE=2]="DELETE",e}(r||{}),u={class:"px-3"},l={class:"f-flex justify-center align-center mt-2"},c={class:"f-flex justify-center align-center mt-2"},o={class:"d-flex flex-column"},s={key:0,class:"f-flex justify-center align-center mt-2"},i={key:1};const f=(0,n.at)({__name:"index",setup:function(e){var a,t=n.c0.isShow,f=n.c0.showDialog,d=function(){var e,a=(0,n.aq)(""),t=(0,n.aq)((0,n.b_)()),r=(0,n.I)(!1,"Mx_CreateBlocksDialog_is_specify_on_screen_get_base_point"),u=(0,n.b8)({x:0,y:0,z:0}),l=function(){var e=(0,n._)(n.a.mark(function e(){var a,t,r,l,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new n.j).clearLastInputPoint(),a.setMessage((0,n.t)("2218")),e.next=1,a.go();case 1:if(t=e.sent){e.next=2;break}return e.abrupt("return");case 2:return r=t.x,l=t.y,c=t.z,u.x=(0,n.X)(r,3),u.y=(0,n.X)(l,3),u.z=(0,n.X)(c,3),e.abrupt("return",t);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),c=(0,n.I)(!1,"Mx_CreateBlocksDialog_is_specify_on_screen_select_object"),o=(0,n.I)(2,"Mx_CreateBlocksDialog_select_Object_operation_type"),s=(0,n.aq)(!0),i=(0,n.aq)(0),f=function(){var a=(0,n._)(n.a.mark(function a(){var t;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=new n.J,i.value=0,a.next=1,e.userSelect((0,n.t)("1639"));case 1:if(a.sent){a.next=2;break}return a.abrupt("return");case 2:if(t=e.count(),i.value=t,0!==t){a.next=3;break}return s.value=!0,a.abrupt("return");case 3:return s.value=!1,a.abrupt("return",e);case 4:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}(),d=(0,n.aq)("");return{blockName:a,blockNames:t,getBlockNames:n.b_,basePoint:u,getMouseClickGetBasePoint:l,isSpecifyOnScreenGetBasePoint:r,isNoSelectObject:s,isSpecifyOnScreenSelectObject:c,selectObjectOperationType:o,selectObject:f,createBlock:function(){var e=n.M.getCurrentMxCAD().getDatabase().getBlockTable(),t=new n.b$;return t.name=a.value,e.add(t)},loadBlock:function(e,a,t){var r;null===(r=a.getMcDbBlockTableRecord())||void 0===r||r.getAllEntityId().forEach(function(e){var a;null===(a=e.getMcDbEntity())||void 0===a||a.erase()});var u=a.getMcDbBlockTableRecord();if(u){e.forEach(function(e){var a=e.getMcDbEntity();if(a){var t=a.clone();u&&u.appendAcDbEntity(t)}}),u.origin=t;var l=new n.$;return l.blockTableRecordId=a,l.position=t,l}},explainText:d,selectCount:i}}(),b=d.blockName,p=d.blockNames,y=d.basePoint,_=d.getMouseClickGetBasePoint,m=d.isSpecifyOnScreenGetBasePoint,v=d.isNoSelectObject,C=d.isSpecifyOnScreenSelectObject,k=d.selectObjectOperationType,x=d.selectObject,g=d.selectCount,O=d.createBlock,V=d.loadBlock;(0,n.au)(t,function(e){e&&(p.value=(0,n.b_)())});var G=function(){y.x=0,y.y=0,y.z=0,b.value="",a=void 0,v.value=!0,p.value=(0,n.b_)()},B=function(){var e=(0,n._)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=1,_();case 1:f(!0);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,n._)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=1,x();case 1:a=e.sent,f(!0);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,n._)(n.a.mark(function e(){var t,u,l,c,o,s,i,d;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,n.c1)(),u=t.open,l=!1,c=p.value.includes(b.value),""!==b.value){e.next=1;break}return e.abrupt("return",(0,n.F)().error((0,n.t)("图块名不能为空")+"!"));case 1:if(!c){e.next=5;break}return e.prev=2,e.next=3,function(){return new Promise(function(e,a){u({title:(0,n.t)("是否替换该图块"),text:(0,n.t)("已定义")+b.value+(0,n.t)("的")+(0,n.t)("图块")+"，"+(0,n.t)("是否替换")+"?",define:function(){l=!0,e()},cancel:function(){l=!1,a()},defineTitle:(0,n.t)("是"),cancelTitle:(0,n.t)("否")})})}();case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),e.abrupt("return");case 5:if(l?(s=n.M.getCurrentMxCAD(),i=s.getDatabase().getBlockTable(),o=i.get(b.value)):o=O(),!m.value){e.next=6;break}return f(!1),e.next=6,_();case 6:if(!C.value){e.next=8;break}return f(!1),e.next=7,x();case 7:a=e.sent;case 8:if(a&&!v.value){e.next=9;break}return e.abrupt("return",(0,n.F)().error((0,n.t)("没有为块")+b.value+(0,n.t)("选择对象")+"!"));case 9:if(d=V(a,o,new n.e(y.x,y.y,y.z))){e.next=10;break}return e.abrupt("return",(0,n.F)().error((0,n.t)("创建块失败")+"!"));case 10:k.value!==r.HOLD&&(a.forEach(function(e){var a=e.getMcDbEntity();a&&a.erase()}),(0,n.b6)()),k.value===r.CONVERT_TO_BLOCK&&n.M.getCurrentMxCAD().drawEntity(d),f(!1),G();case 11:case"end":return e.stop()}},e,null,[[2,4]])}));return function(){return e.apply(this,arguments)}}(),D=[{name:"确定",fun:h,primary:!0},{name:"关闭",fun:function(){f(!1),G()}}];return function(e,a){return(0,n.aw)(),(0,n.ax)(n.aY,{title:e.t("212"),onClickClose:G,modelValue:(0,n.ay)(t),"onUpdate:modelValue":a[7]||(a[7]=function(e){return(0,n.aK)(t)?t.value=e:null}),"max-width":"400",footerBtnList:D},{default:(0,n.aG)(function(){return[(0,n.aB)("div",u,[(0,n.aC)(n.b9,{class:"mt-2",modelValue:(0,n.ay)(b),"onUpdate:modelValue":a[0]||(a[0]=function(e){return(0,n.aK)(b)?b.value=e:null}),items:(0,n.ay)(p)},{prepend:(0,n.aG)(function(){return[(0,n.aC)(n.b0,{"key-name":"N"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1923")),1)]}),_:1})]}),_:1},8,["modelValue","items"]),(0,n.aC)(n.aU,{"align-stretch":""},{default:(0,n.aG)(function(){return[(0,n.aC)(n.aV,{cols:6,"align-self":"stretch"},{default:(0,n.aG)(function(){return[(0,n.aC)(n.b1,{title:e.t("1964"),class:"h-100"},{default:(0,n.aG)(function(){return[(0,n.aC)(n.aN,{modelValue:(0,n.ay)(m),"onUpdate:modelValue":a[1]||(a[1]=function(e){return(0,n.aK)(m)?m.value=e:null})},{label:(0,n.aG)(function(){return[(0,n.aC)(n.b0,{"key-name":"S"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1927")),1)]}),_:1})]}),_:1},8,["modelValue"]),(0,n.aB)("div",l,[(0,n.aC)(n.b2,{disabled:(0,n.ay)(m),onClick:B},null,8,["disabled"]),(0,n.aC)(n.b0,{class:(0,n.bs)((0,n.ay)(m)?"text-disabled":""),"key-name":"S"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1965")),1)]}),_:1},8,["class"])]),(0,n.aC)(n.aM,{class:"mt-3",modelValue:(0,n.ay)(y).x,"onUpdate:modelValue":a[2]||(a[2]=function(e){return(0,n.ay)(y).x=e}),type:"number",disabled:(0,n.ay)(m)},{prepend:(0,n.aG)(function(){return a[8]||(a[8]=[(0,n.aB)("span",{class:""}," X:",-1)])}),_:1},8,["modelValue","disabled"]),(0,n.aC)(n.aM,{class:"mt-1",modelValue:(0,n.ay)(y).y,"onUpdate:modelValue":a[3]||(a[3]=function(e){return(0,n.ay)(y).y=e}),type:"number",disabled:(0,n.ay)(m)},{prepend:(0,n.aG)(function(){return a[9]||(a[9]=[(0,n.aB)("span",{class:""}," Y: ",-1)])}),_:1},8,["modelValue","disabled"]),(0,n.aC)(n.aM,{class:"mt-1",modelValue:(0,n.ay)(y).z,"onUpdate:modelValue":a[4]||(a[4]=function(e){return(0,n.ay)(y).z=e}),type:"number",disabled:(0,n.ay)(m)},{prepend:(0,n.aG)(function(){return a[10]||(a[10]=[(0,n.aB)("span",{class:""}," Z:",-1)])}),_:1},8,["modelValue","disabled"])]}),_:1},8,["title"])]}),_:1}),(0,n.aC)(n.aV,{cols:6,"align-self":"stretch"},{default:(0,n.aG)(function(){return[(0,n.aC)(n.b1,{title:e.t("177"),class:"h-100"},{default:(0,n.aG)(function(){return[(0,n.aC)(n.aN,{modelValue:(0,n.ay)(C),"onUpdate:modelValue":a[5]||(a[5]=function(e){return(0,n.aK)(C)?C.value=e:null})},{label:(0,n.aG)(function(){return[(0,n.aC)(n.b0,{class:"","key-name":"S"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1927")),1)]}),_:1})]}),_:1},8,["modelValue"]),(0,n.aB)("div",c,[(0,n.aC)(n.b2,{disabled:(0,n.ay)(C),onClick:w},null,8,["disabled"]),(0,n.aC)(n.b0,{class:(0,n.bs)((0,n.ay)(C)?"text-disabled":""),"key-name":"I"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1602")),1)]}),_:1},8,["class"])]),(0,n.aC)(n.a_,{column:"",class:"mt-2",modelValue:(0,n.ay)(k),"onUpdate:modelValue":a[6]||(a[6]=function(e){return(0,n.aK)(k)?k.value=e:null})},{default:(0,n.aG)(function(){return[(0,n.aB)("div",o,[(0,n.aC)(n.a$,{value:(0,n.ay)(r).HOLD,class:"mt-1"},{label:(0,n.aG)(function(){return[(0,n.aC)(n.b0,{class:"","key-name":"R"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1966")),1)]}),_:1})]}),_:1},8,["value"]),(0,n.aC)(n.a$,{value:(0,n.ay)(r).CONVERT_TO_BLOCK,class:"mt-1"},{label:(0,n.aG)(function(){return[(0,n.aC)(n.b0,{class:"","key-name":"C"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1967")),1)]}),_:1})]}),_:1},8,["value"]),(0,n.aC)(n.a$,{value:(0,n.ay)(r).DELETE,class:"mt-1"},{label:(0,n.aG)(function(){return[(0,n.aC)(n.b0,{class:"","key-name":"D"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("205")),1)]}),_:1})]}),_:1},8,["value"])])]}),_:1},8,["modelValue"]),(0,n.ay)(v)?((0,n.aw)(),(0,n.aA)("div",s,[(0,n.aC)(n.aH,{icon:"jinggao"}),(0,n.aC)(n.b0,{class:"","key-name":"I"},{default:(0,n.aG)(function(){return[(0,n.aJ)((0,n.aF)(e.t("1968")),1)]}),_:1})])):((0,n.aw)(),(0,n.aA)("div",i,(0,n.aF)(e.t("1969")+":"+(0,n.ay)(g)+e.t("1920")),1))]}),_:1},8,["title"])]}),_:1})]}),_:1})])]}),_:1},8,["title","modelValue"])}}}),d=(0,n.aQ)(f,[["__scopeId","data-v-766b5b64"]])}}]);